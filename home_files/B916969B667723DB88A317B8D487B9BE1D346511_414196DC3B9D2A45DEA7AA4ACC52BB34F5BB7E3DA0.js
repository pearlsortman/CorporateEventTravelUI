//Createdby: Minifier404
//Compiler: MSFT AjaxMin
//Generated: 2016-09-22 08:04:11
//FileList: /javascript/browserutil.js,/javascript/overlib.js,/javascript/time.js,/javascript/ddmagic.js,/javascript/travel/travel_constants.js,/javascript/tripfuncs.js,/javascript/travel/travelhome_flight_widget.js,/javascript/concurmaps.js,/javascript/travel/travelhome_car.js,/javascript/travel/travelhome_air.js,/javascript/validations.js,/javascript/http.js,/javascript/airportautocomplete.js,/javascript/locationserviceclient.js,/javascript/companyautocomplete.js,/javascript/companylocationsautocomplete.js,/javascript/preferredhotelsautocomplete.js,/javascript/railstationautocomplete.js,/javascript/travel/travelhome_rail.js,/javascript/travel/travelhome_limo.js,/javascript/bcal.js,/javascript/dateedit.js,/javascript/geocoder.js,/javascript/travel/hotelsearch_geocode.js,/javascript/autofillcountries.js

//FileName: /javascript/browserutil.js
var bUtil;function BrowserCheck(){var c=-1,a=this,b=navigator.userAgent.toLowerCase(),d=b.indexOf("msie")+5,e=parseFloat(b.substring(d,d+3));a.major=parseInt(navigator.appVersion,10);a.minor=parseFloat(navigator.appVersion);a.nav=b.indexOf("mozilla")!=c&&b.indexOf("spoofer")==c&&b.indexOf("compatible")==c&&b.indexOf("opera")==c&&b.indexOf("webtv")==c;a.nav2=a.nav&&a.major==2;a.nav3=a.nav&&a.major==3;a.nav4=a.nav&&a.major==4;a.nav4up=a.nav&&a.major>=4;a.navonly=a.nav&&(b.indexOf(";nav")!=c||b.indexOf("; nav")!=c);a.nav7=a.nav&&b.indexOf("netscape/7")!=c;a.nav6=a.nav&&b.indexOf("netscape6")!=c;a.nav6up=a.nav&&document.getElementById?true:false;a.nav5=a.nav&&a.major==5&&(!a.nav7&&!a.nav6);a.nav5up=a.nav&&a.major>=5;a.ie=b.indexOf("msie")!=c;a.ie3=a.ie&&a.major<4;a.ie4=a.ie&&a.major==4&&e<5;a.ie4up=a.ie&&a.major>=4;a.ie5=a.ie&&a.major==4&&b.indexOf("msie 5.")!=c;a.ie5up=a.ie&&!a.ie3&&!a.ie4;a.ie55up=a.ie5up&&window.createPopup?true:false;a.ie6=a.ie&&b.indexOf("msie 6.")>0;a.ie6up=a.ie&&!a.ie3&&!a.ie4&&!a.ie5;a.ie7=a.ie&&b.indexOf("msie 7.")>0;a.ie7up=a.ie&&window.XMLHttpRequest;a.gecko=b.indexOf("gecko")!=c;a.opera=b.indexOf("opera")!=c;a.webtv=b.indexOf("webtv")!=c;a.safari=b.indexOf("safari")!=c;a.mozilla=a.gecko&&b.indexOf("netscape")==c;a.firefox=a.mozilla&&b.indexOf("firefox/")>0;a.firefox2=a.firefox&&b.indexOf("firefox/2.")>0;a.chrome=a.mozilla&&b.indexOf("chrome/")>0;a.win=b.indexOf("win")!=c||b.indexOf("16bit")!=c;a.win95=b.indexOf("win95")!=c||b.indexOf("windows 95")!=c;a.win31=b.indexOf("windows 3.1")!=c||b.indexOf("win16")!=c||b.indexOf("windows 16-bit")!=c}function getNamedObj(name,parentObj){var b="undefined",a=this;if(typeof parentObj==b||(a.ie5up||a.nav6up))parentObj="document";var foundObj,getObjCmd=parentObj+".";if(a.ie5up||a.nav6up){foundObj=eval(parentObj+".getElementById('"+name+"')");if(foundObj==null||foundObj==b||!foundObj)foundObj=eval(parentObj+".getElementsByName('"+name+"')[0]");return foundObj}else if(a.ie4up)getObjCmd+="all.";getObjCmd+=name;foundObj=eval("getObjCmd");return foundObj}function insertInto(c,b){var a=this.getNamedObj(c);if(a!=null)if(a.innerHTML!=null)a.innerHTML=b;else{a.document.open();a.document.write(b);a.document.close()}}function getOffsetLeft(a,c){var b=a.offsetLeft;if(c){b-=a.scrollLeft;b+=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft}while((a=a.offsetParent)!=null){b+=a.offsetLeft;if(c)b-=a.scrollLeft}return b}function getOffsetTop(a,c){var b=a.offsetTop;if(c){b-=a.scrollTop;b-=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}while((a=a.offsetParent)!=null){b+=a.offsetTop;if(c)b-=a.scrollTop}return b}function findParentByTagName(a,b){while(a.parentNode&&(!a.tagName||a.tagName.toUpperCase()!=b.toUpperCase()))a=a.parentNode;return a.tagName&&a.tagName.toUpperCase()==b.toUpperCase()?a:null}function getObjX(b){var a=this;if(b.history){if(a.ie4up)return b.screenLeft;if(a.navup)return b.screenX}else if(b.src){if(a.ie4up||!a.nav6up)return;else if(a.nav4||a.nav6up)return b.x}else if(a.ie4up||a.nav6up)return getOffsetLeft(b);else if(a.nav4)return b.pageX}function getObjY(b){var a=this;if(b.history){if(a.ie4up)return b.screenTop;if(a.nav)return b.screenY}else if(b.src){if(a.ie4up||!a.nav6up)return;else if(a.nav4||a.nav6up)return b.y}else if(a.ie4up||a.nav6up)return getOffsetTop(b);else if(a.nav4)return b.pageY}function moveObjBy(a,b,c){if(this.nav4)a.moveBy(b,c);else if(this.ie4up||this.nav6up)if(a.history)a.moveBy(b,c);else{a.style.left+=b;a.style.top+=c}}function moveObjTo(a,b,c){if(this.nav4)a.moveTo(b,c);else if(this.ie4up||this.nav6up)if(a.history)a.moveTo(b,c);else{a.style.left=b;a.style.top=c}}function widthOf(a){var b;if(a.availWidth)return a.availWidth;else if(a.history)if(window.innerHeight)b=a.innerWidth;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))b=a.document.documentElement.clientWidth;else b=a.document.body.clientWidth;else if(this.ie4up||this.nav6up)b=a.offsetWidth;else if(this.nav4)b=a.clip.width;return b}function heightOf(a){var b;if(a.availHeight)b=a.availHeight;else if(a.history)if(window.innerHeight)b=a.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))b=a.document.documentElement.clientHeight;else b=a.document.body.clientHeight;else if(this.ie4up||this.nav6up)b=a.offsetHeight;else if(this.nav4)b=a.clip.height;return b}function centerObj(f){var a=this,e=a.widthOf(screen),d=a.heightOf(screen),c=a.widthOf(f),b=a.heightOf(f);c=c>e?e:c;b=b>d?d:b;var g=(e-c)/2,h=(d-b)/2-40;a.moveObjTo(f,g,h)}function centerObjInWindow(b){var a=this,c=a.widthOf(window)/2-a.widthOf(b)/2,d=Math.abs(a.heightOf(window)/2-a.heightOf(b)/2);a.moveObjTo(b,c,d)}function getWinLeft(b){return(bUtil.widthOf(screen)-b)/2}function getWinTop(a){oTop=(bUtil.heightOf(screen)-a)/2;return oTop}function filterMe(b){if(bUtil.nav4){var a=routeEvent(b);return a==false?false:true}}function filterKeys(c){var a=true,b=false;for(i=0;i<arrKeys.length;i++)if(bUtil.ie4up){if(window.event.keyCode==arrKeys[i])b=a}else if(bUtil.nav4up)if(c.which==arrKeys[i])b=a;if(bUtil.ie4up&&b==a)window.event.returnValue=false;bUtil.nav6up&&b==a&&event.preventDefault();return bUtil.nav4&&b==a?false:a}function otDisable(a,e,d,b){var c=a.type=="checkbox"||a.type=="radio";b=typeof b!=="undefined"?b:true;if(!e){a.className="small-black";a.readOnly=false;a.tabindex=0;if(b)a.onfocus="";if(c)a.disabled=false}else{if(d){if(!c)a.value="";if(c)a.checked=false}a.className="readonlytextboxsmall";a.readOnly=true;if(b)a.onfocus=function(){a.blur()};if(c)a.disabled=true}}function hideIt(theObj){var strStyle=this.nav4?"":".style";eval("theObj"+strStyle+".visibility = 'hidden'")}function showIt(theObj){var strStyle=this.nav4?"":".style";eval("theObj"+strStyle+".visibility = 'visible'")}function toggleVis(theObj){var strStyle=this.nav4?"":".style",isVisible;isVisible=eval("theObj"+strStyle+".visibility");if(isVisible==null||isVisible=="undefined"||isVisible=="hidden"||isVisible=="hide")this.showIt(theObj);else this.hideIt(theObj)}function getMouseClickX(a){return this.ie?window.event.offsetX:a.layerX}function getMouseClickY(a){return this.ie?window.event.offsetY:a.layerY}function ot_isPointInsideElement(a,e,f){var b=this;if(typeof a=="undefined"||a==null)return false;var c=b.getOffsetLeft(a),h=c+b.widthOf(a),d=b.getOffsetTop(a),g=d+b.heightOf(a);return c<=e&&e<=h&&(d<=f&&f<=g)?true:false}function ot_getElementForPoint(d,e){if(document.elementFromPoint)return document.elementFromPoint(d,e);else{for(var c=document.getElementsByTagName("*"),a,b=c.length-1;b>=0;b--){a=c[b];if(!a)continue;if(a.tagName=="HTML"||a.tagName=="BODY"||a.tagName=="!")continue;if(this.isPointInsideElement(a,d,e))return a}return null}}function ot_getButtonPressed(b){var a=b.button;if(typeof a!="number"||Number(b.which)>3)a=b.which;if(this.gecko)switch(a){case 0:a=1;break;case 1:a=4;break;case 2:a=2}return a}BrowserCheck.prototype.insertInto=insertInto;BrowserCheck.prototype.moveObjTo=moveObjTo;BrowserCheck.prototype.moveObjBy=moveObjBy;BrowserCheck.prototype.getNamedObj=getNamedObj;BrowserCheck.prototype.widthOf=widthOf;BrowserCheck.prototype.heightOf=heightOf;BrowserCheck.prototype.centerObj=centerObj;BrowserCheck.prototype.getWinLeft=getWinLeft;BrowserCheck.prototype.getWinTop=getWinTop;BrowserCheck.prototype.filterKeys=filterKeys;BrowserCheck.prototype.filterMe=filterMe;BrowserCheck.prototype.otDisable=otDisable;BrowserCheck.prototype.toggleVis=toggleVis;BrowserCheck.prototype.centerObjInWindow=centerObjInWindow;BrowserCheck.prototype.hideIt=hideIt;BrowserCheck.prototype.showIt=showIt;BrowserCheck.prototype.getObjX=getObjX;BrowserCheck.prototype.getObjY=getObjY;BrowserCheck.prototype.getOffsetTop=getOffsetTop;BrowserCheck.prototype.getOffsetLeft=getOffsetLeft;BrowserCheck.prototype.getMouseClickX=getMouseClickX;BrowserCheck.prototype.getMouseClickY=getMouseClickY;BrowserCheck.prototype.isPointInsideElement=ot_isPointInsideElement;BrowserCheck.prototype.getElementForPoint=ot_getElementForPoint;BrowserCheck.prototype.getButtonPressed=ot_getButtonPressed;BrowserCheck.prototype.findParentByTagName=findParentByTagName;bUtil=new BrowserCheck;

//FileName: /javascript/overlib.js
var INARRAY=1,CAPARRAY=2,STICKY=3,BACKGROUND=4,NOCLOSE=5,CAPTION=6,LEFT=7,RIGHT=8,CENTER=9,OFFSETX=10,OFFSETY=11,FGCOLOR=12,BGCOLOR=13,TEXTCOLOR=14,CAPCOLOR=15,CLOSECOLOR=16,WIDTH=17,BORDER=18,STATUS=19,AUTOSTATUS=20,AUTOSTATUSCAP=21,HEIGHT=22,CLOSETEXT=23,SNAPX=24,SNAPY=25,FIXX=26,FIXY=27,FGBACKGROUND=28,BGBACKGROUND=29,PADX=30,PADY=31,PADX2=32,PADY2=33,FULLHTML=34,ABOVE=35,BELOW=36,CAPICON=37,TEXTFONT=38,CAPTIONFONT=39,CLOSEFONT=40,TEXTSIZE=41,CAPTIONSIZE=42,CLOSESIZE=43,FRAME=44,TIMEOUT=45,FUNCTION=46,DELAY=47,HAUTO=48,VAUTO=49,OTHIDEDD=100;if(typeof ol_fgcolor=="undefined")var ol_fgcolor="#CCCCFF";if(typeof ol_bgcolor=="undefined")var ol_bgcolor="#333399";if(typeof ol_textcolor=="undefined")var ol_textcolor="#000000";if(typeof ol_capcolor=="undefined")var ol_capcolor="#FFFFFF";if(typeof ol_closecolor=="undefined")var ol_closecolor="#9999FF";if(typeof ol_textfont=="undefined")var ol_textfont="Verdana,Arial,Helvetica";if(typeof ol_captionfont=="undefined")var ol_captionfont="Verdana,Arial,Helvetica";if(typeof ol_closefont=="undefined")var ol_closefont="Verdana,Arial,Helvetica";if(typeof ol_textsize=="undefined")var ol_textsize="1";if(typeof ol_captionsize=="undefined")var ol_captionsize="1";if(typeof ol_closesize=="undefined")var ol_closesize="1";if(typeof ol_width=="undefined")var ol_width="200";if(typeof ol_border=="undefined")var ol_border="1";if(typeof ol_offsetx=="undefined")var ol_offsetx=10;if(typeof ol_offsety=="undefined")var ol_offsety=10;if(typeof ol_text=="undefined")var ol_text="Default Text";if(typeof ol_cap=="undefined")var ol_cap="";if(typeof ol_sticky=="undefined")var ol_sticky=0;if(typeof ol_background=="undefined")var ol_background="";if(typeof ol_close=="undefined")var ol_close="[X]";if(typeof ol_hpos=="undefined")var ol_hpos=RIGHT;if(typeof ol_status=="undefined")var ol_status="";if(typeof ol_autostatus=="undefined")var ol_autostatus=0;if(typeof ol_height=="undefined")var ol_height=-1;if(typeof ol_snapx=="undefined")var ol_snapx=0;if(typeof ol_snapy=="undefined")var ol_snapy=0;if(typeof ol_fixx=="undefined")var ol_fixx=-1;if(typeof ol_fixy=="undefined")var ol_fixy=-1;if(typeof ol_fgbackground=="undefined")var ol_fgbackground="";if(typeof ol_bgbackground=="undefined")var ol_bgbackground="";if(typeof ol_padxl=="undefined")var ol_padxl=1;if(typeof ol_padxr=="undefined")var ol_padxr=1;if(typeof ol_padyt=="undefined")var ol_padyt=1;if(typeof ol_padyb=="undefined")var ol_padyb=1;if(typeof ol_fullhtml=="undefined")var ol_fullhtml=0;if(typeof ol_vpos=="undefined")var ol_vpos=BELOW;if(typeof ol_aboveheight=="undefined")var ol_aboveheight=0;if(typeof ol_caption=="undefined")var ol_capicon="";if(typeof ol_frame=="undefined")var ol_frame=self;if(typeof ol_timeout=="undefined")var ol_timeout=0;if(typeof ol_function=="undefined")var ol_function=Function();if(typeof ol_delay=="undefined")var ol_delay=0;if(typeof ol_hauto=="undefined")var ol_hauto=0;if(typeof ol_vauto=="undefined")var ol_vauto=0;if(typeof OT_OPT_HIDEDD=="undefined")var OT_OPT_HIDEDD=0;var ol_texts=["Array Text 0","Array Text 1"],ol_caps=["Array Caption 0","Array Caption 1"],o3_text="",o3_cap="",o3_sticky=0,o3_background="",o3_close="[X]",o3_hpos=RIGHT,o3_offsetx=2,o3_offsety=2,o3_fgcolor="",o3_bgcolor="",o3_textcolor="",o3_capcolor="",o3_closecolor="",o3_width=100,o3_border=1,o3_status="",o3_autostatus=0,o3_height=-1,o3_snapx=0,o3_snapy=0,o3_fixx=-1,o3_fixy=-1,o3_fgbackground="",o3_bgbackground="",o3_padxl=0,o3_padxr=0,o3_padyt=0,o3_padyb=0,o3_fullhtml=0,o3_vpos=BELOW,o3_aboveheight=0,o3_capicon="",o3_textfont="Verdana,Arial,Helvetica",o3_captionfont="Verdana,Arial,Helvetica",o3_closefont="Verdana,Arial,Helvetica",o3_textsize="1",o3_captionsize="1",o3_closesize="1",o3_frame=self,o3_timeout=0,o3_timerid=0,o3_allowmove=0,o3_function=Function(),o3_delay=0,o3_delayid=0,o3_hauto=0,o3_vauto=0,OT_OPT_HIDEDD=0,o3_x=0,o3_y=0,o3_allow=0,o3_showingsticky=0,o3_removecounter=0,over=null,o3_agt=navigator.userAgent.toLowerCase(),o3_nav=o3_agt.indexOf("mozilla")!=-1&&o3_agt.indexOf("spoofer")==-1&&o3_agt.indexOf("compatible")==-1&&o3_agt.indexOf("opera")==-1&&o3_agt.indexOf("webtv")==-1,o3_ns4=o3_nav&&document.layers?true:false,o3_ns6up=o3_nav&&document.getElementById?true:false,o3_ie4=document.all&&!o3_ns6up?true:false,o3_ie5=false,ieVersion={"8":function(){return document.all&&document.querySelector&&!document.addEventListener?true:false}(),"9":function(){return document.all&&document.querySelector&&document.addEventListener&&!window.atob?true:false}(),"10":function(){return document.all&&document.querySelector&&document.addEventListener&&window.atob?true:false}(),"11+":function(){return!document.all&&document.querySelector&&document.addEventListener&&window.atob&&(window.ActiveXObject||"ActiveXObject"in window)?true:false}()};if(o3_ie4){if(navigator.userAgent.indexOf("MSIE 5")>0)o3_ie5=true;if(o3_ns6up)o3_ns6up=false}if(o3_ns4||o3_ie4||o3_ns6up){document.onmousemove=mouseMove;o3_ns4&&document.captureEvents(Event.MOUSEMOVE)}else{overlib=no_overlib;nd=no_overlib;ver3fix=true}function no_overlib(){return ver3fix}function overlib(){o3_text=ol_text;o3_cap=ol_cap;o3_sticky=ol_sticky;o3_background=ol_background;o3_close=ol_close;o3_hpos=ol_hpos;o3_offsetx=ol_offsetx;o3_offsety=ol_offsety;o3_fgcolor=ol_fgcolor;o3_bgcolor=ol_bgcolor;o3_textcolor=ol_textcolor;o3_capcolor=ol_capcolor;o3_closecolor=ol_closecolor;o3_width=ol_width;o3_border=ol_border;o3_status=ol_status;o3_autostatus=ol_autostatus;o3_height=ol_height;o3_snapx=ol_snapx;o3_snapy=ol_snapy;o3_fixx=ol_fixx;o3_fixy=ol_fixy;o3_fgbackground=ol_fgbackground;o3_bgbackground=ol_bgbackground;o3_padxl=ol_padxl;o3_padxr=ol_padxr;o3_padyt=ol_padyt;o3_padyb=ol_padyb;o3_fullhtml=ol_fullhtml;o3_vpos=ol_vpos;o3_aboveheight=ol_aboveheight;o3_capicon=ol_capicon;o3_textfont=ol_textfont;o3_captionfont=ol_captionfont;o3_closefont=ol_closefont;o3_textsize=ol_textsize;o3_captionsize=ol_captionsize;o3_closesize=ol_closesize;o3_timeout=ol_timeout;o3_function=ol_function;o3_delay=ol_delay;o3_hauto=ol_hauto;o3_vauto=ol_vauto;if(o3_ns4||o3_ie4||o3_ns6up){o3_frame=ol_frame;if(o3_ns4)over=o3_frame.document.overDiv;if(o3_ie4&&!o3_ns6up)over=o3_frame.overDiv.style;if(o3_ns6up)over=o3_frame.document.getElementById("overDiv")}var a=-1,b=arguments;for(i=0;i<b.length;i++)if(a==0){if(b[i]==INARRAY)a=INARRAY;if(b[i]==CAPARRAY)a=CAPARRAY;if(b[i]==STICKY)a=opt_STICKY(b[i]);if(b[i]==BACKGROUND)a=BACKGROUND;if(b[i]==NOCLOSE)a=opt_NOCLOSE(b[i]);if(b[i]==CAPTION)a=CAPTION;if(b[i]==LEFT)a=opt_HPOS(b[i]);if(b[i]==RIGHT)a=opt_HPOS(b[i]);if(b[i]==CENTER)a=opt_HPOS(b[i]);if(b[i]==OFFSETX)a=OFFSETX;if(b[i]==OFFSETY)a=OFFSETY;if(b[i]==FGCOLOR)a=FGCOLOR;if(b[i]==BGCOLOR)a=BGCOLOR;if(b[i]==TEXTCOLOR)a=TEXTCOLOR;if(b[i]==CAPCOLOR)a=CAPCOLOR;if(b[i]==CLOSECOLOR)a=CLOSECOLOR;if(b[i]==WIDTH)a=WIDTH;if(b[i]==BORDER)a=BORDER;if(b[i]==STATUS)a=STATUS;if(b[i]==AUTOSTATUS)a=opt_AUTOSTATUS(b[i]);if(b[i]==AUTOSTATUSCAP)a=opt_AUTOSTATUSCAP(b[i]);if(b[i]==HEIGHT)a=HEIGHT;if(b[i]==CLOSETEXT)a=CLOSETEXT;if(b[i]==SNAPX)a=SNAPX;if(b[i]==SNAPY)a=SNAPY;if(b[i]==FIXX)a=FIXX;if(b[i]==FIXY)a=FIXY;if(b[i]==FGBACKGROUND)a=FGBACKGROUND;if(b[i]==BGBACKGROUND)a=BGBACKGROUND;if(b[i]==PADX)a=PADX;if(b[i]==PADY)a=PADY;if(b[i]==FULLHTML)a=opt_FULLHTML(b[i]);if(b[i]==ABOVE)a=opt_VPOS(b[i]);if(b[i]==BELOW)a=opt_VPOS(b[i]);if(b[i]==CAPICON)a=CAPICON;if(b[i]==TEXTFONT)a=TEXTFONT;if(b[i]==CAPTIONFONT)a=CAPTIONFONT;if(b[i]==CLOSEFONT)a=CLOSEFONT;if(b[i]==TEXTSIZE)a=TEXTSIZE;if(b[i]==CAPTIONSIZE)a=CAPTIONSIZE;if(b[i]==CLOSESIZE)a=CLOSESIZE;if(b[i]==FRAME)a=FRAME;if(b[i]==TIMEOUT)a=TIMEOUT;if(b[i]==FUNCTION)a=FUNCTION;if(b[i]==DELAY)a=DELAY;if(b[i]==HAUTO)a=opt_HAUTO(b[i]);if(b[i]==VAUTO)a=opt_VAUTO(b[i]);if(b[i]==OTHIDEDD)a=OUTTASK_OPT_HIDEDD(b[i])}else if(a<0)if(b[i]==INARRAY)a=INARRAY;else{o3_text=b[i];a=0}else{if(a==INARRAY)a=opt_INARRAY(b[i]);if(a==CAPARRAY)a=opt_CAPARRAY(b[i]);if(a==BACKGROUND)a=opt_BACKGROUND(b[i]);if(a==CAPTION)a=opt_CAPTION(b[i]);if(a==OFFSETX)a=opt_OFFSETX(b[i]);if(a==OFFSETY)a=opt_OFFSETY(b[i]);if(a==FGCOLOR)a=opt_FGCOLOR(b[i]);if(a==BGCOLOR)a=opt_BGCOLOR(b[i]);if(a==TEXTCOLOR)a=opt_TEXTCOLOR(b[i]);if(a==CAPCOLOR)a=opt_CAPCOLOR(b[i]);if(a==CLOSECOLOR)a=opt_CLOSECOLOR(b[i]);if(a==WIDTH)a=opt_WIDTH(b[i]);if(a==BORDER)a=opt_BORDER(b[i]);if(a==STATUS)a=opt_STATUS(b[i]);if(a==HEIGHT)a=opt_HEIGHT(b[i]);if(a==CLOSETEXT)a=opt_CLOSETEXT(b[i]);if(a==SNAPX)a=opt_SNAPX(b[i]);if(a==SNAPY)a=opt_SNAPY(b[i]);if(a==FIXX)a=opt_FIXX(b[i]);if(a==FIXY)a=opt_FIXY(b[i]);if(a==FGBACKGROUND)a=opt_FGBACKGROUND(b[i]);if(a==BGBACKGROUND)a=opt_BGBACKGROUND(b[i]);if(a==PADX2)a=opt_PADX2(b[i]);if(a==PADY2)a=opt_PADY2(b[i]);if(a==PADX)a=opt_PADX(b[i]);if(a==PADY)a=opt_PADY(b[i]);if(a==CAPICON)a=opt_CAPICON(b[i]);if(a==TEXTFONT)a=opt_TEXTFONT(b[i]);if(a==CAPTIONFONT)a=opt_CAPTIONFONT(b[i]);if(a==CLOSEFONT)a=opt_CLOSEFONT(b[i]);if(a==TEXTSIZE)a=opt_TEXTSIZE(b[i]);if(a==CAPTIONSIZE)a=opt_CAPTIONSIZE(b[i]);if(a==CLOSESIZE)a=opt_CLOSESIZE(b[i]);if(a==FRAME)a=opt_FRAME(b[i]);if(a==TIMEOUT)a=opt_TIMEOUT(b[i]);if(a==FUNCTION)a=opt_FUNCTION(b[i]);if(a==DELAY)a=opt_DELAY(b[i])}if(o3_delay==0)return overlib333();else{o3_delayid=setTimeout("overlib333()",o3_delay);return o3_sticky?false:true}}function nd(){if(o3_removecounter>=1)o3_showingsticky=0;if(o3_ns4||o3_ie4||o3_ns6up)if(o3_showingsticky==0){o3_allowmove=0;over!=null&&hideObject(over)}else o3_removecounter++;return true}var ol_PopTarget=null;function ol_SetPopTarget(a){window.ol_PopTarget=a}function popupClosedSetFocus(){window.ol_PopTarget!=null&&window.ol_PopTarget.focus();window.ol_PopTarget=null}function nd_508(){cClick();popupClosedSetFocus()}function overlib333(){var c='BGCOLOR="',b='BACKGROUND="',a;if(o3_background!=""||o3_fullhtml)a=ol_content_background(o3_text,o3_background,o3_fullhtml);else{if(o3_fgbackground!="")o3_fgbackground=b+o3_fgbackground+'"';if(o3_bgbackground!="")o3_bgbackground=b+o3_bgbackground+'"';if(o3_fgcolor!="")o3_fgcolor=c+o3_fgcolor+'"';if(o3_bgcolor!="")o3_bgcolor=c+o3_bgcolor+'"';if(o3_height>0)o3_height="HEIGHT="+o3_height;else o3_height="";if(o3_cap=="")a=ol_content_simple(o3_text);else if(o3_sticky)a=ol_content_caption(o3_text,o3_cap,o3_close);else a=ol_content_caption(o3_text,o3_cap,"")}if(o3_sticky){o3_showingsticky=1;o3_removecounter=0}layerWrite(a);if(o3_autostatus>0){o3_status=o3_text;if(o3_autostatus>1)o3_status=o3_cap}o3_allowmove=0;if(o3_timeout>0){o3_timerid>0&&clearTimeout(o3_timerid);o3_timerid=setTimeout("cClick()",o3_timeout)}disp(o3_status);if(o3_sticky){o3_allowmove=0;return false}else return true}function ol_content_simple(a){txt="<TABLE WIDTH="+o3_width+" BORDER=0 CELLPADDING="+o3_border+" CELLSPACING=0 "+o3_bgcolor+" "+o3_height+"><TR><TD><TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=0 "+o3_fgcolor+" "+o3_fgbackground+" "+o3_height+'><TR><TD VALIGN=TOP><FONT FACE="'+o3_textfont+'" COLOR="'+o3_textcolor+'" SIZE="'+o3_textsize+'">'+a+"</FONT></TD></TR></TABLE></TD></TR></TABLE>";set_background("");return txt}function ol_content_caption(c,b,a){txt="<div class='cnqr-popover'>";txt+="<div class='cnqr-popover-title'>"+b;if(a!="")txt+="<a class='pull-right cnqr-cursor-pointer' role='button' href='javascript:cClick()'><span class='close ui-icon'>x</span>";txt+="</div>";txt+=c;txt+="</div>";set_background("");return txt}function ol_content_background(a,c,b){console.log("ol_content_background(text, picture, hasfullhtml)");if(b)txt=a;else txt="<TABLE WIDTH="+o3_width+" BORDER=0 CELLPADDING=0 CELLSPACING=0 HEIGHT="+o3_height+"><TR><TD COLSPAN=3 HEIGHT="+o3_padyt+"></TD></TR><TR><TD WIDTH="+o3_padxl+"></TD><TD VALIGN=TOP WIDTH="+(o3_width-o3_padxl-o3_padxr)+'><FONT FACE="'+o3_textfont+'" COLOR="'+o3_textcolor+'" SIZE="'+o3_textsize+'">'+a+"</FONT></TD><TD WIDTH="+o3_padxr+"></TD></TR><TR><TD COLSPAN=3 HEIGHT="+o3_padyb+"></TD></TR></TABLE>";set_background(c);return txt}function set_background(a){if(a==""){if(o3_ie4)over.backgroundImage="none";if(o3_ns6up)over.style.backgroundImage="none"}else if(o3_ns4)over.background.src=a;else if(o3_ie4)over.backgroundImage="url("+a+")";else if(o3_ns6up)over.style.backgroundImage="url("+a+")"}function disp(a){if(o3_ns4||o3_ie4||o3_ns6up)if(o3_allowmove==0){placeLayer();showObject(over);o3_allowmove=1}if(a!="")self.status=a}function placeLayer(){var a="undefined",placeX,placeY;if(o3_fixx>-1)placeX=o3_fixx;else{winoffset=o3_ie4?o3_frame.document.body.scrollLeft:o3_frame.pageXOffset;if(o3_ie4)iwidth=o3_frame.document.body.clientWidth;if(o3_ns4)iwidth=o3_frame.innerWidth;if(o3_ns6up)iwidth=o3_frame.outerWidth;if(o3_hauto==1)if(o3_x-winoffset>eval(iwidth)/2)o3_hpos=LEFT;else o3_hpos=RIGHT;if(o3_hpos==CENTER)placeX=o3_x+o3_offsetx-o3_width/2;if(o3_hpos==RIGHT){placeX=o3_x+o3_offsetx;if(eval(placeX)+eval(o3_width)>winoffset+iwidth){placeX=iwidth+winoffset-o3_width;if(placeX<0)placeX=0}}if(o3_hpos==LEFT){placeX=o3_x-o3_offsetx-o3_width;if(placeX<winoffset)placeX=winoffset}if(o3_snapx>1){var snapping=placeX%o3_snapx;if(o3_hpos==LEFT)placeX=placeX-(o3_snapx+snapping);else placeX=placeX+(o3_snapx-snapping);if(placeX<0)placeX=0}if(!o3_ns6up)if(typeof document.body.scrollLeft!=a)placeX+=document.body.scrollLeft}if(o3_fixy>-1)placeY=o3_fixy;else{if(o3_vauto==1){if(o3_ie4)iheight=o3_frame.document.body.clientHeight;if(o3_ns4)iheight=o3_frame.innerHeight;if(o3_ns6up)iheight=o3_frame.outerHeight;iheight=eval(iheight)/2;if(o3_y>iheight)o3_vpos=ABOVE;else o3_vpos=BELOW}if(o3_aboveheight>0&&o3_vpos==ABOVE)placeY=o3_y-(o3_aboveheight+o3_offsety);else placeY=o3_y+o3_offsety;if(o3_snapy>1){var snapping=placeY%o3_snapy;if(o3_aboveheight>0&&o3_vpos==ABOVE)placeY=placeY-(o3_snapy+snapping);else placeY=placeY+(o3_snapy-snapping);if(placeY<0)placeY=0}if(!o3_ns6up&&!ieVersion["9"]&&!ieVersion["10"])if(typeof document.body.scrollTop!=a)placeY+=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}repositionTo(over,placeX,placeY)}function mouseMove(a){if(!a)a=window.event;if(a.pageX){o3_x=a.pageX;o3_y=a.pageY}else if(a.clientX){o3_x=a.clientX;o3_y=a.clientY}else if(a.x&&o3_frame.document.body.scrollLeft){o3_x=a.x+o3_frame.document.body.scrollLeft;o3_y=a.y+o3_frame.document.body.scrollTop}else{o3_x=a.x;o3_y=a.y}o3_allowmove==1&&placeLayer()}function cClick(){hideObject(over);o3_showingsticky=0}function compatibleframe(a){var b="undefined";if(o3_ns4){if(typeof a.document.overDiv==b)return false}else if(o3_ie4){if(typeof a.document.all.overDiv==b)return false}else if(o3_ns6up)if(a.document.getElementById("overDiv")==null)return false;return true}function layerWrite(a){a+="\n";if(o3_ns4){var b=o3_frame.document.overDiv.document;b.write(a);b.close()}else if(o3_ie4)o3_frame.document.all.overDiv.innerHTML=a;else if(o3_ns6up){range=o3_frame.document.createRange();range.setStartBefore(over);domfrag=range.createContextualFragment(a);while(over.hasChildNodes())over.removeChild(over.lastChild);over.appendChild(domfrag)}}function showObject(a){csontos_overlib_hide_select(true);if(o3_ns4)a.visibility="show";else if(o3_ie4)a.visibility="visible";else if(o3_ns6up)a.style.visibility="visible"}function hideObject(a){if(o3_ns4)a.visibility="hide";else if(o3_ie4)a.visibility="hidden";else if(o3_ns6up)a.style.visibility="hidden";o3_timerid>0&&clearTimeout(o3_timerid);o3_delayid>0&&clearTimeout(o3_delayid);o3_timerid=0;o3_delayid=0;self.status="";csontos_overlib_hide_select(false)}function repositionTo(b,c,d){var a="px";if(o3_ns4||o3_ie4){b.left=c+a;b.top=d+a}else if(o3_ns6up){b.style.left=c+a;b.style.top=d+a}}function opt_INARRAY(a){o3_text=ol_texts[a];return 0}function opt_CAPARRAY(a){o3_cap=ol_caps[a];return 0}function opt_STICKY(){o3_sticky=1;return 0}function opt_BACKGROUND(a){o3_background=a;return 0}function opt_NOCLOSE(){o3_close="";return 0}function opt_CAPTION(a){o3_cap=a;return 0}function opt_HPOS(a){o3_hpos=a;return 0}function opt_OFFSETX(a){o3_offsetx=a;return 0}function opt_OFFSETY(a){o3_offsety=a;return 0}function opt_FGCOLOR(a){o3_fgcolor=a;return 0}function opt_BGCOLOR(a){o3_bgcolor=a;return 0}function opt_TEXTCOLOR(a){o3_textcolor=a;return 0}function opt_CAPCOLOR(a){o3_capcolor=a;return 0}function opt_CLOSECOLOR(a){o3_closecolor=a;return 0}function opt_WIDTH(a){o3_width=a;return 0}function opt_BORDER(a){o3_border=a;return 0}function opt_STATUS(a){o3_status=a;return 0}function opt_AUTOSTATUS(){o3_autostatus=1;return 0}function opt_AUTOSTATUSCAP(){o3_autostatus=2;return 0}function opt_HEIGHT(a){o3_height=a;o3_aboveheight=a;return 0}function opt_CLOSETEXT(a){o3_close=a;return 0}function opt_SNAPX(a){o3_snapx=a;return 0}function opt_SNAPY(a){o3_snapy=a;return 0}function opt_FIXX(a){o3_fixx=a;return 0}function opt_FIXY(a){o3_fixy=a;return 0}function opt_FGBACKGROUND(a){o3_fgbackground=a;return 0}function opt_BGBACKGROUND(a){o3_bgbackground=a;return 0}function opt_PADX(a){o3_padxl=a;return PADX2}function opt_PADY(a){o3_padyt=a;return PADY2}function opt_PADX2(a){o3_padxr=a;return 0}function opt_PADY2(a){o3_padyb=a;return 0}function opt_FULLHTML(){o3_fullhtml=1;return 0}function opt_VPOS(a){o3_vpos=a;return 0}function opt_CAPICON(a){o3_capicon=a;return 0}function opt_TEXTFONT(a){o3_textfont=a;return 0}function opt_CAPTIONFONT(a){o3_captionfont=a;return 0}function opt_CLOSEFONT(a){o3_closefont=a;return 0}function opt_TEXTSIZE(a){o3_textsize=a;return 0}function opt_CAPTIONSIZE(a){o3_captionsize=a;return 0}function opt_CLOSESIZE(a){o3_closesize=a;return 0}function opt_FRAME(a){o3_frame=compatibleframe(a)?a:ol_frame;if(o3_ns4||(o3_ie4||o3_ns6up)){if(o3_ns4)over=o3_frame.document.overDiv;if(o3_ie4)over=o3_frame.overDiv.style;if(o3_ns6up)over=o3_frame.document.getElementById("overDiv")}return 0}function opt_TIMEOUT(a){o3_timeout=a;return 0}function opt_FUNCTION(a){o3_text=a();return 0}function opt_DELAY(a){o3_delay=a;return 0}function opt_HAUTO(){if(o3_hauto==0)o3_hauto=1;else o3_hauto=0;return 0}function opt_VAUTO(){if(o3_vauto==0)o3_vauto=1;else o3_vauto=0;return 0}function OUTTASK_OPT_HIDEDD(){if(OT_OPT_HIDEDD==0)OT_OPT_HIDEDD=1;return 0}function vpos_convert(a){if(a==0)a=LEFT;else if(a==1)a=RIGHT;else a=CENTER;return a}function dts(b,a){o3_hpos=vpos_convert(b);overlib(a,o3_hpos,CAPTION,"")}function dtc(c,b,a){o3_hpos=vpos_convert(c);overlib(b,CAPTION,a,o3_hpos)}function stc(c,b,a){o3_hpos=vpos_convert(c);overlib(b,CAPTION,a,o3_hpos,STICKY)}function drs(a){dts(1,a)}function drc(b,a){dtc(1,b,a)}function src(b,a){stc(1,b,a)}function dls(a){dts(0,a)}function dlc(b,a){dtc(0,b,a)}function slc(b,a){stc(0,b,a)}function dcs(a){dts(2,a)}function dcc(b,a){dtc(2,b,a)}function scc(b,a){stc(2,b,a)}var gOverlibMaxNumDropdownsToHide=30;function csontos_overlib_hide_select(d){var e=document.all&&!window.XMLHttpRequest;if(OT_OPT_HIDEDD&&e){var c=document.all.tags||document.getElementsByTagName;if(c){var a=c("select"),b=a.length>gOverlibMaxNumDropdownsToHide?gOverlibMaxNumDropdownsToHide:a.length;if(b==1)a[0].style.visibility=d?"hidden":"visible";if(b>1)for(i=0;i<b;i++)a[i].style.visibility=d?"hidden":"visible"}}};

//FileName: /javascript/time.js
function LookupDayOfWeek(c,b){var a;if(b)a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];else a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return OTGetUserMessage("DateTime",a[c])}function LookupMonth(c,b){var a;if(b)a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];else a=["January","February","March","April","May","June","July","August","September","October","November","December"];return OTGetUserMessage("DateTime",a[c])}function GetMilitaryTime(d,c){var b=0,a=parseInt(d,10);if(c&&(c.toUpperCase()=="AM"||c.toUpperCase()=="A"))b=a==12?0:a;else if(a==12)b=a;else b=a+12;return b}function GetTimePeriod(a){return window.gShortTimePeriod?a<12?"A":"P":a<12?"AM":"PM"}function GetTimePeriodIndex(a){return a<12?0:1}function GetNonMilitaryHour(c){var a=parseInt(c,10),b=1;if(a>12)b=a-12;else if(a==0)b=12;else b=a;return b}function DB10CharDateToJSDate(b){var a=b.split("/");return new Date(a[2],a[0]-1,a[1])}function JSDateToDB10CharDate(a){var c=a.getMonth()+1,d=a.getFullYear(),b=a.getDate();c=JSPadOut(c);b=JSPadOut(b);return c+"/"+b+"/"+d}function getDateDiffArray(m,n,b){if(typeof b=="undefined")b=false;var k=1e3*60,a=k*60,l=a*24,i=m.valueOf(),j=n.valueOf();if(b==true){var d=m.getTimezoneOffset(),e=n.getTimezoneOffset();if(d!=e)if(d>e)j+=a;else if(d<e)i+=a}var h=j-i,g=Math.floor(Math.abs(h/l)),c=g==0?h:h%(g*l),f=Math.floor(Math.abs(c/a)),o=f==0?c:c%(f*a),p=Math.floor(Math.abs(o/k)),q=[g,f,p];return q}function otDateAdd(h,c,b,a){var d=1e3*60,e=d*60,g=e*24,i=new Date(h);c=c||0;b=b||0;a=a||0;var j=i.valueOf(),f=new Date(j+parseInt(c,10)*g+b*e+parseInt(a,10)*d);return f}function Y2kYear(b){var a=parseInt(b,10);return a<30?a+2e3:a>=30&&a<100?a+1900:a}function JSGetDayMonthYearFromStr(d){var e,c=d.replace(/-|\.|\//g,"-"),b=c.split("-"),a=window.userDatePreference||0;if(a==OT_DateFormat_MDY_slash||a==OT_DateFormat_MDY_hyphen||a==OT_DateFormat_MDY_dot){myMonth=b[0];myDay=b[1];myYear=b[2]}else if(a==OT_DateFormat_DMY_slash||a==OT_DateFormat_DMY_hyphen||a==OT_DateFormat_DMY_dot){myDay=b[0];myMonth=b[1];myYear=b[2]}else if(a==OT_DateFormat_YMD_slash||a==OT_DateFormat_YMD_hyphen||a==OT_DateFormat_YMD_dot){myYear=b[0];myMonth=b[1];myDay=b[2]}return[myDay,myMonth,myYear]}function JSUnformatDate(h,c,b){var d="undefined",j,f,e,g,a=JSGetDayMonthYearFromStr(h);if(typeof c==d)c=0;if(typeof b==d)b=0;g=a[0];e=a[1];f=a[2];var i=new Date(Y2kYear(f),e-1,g,c,b);return i}function JSFormatDate(d,b,a){var g=".",f="-",e="/";if(arguments.length==1&&typeof arguments[0]=="object"){b=arguments[0].getMonth()+1;a=arguments[0].getDate();d=arguments[0].getFullYear()}b=JSPadOut(b);a=JSPadOut(a);var h,c;h=window.userDatePreference||0;switch(h){case OT_DateFormat_MDY_slash:c=b+e+a+e+d;break;case OT_DateFormat_MDY_hyphen:c=b+f+a+f+d;break;case OT_DateFormat_MDY_dot:c=b+g+a+g+d;break;case OT_DateFormat_DMY_slash:c=a+e+b+e+d;break;case OT_DateFormat_DMY_dot:c=a+g+b+g+d;break;case OT_DateFormat_DMY_hyphen:c=a+f+b+f+d;break;case OT_DateFormat_YMD_slash:c=d+e+b+e+a;break;case OT_DateFormat_YMD_dot:c=d+g+b+g+a;break;case OT_DateFormat_YMD_hyphen:c=d+f+b+f+a;break;default:c=b+e+a+e+d}return c}function OT_FormatDate(a){if(!a)return"";if(a.constructor==String)a=new Date(a.replace(/-/g,"/"));return JSFormatDate(a)}function formatVBDate(a,c){var b=JSPadOut(a.getMonth()+1)+"/"+JSPadOut(a.getDate())+"/"+a.getFullYear();if(c)b+=" "+JSPadOut(a.getHours())+":"+JSPadOut(a.getMinutes());return b}function formatIsoDate(a,c){var b=a.getFullYear()+"-"+JSPadOut(a.getMonth()+1)+"-"+JSPadOut(a.getDate());if(c)b+=" "+JSPadOut(a.getHours())+":"+JSPadOut(a.getMinutes());return b}function formatMonthDay(a,c){var b=a.getMonth(),e=a.getDay();if(OTLangID=="ja")return LookupMonth(b,true)+a.getDate()+OTGetUserMessage("DateTime","day");var d=window.userDatePreference||0;switch(d){case OT_DateFormat_MDY_slash:case OT_DateFormat_MDY_hyphen:case OT_DateFormat_MDY_dot:case OT_DateFormat_YMD_slash:case OT_DateFormat_YMD_hyphen:case OT_DateFormat_YMD_dot:return LookupMonth(b,true)+" "+(c?JSPadOut(a.getDate()):a.getDate());default:return a.getDate()+" "+LookupMonth(b,true)}}function formatDayOfWeekMonthDay(a){var b="",c=LookupDayOfWeek(a.getDay(),true);if(OTLangID=="ja")b+=formatMonthDay(a)+c;else b+=c+",&nbsp;"+formatMonthDay(a);return b}function jsFormatTime(f,h,d,c,b,e,a,g){if(c==null)if(window.userTimePreference!=null)c=window.userTimePreference;else c=0;b=b==null?prefUserHasMilitaryTime():b;e=e&&parseInt(f)<10&&(d&&(d.toUpperCase()=="AM"||d.toUpperCase()=="A"))?"&nbsp;&nbsp;":"";a=typeof a=="undefined"?" ":a;return jsFormatTimeEx(f,h,0,d,c,b,a,e,g)}function jsFormatTimeEx(c,p,e,a,o,m,n,d,l){var i,h,g,f,j,k,b;g=JSPadOut(c);h=d+String(c);i=d+GetMilitaryTime(c,a);f=getTimeSeparator(o);j=JSPadOut(p);a=l?String(a).toUpperCase():String(a).toLowerCase();b="DisplayTime_"+(m?"24H":"12H");if(e){b=b+"WithSeconds";k=JSPadOut(e)}return window.OTFormatUserMessage("DateTime",b,i,h,g,f,j,k,a,n)}function getTimeSeparator(b){var a=":";if(b==null&&window.userTimePreference!=null)b=window.userTimePreference;switch(parseInt(b,10)){case 0:a=":";break;case 1:a=".";break;case 2:a=",";break;default:a=":"}return a}function prefUserHasMilitaryTime(){var a=window.userMilitaryTime;return!(a=="False"||a==0||a==false)}function JSLocalizeTime(b,k,j,h,i,c){if(c==null)c=true;var f,d,l,a,g,e="";if(b.toLocaleTimeString){a=b.getHours();b=a+":"+b.getMinutes()}d=b.split(":");a=parseInt(d[0],10);g=parseInt(d[1],10);e=GetTimePeriod(a);if(prefUserHasMilitaryTime()&&a.toString()=="0")a=0;else a=GetNonMilitaryHour(a);f=jsFormatTime(a,g,e,k,j,i,c?" ":"",!h);return f}function OT_FormatTime(a){if(!a)return"";if(a.constructor==String)a=new Date(a.replace(/-/g,"/"));return JSLocalizeTime(a)}function OT_FormatDateTime(a){return!a?"":OT_FormatDate(a)+" "+OT_FormatTime(a)}function JSDateAdd(f,d,b){var e=b.getDate(),a=b.getMonth(),c=b.getFullYear();switch(f){case"d":e=e+d;break;case"m":a=a+d;break;case"y":c=c+d}return new Date(c,a,e)}function compareDateFieldsAndAdd(g,h,e,a){var d="keypress",c="function";if(e.value=="")return;if(checkDate(e,"")){var f=new Date(longYear,parseInt(userMonth,10)-1,userDay),b=JSDateAdd(g,h,f);if(a.value==""){a.value=JSFormatDate(b.getFullYear(),b.getMonth()+1,b.getDate());typeof triggerEvent==c&&triggerEvent(document.getElementById(a.id),d)}else if(checkDate(a,"")){var i=new Date(longYear,parseInt(userMonth,10)-1,userDay);if(i.getTime()>=f.getTime())return;else{a.value=JSFormatDate(b.getFullYear(),b.getMonth()+1,b.getDate());typeof triggerEvent==c&&triggerEvent(document.getElementById(a.id),d)}}}}function formatMinutes(h,e,b){var f="datetime",g=parseInt(h/60,10),d=parseInt(h%60,10),c="",a="",i={};b=typeof b==="boolean"?b:true;e=typeof e==="boolean"?e:false;if(g>0){c=g;if(b)c+=" "+OTGetUserMessage(f,g==1?"hour":"hours");if(d>0){a=d;if(b)a+=" "+OTGetUserMessage(f,d==1?"minute":"minutes")}}else{a=d;if(b)a+=" "+OTGetUserMessage(f,d==1?"minute":"minutes")}return e?{hours:c,mins:a}:!a?c:!c?a:c+" "+a};

//FileName: /javascript/ddmagic.js
sortitems=1;function BumpUp(b){for(var c=0,a=0;a<b.options.length;a++){while(a<b.length&&b.options[a].value==""){c++;a++}b.options[a-c].selected=false;if(c&&a!=b.length){b.options[a-c].value=b.options[a].value;b.options[a-c].text=b.options[a].text}}b.length-=c}function selectItemByValue(b,c){for(var a=0;a<b.options.length;a++)if(b.options[a].value==c){b.selectedIndex=a;return}}function moveUp(b){for(var a=1;a<b.options.length;a++)if(b.options[a].selected&&a!=-1){var c=b.options[a-1].selected,d=b.options[a].value,f=b.options[a].text,e=b.options[a-1].value,g=b.options[a-1].text;b.options[a-1].value=d;b.options[a-1].text=f;b.options[a].value=e;b.options[a].text=g;b.options[a-1].selected=true;b.options[a].selected=c}}function moveDown(b){for(var a=b.options.length-2;a>=0;a--)if(b.options[a].selected&&a!=-1){var c=b.options[a+1].selected,d=b.options[a].value,f=b.options[a].text,e=b.options[a+1].value,g=b.options[a+1].text;b.options[a+1].value=d;b.options[a+1].text=f;b.options[a].value=e;b.options[a].text=g;b.options[a+1].selected=true;b.options[a].selected=c}}function SortD(e){for(var a=[],f={},g=0;g<e.options.length;g++)a[g]=e.options[g];for(var b=0;b<a.length-1;b++)for(var c=b+1;c<a.length;c++)if(a[b].text>a[c].text){f=a[b].text;a[b].text=a[c].text;a[c].text=f;f=a[b].value;a[b].value=a[c].value;a[c].value=f}for(var d=0;d<e.options.length;d++){e.options[d].value=a[d].value;e.options[d].text=a[d].text}}function copySingle(a,b){var c=false,d=c,g,h;if(a.selectedIndex!=-1){d=c;g=a.options[a.selectedIndex].value;for(var f=0;f<b.options.length;f++){h=b.options[f].value;if(g==h){d=true;break}}if(d==c){var e=new Option;e.value=a.options[a.selectedIndex].value;e.text=a.options[a.selectedIndex].text;b.options[b.options.length]=e;a.options[a.selectedIndex].selected=c}sortitems&&SortD(b)}}function copy(b,c){var d=false;for(var f=d,h,i,a=0;a<b.options.length;a++)if(b.options[a].selected&&b.options[a].value!=""){f=d;h=b.options[a].value;for(var e=0;e<c.options.length;e++){i=c.options[e].value;if(b.options[a].value==c.options[e].value){f=true;break}}if(f==d){var g=new Option;g.value=b.options[a].value;g.text=b.options[a].text;c.options[c.options.length]=g;b.options[a].selected=d}}sortitems&&SortD(c)}function remove(a){for(var b=0;b<a.options.length;b++)if(a.options[b].selected){a.options[b].value="";a.options[b].text=""}BumpUp(a)}function removeSingle(a,b){if(a.options.length>0){if(b===0||b!=""){a.options[b].value="";a.options[b].text=""}else if(a.options.selectedIndex!=-1){a.options[a.selectedIndex].value="";a.options[a.selectedIndex].text=""}BumpUp(a)}}function removeUnselected(a){for(var b=0;b<a.options.length;b++)if(!a.options[b].selected){a.options[b].value="";a.options[b].text=""}BumpUp(a)}function move(a,c){for(var b=0;b<a.options.length;b++)if(a.options[b].selected&&a.options[b].value!=""){var d=new Option;d.value=a.options[b].value;d.text=a.options[b].text;c.options[c.options.length]=d;a.options[b].value="";a.options[b].text=""}BumpUp(a);sortitems&&SortD(c)}function moveAll(a,c){for(var b=0;b<a.options.length;b++)if(a.options[b].value!=""){var d=new Option;d.value=a.options[b].value;d.text=a.options[b].text;c.options[c.options.length]=d}a.length=0;sortitems&&SortD(c)}function copyAll(d,e,f){for(var c=0;c<d.options.length;c++){var a=d.options[c];if(a.value!=""){var b=new Option;b.value=a.value;b.text=a.text;if(f&&a.selected)b.selected=true;e.options[e.options.length]=b}}}function limitSelection(a,b){for(var d=[],f=0,c=0;c<a.length;c++)if(a.options[c].selected==true){for(var g=0;g<=b-1;g++)if(d[g]==c)break;else d[f]=c;f++;if(f==b+1){var e="Choices are limited to the first "+b+" selections.\n\n";e+='Press "OK" to trim your selection to '+b+'  options. Otherwise press "Cancel" and be sure ';e+=" that you have only "+b+" options\nselected before continuing.";if(!confirm(e)){for(var h=0;h<a.options.length;h++)a.options[h].selected=false;a.options[0].selected=true;return}else{for(var i=0;i<a.options.length;i++)a.options[i].selected=false;for(var j=0;j<d.length-1;j++)a.options[d[j]].selected=true;return}}}}function makeSelectedFromString(c,f,g){var b=true;for(var d=false,a=0;a<c.options.length;a++){var e=c.options[a].value;if(g){if(e.toLowerCase().indexOf(f.toLowerCase())==0){c.options[a].selected=b;d=b;break}}else if(e.toLowerCase().indexOf(f.toLowerCase())>=0){c.options[a].selected=b;d=b;break}}return d}function setSelectedFromStringWithEqualityCheck(b,e){for(var c=false,a=0;a<b.options.length;a++){var d=b.options[a].value;if(d.toLowerCase()==e.toLowerCase()){b.options[a].selected=true;c=true;break}}return c}function addOption(b,d,c){var a=new Option;a.value=d;a.text=c;a.selected=true;b.options[b.options.length]=a};

//FileName: /javascript/travel/travel_constants.js
var cTripRoundTrip=0,cTripMultiSeg=1,cTripOneWay=2,cTripNoAir=3,cTripOpenReturn=4,cTripTypeAir="A",cTripTypeCar="C",cTripTypeRail="R",cAirportOnly="A",cAirportPrefer="B",cAirportAny="C",cShopFare=0,cShopFlight=1,cShopMultiFares=5,cRuleAutoSucceed=100,OTRuleDoNotDisplay=50,OTRuleLogOnly=4,OTRuleNotifyManager=3,OTRuleManagerApproval=2,OTRuleNoneBroken=0,cNewRuleAllow=0,cNewRuleNotForLLF=5,cNewRuleLogForReportsOnly=10,cNewRuleNotifyManager=20,cNewRuleRequiresPassiveApproval=25,cNewRuleRequiresApproval=30,cNewRuleAutoFail=40,cNewRuleDoNotDisplay=50,cNewRuleAutoSucceed=100,newRuleConstants=true;if(newRuleConstants){OTRuleDoNotDisplay=cNewRuleDoNotDisplay;OTRuleLogOnly=cNewRuleLogForReportsOnly;OTRuleNotifyManager=cNewRuleNotifyManager;OTRuleManagerApproval=cNewRuleRequiresApproval}var cGDSFarechase="Farechase",cGDSApollo="Apollo",cGDSSabre="Sabre",cGDSAbacus="Abacus",cGDSWorldspan="Worldspan",cGDSGalileo="Galileo",cGDSAmadeus="Amadeus",cGDSAlternate="othergds",cGDSTravelFusion="TravelFusion",cGDSIta="Ita",cGDSG2="G2",cGDSAnyGds="gds",cGDSNavitaire="Navitaire",cGDSNewSkies="NewSkies",cGDSVirginBlue="VirginBlue",cGDSAirCanada="AirCanada",cGDSDeutscheBahn="DeutscheBahn",cGDSBIBE="BIBE",cGDSSNCF="SNCF",cGDSRail1="Rail1",cGDSHRS="HRS",cGDSCNG="CNG",cGDSNonGds="NonGds",cGDSAssemblyPost="AssemblyPost",cGDSDatabase="Database",cGDSHARP="HARP",cGDSInterjet="Interjet",cGDSVolaris="Volaris",cGDSAerLingus="AerLingus",cGDSHertz="Hertz",cGDSSixt="Sixt",cGDSAlamoNational="AlamoNational",cGDSEnterprise="Enterprise",cGDSSouthwest="Southwest",cGDSAmtrak="Amtrak",cGDSPegasus="Pegasus",cGDSHilton="HILTON",cGDSHotelDE="HotelDe",cGDSHRS="HRS",cGDSAHH="AmexHotelHub",cGDSTrainline="Trainline",cGDSCleartrip="Cleartrip",cGDSHotelService="HotelService",cGDSAOT="AOT",cGDSSilverRail="SilverRail",cVendorCodeEnterprise="ET",cVendorCodeEasyJet="U2",cVendorCodeGermanWings="4U",cVendorCodeRyanAir="FR",cVendorCodeGoAir="G8",cVendorCodeIndigo="6E",cVendorCodeSpiceJet="SG",cRailCarrierAmtrak="2V",cRailCarrierDeutscheBahn="2A",cRailCarrierEurostar="9F",cRailCarrierRail1="Z1",cRailCarrierThalys="2H",cRailCarrierSBB="0Z",cRailCarrierSNCF="2C",cRailCarrierUKRail="Z0",cRailCarrierVIARail="2R",cRailCarrierSilverRail="2D",cRailCarrierRenfe="1A",cRailCarrierSwedishRail="1B",cRailDCCarriers=cRailCarrierAmtrak+","+cRailCarrierDeutscheBahn+","+cRailCarrierSNCF+","+cRailCarrierUKRail+","+cRailCarrierSilverRail+","+cRailCarrierRenfe+","+cRailCarrierSwedishRail,cRailCarriers=cRailDCCarriers+","+cRailCarrierEurostar+","+cRailCarrierVIARail+","+cRailCarrierRail1+","+cRailCarrierThalys+","+cRailCarrierSBB,cRailTypeAmtrak="2V",cRailTypeDeutscheBahn="2A",cRailTypeEurostar="9F",cRailTypeEvolvi="Z0",cRailTypeRail1="R1",cRailTypeSNCF="2C",cRailTypeTrainline="Z0",cRailTypeVIARail="2R",cRailTypeSilverRail="2D";function GetGDSID(b){var a=0;switch(b){case cGDSFarechase:a=8;break;case cGDSSabre:a=4;break;case cGDSApollo:a=1;break;case cGDSGalileo:a=2;break;case cGDSWorldspan:a=16;break;case cGDSAmadeus:a=32;break;case cGDSAlternate:a=64;break;case cGDSIta:a=128;break;case cGDSG2:a=256;break;case cGDSNavitaire:a=512;break;case cGDSNewSkies:a=1024;break;case cGDSVirginBlue:a=2048;break;case cGDSAirCanada:a=4096;break;case cGDSDeutscheBahn:a=8192;break;case cGDSSNCF:a=16384;break;case cGDSRail1:a=32768;break;case cGDSTravelFusion:a=64;break;case cGDSNonGds:a=64;break;case cGDSPegasus:a=131072;break;case cGDSAssemblyPost:a=536870912;break;case cGDSDatabase:a=1073741824;break;default:a=0}return a}var cHotelAmenityDataPort=1,cHotelAmenityPool=2,cHotelAmenityPoolOutdoor=4,cHotelAmenityPoolIndoor=8,cHotelAmenityBreakfast=16,cHotelAmenityDining=32,cHotelAmenityNonSmoking=64,cHotelAmenityPetsAllowed=128,cHotelAmenityWheelchair=256,cHotelAmenityKidsFacility=512,cHotelAmenityBusinessCenter=2048,cHotelAmenityConventionCenter=4096,cHotelAmenityMeetingFacility=8192,cHotelAmenityFitnessCenter=16384,cHotelAmenityTennis=32768,cHotelAmenityGolf=65536,cHotelAmenityGameFacility=131072,cHotelAmenityDryCleaning=262144,cHotelAmenityArray=[1,2,4,8,16,32,64,128,256,512,2048,4096,8192,16384,32768,65536,131072,262144];function LookupHotelAmenityName(b){var a="";switch(b){case cHotelAmenityDataPort:a="Dataport";break;case cHotelAmenityPool:a="SwimmingPool";break;case cHotelAmenityPoolOutdoor:a="IndoorPool";break;case cHotelAmenityPoolIndoor:a="OutdoorPool";break;case cHotelAmenityBreakfast:a="breakfast";break;case cHotelAmenityDining:a="dining";break;case cHotelAmenityNonSmoking:a="NonSmokingRoom";break;case cHotelAmenityPetsAllowed:a="petsallowed";break;case cHotelAmenityWheelchair:a="wheelchair";break;case cHotelAmenityKidsFacility:a="kidsfacility";break;case cHotelAmenityBusinessCenter:a="businesscenter";break;case cHotelAmenityConventionCenter:a="conventioncenter";break;case cHotelAmenityMeetingFacility:a="meetingfacility";break;case cHotelAmenityFitnessCenter:a="fitnesscenter";break;case cHotelAmenityTennis:a="tennis";break;case cHotelAmenityGolf:a="golf";break;case cHotelAmenityGameFacility:a="gamefacility";break;case cHotelAmenityDryCleaning:a="drycleaning";break;default:a=""}return OTGetUserMessage("TravelAvailabilityJS",a)}var cFlexFare_Australia=1,cFlexFare_Canada=8,cFlexFare_India=16,cFlexFare_Nordics=32,cLimoTypeGT3="GT3",cLimoTypeRidecharge="RC";function isNonIataTrainline(a){return a&&a.substr(0,10)=="Trainline-"}function isNonIataSNCF(a){return a&&a.substr(0,5)=="SNCF-"}function isNonIataAmtrak(a){return a&&a.substr(0,7)=="Amtrak-"}function isNonIataSilverRail(a){return a&&a.substr(0,11)=="SilverRail-"}function decodeNonIataCarrier(a){return isNonIataTrainline(a)?"Z0":isNonIataSNCF(a)?"2C":isNonIataAmtrak(a)?"2V":isNonIataSilverRail(a)?"2D":a}function isRailCarrier(a){return cRailCarriers.indexOf(decodeNonIataCarrier(a))>=0}function isRailDCCarrier(a){return cRailDCCarriers.indexOf(decodeNonIataCarrier(a))>=0}function isRailDCSourceName(a){a=a.toLowerCase();return a==cGDSDeutscheBahn.toLowerCase()||a==cGDSSNCF.toLowerCase()||a==cGDSAmtrak.toLowerCase()||a==cGDSTrainline.toLowerCase()||a==cGDSBIBE.toLowerCase()||a==cGDSSilverRail.toLowerCase()};

//FileName: /javascript/tripfuncs.js
if(!window.CNQR)window.CNQR={};if(!window.CNQR.menu)window.CNQR.menu={};function swapLabelText(b,d,c){for(var a=b.length-1;a>=0;a--)if(b[a].innerHTML==d)b[a].innerHTML=c}function viewEvent(d,a,e,c,b){return viewEventEx(d,a,e,c,b,"")}function viewEventEx(c,b,f,i,m,l){var h="/travelwizard/wizard_processing.asp?nextpage=",k="&tripid=",j="/rejected.asp?transactionid=",e=returnNewTripWindowArray(),p=e.oLeft,q=e.oTop,n=e.winHeight,o=e.winWidth,d;if(i==true)d="&nosubmit=1";else d="";var g;if(m==false)g=false;else g=true;var a;if(c=="rejected")a=j+b+d;else if(c=="rejected2")a=j+b+d+k+l;else if(c=="request")a="/request_view.asp?transactionid="+b+d+k+l;else if(c=="aeTM")a="/agentTool-XA/AgentTool_ViewItinerary.asp?aeTM=y&cls=1&itinLocator="+b+"&"+i;else if(c=="aeTM2")a="/agentTool-OpenAgent/AgentTool_ViewItinerary.asp?aeTM=y&cls=1&itinLocator="+b+"&"+i;else if(c=="taNum")a=h+escape("/travelwizard/twItinView.asp?taNum="+b.ta+"&tmid="+b.tmid+d);else if(c=="tmDoc")a="/twPopup/TravelManagerDocumentSummary.asp?taNum="+b.ta+"&vcNum="+b.vc+"&tmid="+b.tmid+"&MenuClicked="+f;else if(c=="tmHelp")a="/twPopup/TravelManagerHelp.asp?helpType="+f;else if(c=="approval")a="/approval.asp?tripId="+b+"&io=1&transactiontype=1"+f;else if(c=="itin"&&f=="itinServicesItin")a=h+escape("/travel/popup_itinerary_detail_IT.asp?tripId="+b);else a=h+escape("/travelwizard/twItinView.asp?sid="+b+d);if(g==true){var s=window.open(a,"","width="+o+",height="+n+",status=no,resizable=yes,scrollbars=yes,left="+p+",top="+q+",screenX=3,screenY=3");SetCookie("winOpen","open");if(c!="itinView")var r=window.setInterval("refreshPage()",500)}else{a=a+"&showback=1";document.location.href=a}}function getChangeTripOverlib(e,f){var d="</a></li>",c="ChangeTripAddCarOrHotel",b="TripFuncsJs",a="<li class='cnqr-list-group-item'><a role=button href=\"javascript:newTravel_onclick('/TravelWizard/twShowTrip.asp?type=edit&tid=";return f?a+e+"')\">"+OTGetUserMessage(b,c)+d:a+e+"')\">"+OTGetUserMessage(b,c)+d}function getItineraryWizardOverlib(a){return"<li class='cnqr-list-group-item'><a role=button href=\"javascript:newTravel_onclick('/TravelWizard/twItineraryWizard.asp?type=edit&tid="+a+"')\">"+OTGetUserMessage("TripFuncsJs","ItineraryWizard")+"</a></li>"}function getChangeTripActMnu(a){return"javascript:newTravel_onclick('/TravelWizard/twShowTrip.asp?type=edit&tid="+a+"')"}function getItineraryWizardActMnu(a){return"javascript:newTravel_onclick('/TravelWizard/twItineraryWizard.asp?type=edit&tid="+a+"')"}function set508Focus(c){var b="actiontitle",a="overDiv";if($(a).style.visibility=="visible")if(c==true)$(a).down("a").focus();else{$(a).focus();if($(b))$(b).innerHTML=$(b).innerHTML+" "}}function CancelVirtualItinerary(f,j,d,c,g,i,h,b){if(!confirm(OTGetUserMessage("TripFuncsJs","DeleteVirtualItinerary")))return;var e="/Javascript/Service/CancelVirtualItinerary.asp",a={};a.CompanyId=f;a.UserId=j;a.TransientId=d;a.itinLocator=c;a.startDate=g;a.endDate=i;a.tripName=h;a.tripDescription=b;new Ajax.Request(e,{method:"post",parameters:a,onComplete:CancelVirtualItinerarySuccess,onFailure:CancelVirtualItineraryFailure})}function CancelVirtualItinerarySuccess(){location.reload()}function CancelVirtualItineraryFailure(){alert(OTGetUserMessage("TripFuncsJs","CancelVirtualItineraryFailure"))}function tripDefaultAction(u,s,b,z,p,v,g,y,t,x,h,r,q,m,n,i){var d="itin",a=false,c=true,f=c;if(n)f=a;var l,j,e,k;if(f&&g!="undefined"&&g!=""){l=new Date;j=l.valueOf();e=new Date(g);e.getFullYear()<1950&&e.setFullYear(e.getFullYear()+100);k=e.valueOf();if(k<=j)f=a}switch(p){case"travelManagerAuth":viewEvent("tmDoc",{ta:h,vc:m,tmid:i},"Authorization");break;case"travelManagerVch":viewEvent("tmDoc",{ta:h,vc:m,tmid:i},"Voucher");break;case"travelManagerApprove":open_link("/TravelManagerFrame.asp?MenuClicked=Approval&MenuItem=Linked&t="+h+"&tmid="+i+"");break;case"openagent":open_link("/AgentTool-OpenAgent/AgentTool_ViewItinerary.asp?itinlocator="+b+"&sid="+bookForID+"");break;case"noaction":viewEvent(d,b,"",c,a);break;case"taxi":var o=b.split("_");viewEvent(d,o[1],"",c,a);break;case"taxi2":case"panama":case"tripit":case"travelsupplier":case"approvalwait":case"agency":viewEvent(d,b,"",c,a);break;case"orphan":case"panamaeditable":case"tripiteditable":case"travelsuppliereditable":case"agencyeditable":case d:default:if(f)newTravel_onclick("/TravelWizard/twShowTrip.asp?type=edit&tid="+b+"");else viewEvent(d,b,"",c,a)}}function actionOverlib2(l,k,b,L,Fb,Nb,Jb,Lb,Z,r,o,Ib,Y,u,Hb,p,U){var mb="keypress",J="overDiv",lb="CancelEntireTrip",Db="CreateTemplate",kb="HideTripItTrip",Cb="<li class='cnqr-list-group-item'><a role=button href=\"javascript:OpenAgentCancelTrip('",jb="', '",S="ChangeTripAddCarOrHotel",Bb="openagentpassive",I="EmailItinerary",R="<li class='cnqr-list-group-item'><a role=button href=\"javascript:MailItinerary('",ib="','itinServicesItin')\">",Ab="ViewLinkedItins",zb="<li class='cnqr-list-group-item'><a role=button href=\"javascript:viewEvent('taNum',{ta:'",yb="'},'Voucher')\">",xb="',vc:'',tmid:'",hb="&tmid=",wb="ViewAuthorization",gb="'},'Authorization')\">",H="',tmid:'",G="',vc:'",F="<li class='cnqr-list-group-item'><a role=button href=\"javascript:viewEvent('tmDoc',{ta:'",fb="DocumentActions",Q="CancelReservation",P="ViewReservation",z='">',O="<li class='cnqr-list-group-item'><a role=button href=\"",vb="','itinServicesItin')",ub="','',true)",tb="','',true)\">",eb="&sAction=cancel', 'ApprovalWin')",db="ShareTrip",cb="',0,1,1,0,0)\">",bb="',1,0,1,0,0)\">",y="CloneTrip",ab="',1,0,1,0,1)\">",q="<li class='cnqr-list-group-item'><a role=button href=\"javascript:CloneShareTrip2('",N="CancelTrip",M="&sAction=cancel', 'ApprovalWin')\">",s="')",x="javascript:viewEvent('itin','",sb="', 'ApprovalWin')",E="javascript:open_window('/request_view.asp?transactionid=",j="ViewItinerary",i="')\">",w="<li class='cnqr-list-group-item'><a role=button href=\"javascript:viewEvent('itin','",d="</a></li>",D="ViewRequest",rb="', 'ApprovalWin')\">",n="&tripID=",m="&type=",C="<li class='cnqr-list-group-item'><a role=button href=\"javascript:open_window('/request_view.asp?transactionid=",e=false,h=true,a="TripFuncsJs",t=OTGetUserMessage(a,"TripActions");if(document.getElementById){var nb,Eb,K,qb,g,A,v,W,B;g=h;A=e;v=e;B=e;if(Hb)g=e;W=Jb;if(W!="undefined"||W!=""){nb=new Date;Eb=nb.valueOf();nb.getFullYear();K=new Date(W);K.getFullYear()<1950&&K.setFullYear(K.getFullYear()+100);qb=K.valueOf();if(qb<=Eb)g=e}var f=[],c='<ul class="cnqr-list-group">';switch(Fb){case"itin":c+=C+l+m+k+n+b+rb+OTGetUserMessage(a,D)+d;c+=w+b+i+OTGetUserMessage(a,j)+d;f.push([OTGetUserMessage(a,D),E+l+m+k+n+b+sb]);f.push([OTGetUserMessage(a,j),x+b+s]);break;case"orphan":c+="<li class='cnqr-list-group-item'><a role=button href=\"javascript:newTravel_onclick('/TravelWizard/twShowTrip.asp?type=edit&tid="+b+i+OTGetUserMessage(a,"FinishTrip")+d;c+=C+l+m+k+n+b+M+OTGetUserMessage(a,N)+d;if(Z==1){if(Y==1)c+=q+b+ab+OTGetUserMessage(a,y)+d;else c+=q+b+bb+OTGetUserMessage(a,y)+d;c+=q+b+cb+OTGetUserMessage(a,db)+d}f.push([OTGetUserMessage(a,D),"javascript:newTravel_onclick('/TravelWizard/twShowTrip.asp?type=edit&tid="+b+s]);f.push([OTGetUserMessage(a,N),E+l+m+k+n+b+eb]);g=e;break;case"approvalwait":c+=w+b+tb+OTGetUserMessage(a,j)+d;c+=C+l+m+k+n+b+M+OTGetUserMessage(a,N)+d;if(Z==1){if(Y==1)c+=q+b+ab+OTGetUserMessage(a,y)+d;else c+=q+b+bb+OTGetUserMessage(a,y)+d;c+=q+b+cb+OTGetUserMessage(a,db)+d}f.push([OTGetUserMessage(a,j),x+b+ub]);f.push([OTGetUserMessage(a,N),E+l+m+k+n+b+eb]);g=e;break;case"noaction":c+=w+b+tb+OTGetUserMessage(a,j)+d;f.push([OTGetUserMessage(a,j),x+b+ub]);t="Sending trip to agency";g=e;break;case"taxi":var pb=b.split("_"),X=x+pb[1]+vb,T="javascript:taxi_popup_display('/twPopup/taxi_reservation.asp?cancel=1&reservationId="+pb[0]+"&divid="+encodeURIComponent(L)+s;c+=O+X+z+OTGetUserMessage(a,P)+d;c+=O+T+z+OTGetUserMessage(a,Q)+d;f.push([OTGetUserMessage(a,P),X]);f.push([OTGetUserMessage(a,Q),T]);g=e;r=h;break;case"taxi2":var X=x+b+vb,T="javascript:taxi_popup_display('/twPopup/taxi_reservation.asp?cancel=1&itinLocator="+b+"&divid="+encodeURIComponent(L)+s;c+=O+X+z+OTGetUserMessage(a,P)+d;c+=O+T+z+OTGetUserMessage(a,Q)+d;f.push([OTGetUserMessage(a,P),X]);f.push([OTGetUserMessage(a,Q),T]);g=e;r=h;break;case"travelManagerAuth":t=OTGetUserMessage(a,fb);c+=F+o+G+u+H+p+gb+OTGetUserMessage(a,wb)+d;c+="<li class='cnqr-list-group-item'><a role=button href=\"javascript:open_link('/TravelManagerFrame.asp?MenuClicked=Authorization&MenuItem=Linked&t="+o+"&v="+u+hb+p+i+OTGetUserMessage(a,"EditAuthorization")+d;c+=F+o+xb+p+yb+OTGetUserMessage(a,"ViewLinkedVouchers")+d;c+=zb+o+G+u+H+p+"'})\">"+OTGetUserMessage(a,Ab)+d;g=e;r=h;break;case"travelManagerVch":t=OTGetUserMessage(a,fb);c+=F+o+G+u+H+p+yb+OTGetUserMessage(a,"ViewVoucher")+d;c+="<li class='cnqr-list-group-item'><a role=button href=\"javascript:open_link('/TravelManagerFrame.asp?MenuClicked=Voucher&MenuItem=Linked&t="+o+"&v="+u+hb+p+i+OTGetUserMessage(a,"EditVoucher")+d;c+=F+o+xb+p+gb+OTGetUserMessage(a,"ViewLinkedAuths")+d;c+=zb+o+G+u+H+p+"'})\">"+OTGetUserMessage(a,Ab)+d;g=e;r=h;break;case"travelManagerApprove":t=OTGetUserMessage(a,fb);c+="<li class='cnqr-list-group-item'><a role=button href=\"javascript:open_link('/TravelManagerFrame.asp?MenuClicked=Approval&MenuItem=Linked&t="+o+hb+p+i+OTGetUserMessage(a,"ViewApproval")+d;g=e;r=h;if(window.gTripFuncCaptionOverride)t="Document Actions";break;case"travelsuppliereditable":case"agencyeditable":c+=w+b+ib+OTGetUserMessage(a,j)+d;c+=R+b+i+OTGetUserMessage(a,I)+d;B=e;g=e;A=e;r=h;v=h;break;case"panamaeditable":case"tripiteditable":c+=w+b+ib+OTGetUserMessage(a,j)+d;c+=R+b+i+OTGetUserMessage(a,I)+d;B=e;g=e;A=h;r=h;v=h;break;case"panama":case"tripit":case"travelsupplier":case"agency":c+=w+b+ib+OTGetUserMessage(a,j)+d;g=e;r=h;v=h;break;case Bb:case"openagent":c+="<li class='cnqr-list-group-item'><a role=button href=\"/AgentTool-OpenAgent/AgentTool_ViewItinerary.asp?itinlocator="+b+"&sid="+bookForID+z+OTGetUserMessage(a,j)+d;c+=R+b+i+OTGetUserMessage(a,I)+d;c+="<li class='cnqr-list-group-item'><a role=button href=\"/AgentTool-OpenAgent/AgentTool_EditItinerary.asp?itinlocator="+b+"&sid="+bookForID+z+OTGetUserMessage(a,S)+d;if(Fb==Bb){c+="<li class='cnqr-list-group-item'><a role=button href=\"javascript:SavePassiveOpenBooking('"+bookForID+jb+b+i+OTGetUserMessage(a,"ConvertToPassiveSegment")+d;c+=Cb+bookForID+jb+b+i+OTGetUserMessage(a,kb)+"aaa</a></li>"}else c+=Cb+bookForID+jb+b+i+OTGetUserMessage(a,kb)+"bbb</a></li>";B=e;g=e;A=e;v=e;break;default:c+="<li class='cnqr-list-group-item'><a role=button id=\"tripActionFirstlink\" href=\"javascript:viewEvent('itin','"+b+i+OTGetUserMessage(a,j)+d;c+=R+b+i+OTGetUserMessage(a,I)+d;if(g){c+=getChangeTripOverlib(b,e);f.push([OTGetUserMessage(a,S),getChangeTripActMnu(b)]);g=e}c+=C+l+m+k+n+b+rb+OTGetUserMessage(a,D)+d;if(!U)c+="<li class='cnqr-list-group-item'><a role=button href=\"javascript:open_link('/common/processing.asp?nextpage=/traveltemplate/travel_template_create.asp&backpage=/traveltemplate/user_travel_template_view.asp&radCloneType=tripid&tripID="+b+i+OTGetUserMessage(a,Db)+d;if(!U&&Z==1){if(Y==1)c+=q+b+ab+OTGetUserMessage(a,y)+d;else c+=q+b+bb+OTGetUserMessage(a,y)+d;c+=q+b+cb+OTGetUserMessage(a,db)+d}if(Ib)c+=F+o+G+u+H+p+gb+OTGetUserMessage(a,wb)+d;f.push([OTGetUserMessage(a,j),x+b+s]);f.push([OTGetUserMessage(a,I),"javascript:MailItinerary('"+b+s]);f.push([OTGetUserMessage(a,D),E+l+m+k+n+b+sb]);!U&&f.push([OTGetUserMessage(a,Db),"javascript:open_link('/common/processing.asp?nextpage=/traveltemplate/travel_template_create.asp&backpage=/traveltemplate/user_travel_template_view.asp&radCloneType=tripid&tripID="+b+s])}if(B){c+=getItineraryWizardOverlib(b);f.push([OTGetUserMessage(a,"ItineraryWizard"),getItineraryWizardActMnu(b)])}if(g){c+=getChangeTripOverlib(b,e);f.push([OTGetUserMessage(a,S),getChangeTripActMnu(b)])}if(A){c+=getChangeTripOverlib(b,h);f.push([OTGetUserMessage(a,S),getChangeTripActMnu(b)])}if(v)c+="<li class='cnqr-list-group-item'><a role=button href=\"javascript:removeTrip('"+b+i+OTGetUserMessage(a,kb)+"ccc</a></li>";if(!r){var V;if(U)V="<li class='cnqr-list-group-item'><a role=button href=\"javascript:WarnCancelingNonConcurBookings();javascript:open_window('/request_view.asp?transactionid="+l+m+k+n+b+M+OTGetUserMessage(a,lb)+d;else V=C+l+m+k+n+b+M+OTGetUserMessage(a,lb)+d;if(!c.include(V)){c+=V;f.push([OTGetUserMessage(a,lb),E+l+m+k+n+b+eb])}}if(e&&window.otShowPopupHelp){setupActionMenu();otActionMenu.addMenu(f);showActionMenu(L,0)}else{var Gb=bUtil.getObjY(bUtil.getNamedObj(L))+6+Lb;if(CNQR.ConcurAccessible==h){var ob=$(L),Kb=ob.down("a"),Mb=bUtil.getObjX(ob)+ob.getWidth();ol_SetPopTarget(Kb);c+='<li class="cnqr-list-group-item"><button id="actionclose" type="button" onClick="nd_508(); Event.stopObserving(\'overDiv\', \'keypress\', this.handler);">'+OTGetUserMessage("Common","Close")+"</button></li>";c+="</ul>";overlib(c,CAPTION,"&nbsp;"+t,CAPCOLOR,"#ffffff",WIDTH,190,FIXX,Mb,FIXY,Gb,STICKY,NOCLOSE);if(CNQR.ConcurAccessible){setTimeout(set508Focus,100);document.getElementById(J).setAttribute("name",J);Event.observe(J,mb,function(a){if(a.keyCode!=27)return e;else{Event.stopObserving(J,mb,this.handler);nd_508()}})}}else{c+="</ul>";overlib(c,CAPTION,"&nbsp;"+t,CAPCOLOR,"#ffffff",WIDTH,190,OFFSETX,20,FIXY,Gb,STICKY,CLOSETEXT,'<img src="/images/overlib_close.gif" alt="'+OTGetUserMessage("Common","Close")+'" border="0">',TIMEOUT,8e3)}}}else openURL="/travelwizard/wizard_processing.asp?nextpage="+escape("/travelwizard/twItinView.asp?sid="+b+nosubmitstr);return e}function actionOverlib(d,b,j,k,h,e,f,i,c,g,l,a,m){actionOverlib2(d,b,j,k,h,e,f,i,c,g,l,a,0,m,false,null,false)}function actionOverlibTM(d,b,j,k,h,e,f,i,c,g,l,a,m,n){actionOverlib2(d,b,j,k,h,e,f,i,c,g,l,a,0,m,false,n,false)}function actionCloseKeyPress(b){var a;if(window.event)a=window.event.keyCode;else if(b)a=b.which;a==event.KEY_TAB&&set508Focus(true)}var gOverlibLastElementFocused;function checkOverDivKeyPress(b){var a;if(window.event){a=window.event.keyCode;gOverlibLastElementFocused=Event.element(window.event)}else if(b){a=b.which;gOverlibLastElementFocused=Event.element(b)}a==Event.KEY_ESC&&nd_508()}function taxi_popup_display(b){function a(a){otShowPopupDialog(a.responseText,null,{title:"Taxi",modal:1});a.responseText.evalScripts()}CNQR.MessageBox.processing("",{title:"Taxi"});new Ajax.Request(b,{onSuccess:a})}function open_link(a){document.location.href=a}function actionOverlibAgent(f,e,d,o,m,n){var l="ViewItinerary",k="','', true, false)\">",j="<li class='cnqr-list-group-item'><a role=button href=\"javascript:viewEvent('itin','",c="</a></li>",i="ViewRequest",b="TripFuncsJs",h="&tripID=",g="<li class='cnqr-list-group-item'><a role=button href=\"javascript:open_link('/request_view.asp?nosubmit=1&showback=1&transactionid=",t,r,s,q,p=bUtil.getObjY(bUtil.getNamedObj(o))+6+n,a;a="<ul class='cnqr-list-group'>";if(m=="itin"){a+=g+f+"&type="+e+h+d+"')\">"+OTGetUserMessage(b,i)+c;a+=j+d+k+OTGetUserMessage(b,l)+c}else{a+=j+d+k+OTGetUserMessage(b,l)+c;a+=g+f+"&type="+e+h+d+"')\">"+OTGetUserMessage(b,i)+c}a+="</ul>";overlib(a,CAPTION,"&nbsp;Trip Actions",WIDTH,150,OFFSETX,20,FIXY,p,STICKY,OTHIDEDD,CLOSETEXT,'<img src="/images/overlib_close.gif" border="0">',TIMEOUT,3500)}function view_itinerary(a){popupWindow(a,"",780,580,"status=no,resizable=no,scrollbars=yes");SetCookie("winOpen","open");var b=window.setInterval("refreshPage()",500);return}function MailItinerary(c){var a=$(CNQR).IsGateway?380:300;if(OTLangID){var b=OTLangID.toLowerCase();switch(b){case"nl":a=a+15;break;case"de":case"es":case"it":case"pt":case"pt-br":case"fr":a=a+($(CNQR).IsGateway?50:0);break;case"es-la":case"fr-ca":a=a+($(CNQR).IsGateway?60:15)}}var d="/travel/itinerary_mail.asp?tripId="+c;popupWindow(d,"EmailItinerary",400,a,"")}function CloneShareTrip(c,e,d,b,a){CloneShareTrip2(c,e,d,b,a,0)}function CloneShareTrip2(d,g,j,i,b,h){var a="&invitationId=",e="/TravelTemplate/clone_trip_processing.asp?nextpage=/TravelTemplate/travel_template_create.asp?radCloneType=clone&tripID=",c=document.location.hostname,f=document.location.protocol;if(g==1)if(h==1)document.location="https://"+c+e+d+a+b+"&useHttpForNextPage=1";else document.location=f+"//"+c+e+d+a+b+"&useHttpForNextPage=0";else window.open(f+"//"+c+"/twPopup/popup_CloneTrip.asp?book="+g+"&share="+j+"&tripId="+d+"&sessioned="+i+a+b,"CloneShareTrip","width=650,height=450",false)}function removeTrip(a){if(confirm(OTGetUserMessage("TripFuncsJs","HideTripItTripCofirmation"))){WarnCancelingNonConcurBookings();f=document.frmMain;f.action="/common/processing.asp?nextpage="+escape("/services/expenseIntegration/HideTrips.asp")+"&actionname=cancelTripInItinServices&tripId="+escape(a);f.submit()}}function removeOpenBookingTrip(c,a,b){if(!a)a="cancelTripInItinServices";f=document.frmMain;f.action="/common/processing.asp?nextpage="+escape("/services/expenseIntegration/HideTrips.asp")+"&actionname="+escape(a)+"&tripId="+escape(c)+(b?"&fromHome=y":"");f.submit()}function removeMixedBookingTrip(b,a){var c="/request_view.asp?transactionid="+a+"&type=1&tripID="+b+"&sAction=cancel";open_window(c,"ApprovalWin");return false}function hideTrip(b){var a="TripFuncsJs";if(confirm(OTGetUserMessage(a,"HideTripCofirmation")))if(confirm(OTGetUserMessage(a,"HideTripWarning"))){f=document.frmMain;f.action="/common/processing.asp?nextpage="+escape("/services/expenseIntegration/HideTrips.asp")+"&actionname=cancelTripInItinServices&tripId="+escape(b);f.submit()}}function WarnCancelingNonConcurBookings(){alert(OTGetUserMessage("TripFuncsJs","CancelNonConcurBookings"))}function showCancelTripFlyout(d,b,c,a){CNQR.MessageBox.confirm(b,{title:c,onButtonClick:function(b,a){if(a.value){otHidePopupDialog();b()}else otHidePopupDialog()}.bind(this,a)})}function hideCancelTripFlyout(b){var a="cancelAction_"+b;document.getElementById(a).style.display="none";return false}function setEditFocus(a,b){if(exists(a.myPopup)){if(b=="A")a.myPopup.oneditblur=function(){var a=this.edit,b=a.name.substring(a.name.length-1);advanceNextAirDates(b)};else if(b=="C")a.myPopup.oneditblur=function(){compareDateFieldsAndAdd("d",1,this.edit,document.frmMain.carenddate)};else if(b=="H")a.myPopup.oneditblur=function(){compareDateFieldsAndAdd("d",1,this.edit,document.frmMain.hotelEndDate)};else if(b=="R")a.myPopup.oneditblur=function(){var a=this.edit,b=a.name.substring(a.name.length-1);advanceNextRailDates(b)}}else setEditFocus(a)}CNQR.menu.viewEvent=viewEvent;

//FileName: /javascript/travel/travelhome_flight_widget.js
var gStrTripType,gObjReturnDepartureCityDisplay,gObjReturnArrivalCityDisplay,gObjReturnDepartureCityCode,gObjReturnArrivalCityCode,gObjDepartureCityDisplay,gObjArrivalCityDisplay,gObjDepartureCityCode,gObjArrivalCityCode,gObjTimeSide,gObjFlightDate,gObjDepartureOrArrival,gObjFlightTime,gObjTimeWindow,gObjFlightChartContainer,gObjExpanderImage,gStrCurrentFormHash,gStrPreviousFormHash="",gObjLoadMessage,gIntSliceWidth;function initFlightChart(a){var y="fltArrCityActual",x="fltDepCityActual",i="fltDepCityActual1",h="fltDepCityActual0",w="fltDepCityActualSet1",v="fltDepCityActualSet0",u="fltTimeSet",t="fltDateSet",s="undefined",r="timeSide",q="fltArrCity",p="fltDepCity",e="timeSideSet1",c="timeSideSet0",g="fltArrCity0",f="fltDepCity0",o="fltArrCityDisplay0",n="fltDepCityDisplay0",m="container-load-message-",l="expander-flight-",k="container-flight-",d="windowBeforeSet",b="timeSideSet",j=document.location.href.toLowerCase();if(j.indexOf("home.asp")>0||j.indexOf("portal.asp")>0){gIntSliceWidth=5;gObjFlightDate=$("fltDate"+a);gObjDepartureOrArrival=$(b+a).options[$(b+a).selectedIndex];gObjFlightTime=$("fltTime"+a).options[$("fltTime"+a).selectedIndex];gObjTimeWindow=$(d+a).options[$(d+a).selectedIndex];gObjFlightChartContainer=$(k+a+"-chart");gObjExpanderImage=$(l+a);gObjLoadMessage=$(m+a);if($("tripTypeRound").checked){gStrTripType="round";gObjDepartureCityDisplay=$(n);gObjArrivalCityDisplay=$(o);gObjDepartureCityCode=$(f);gObjArrivalCityCode=$(g);gObjReturnDepartureCityDisplay=$(o);gObjReturnArrivalCityDisplay=$(n);gObjReturnDepartureCityCode=$(g);gObjReturnArrivalCityCode=$(f);gObjTimeSide=$("timeSide0");gStrCurrentFormHash=$(f).value+$(g).value+$("fltDate0").value+$("fltDate1").value+$(c).options[$(c).selectedIndex].value+$(e).options[$(e).selectedIndex].value}else{gStrTripType="segment";gObjDepartureCityDisplay=$("fltDepCityDisplay"+a);gObjArrivalCityDisplay=$("fltArrCityDisplay"+a);gObjDepartureCityCode=$(p+a);gObjArrivalCityCode=$(q+a);gObjTimeSide=$(r+a);gStrCurrentFormHash=$(p+a).value+$(q+a).value+$("fltDate"+a).value+$(b+a).options[$(b+a).selectedIndex].value}}else{var z=typeof tripType==s&&numSegments==2||typeof tripType!=s&&tripType==cTripRoundTrip;gIntSliceWidth=3;gObjFlightDate=$(t+a);gObjDepartureOrArrival=$(b+a).options[$(b+a).selectedIndex];gObjFlightTime=$(u+a).options[$(u+a).selectedIndex];gObjTimeWindow=$(d+a).options[$(d+a).selectedIndex];gObjFlightChartContainer=$(k+a+"-chart");gObjExpanderImage=$(l+a);gObjLoadMessage=$(m+a);if(z){gStrTripType="round";gObjDepartureCityDisplay=$(v);gObjArrivalCityDisplay=$(w);gObjDepartureCityCode=$(h);gObjArrivalCityCode=$(i);gObjReturnDepartureCityDisplay=$(w);gObjReturnArrivalCityDisplay=$(v);gObjReturnDepartureCityCode=$(i);gObjReturnArrivalCityCode=$(h);gObjTimeSide=$(c);gStrCurrentFormHash=$(h).value+$(i).value+$("fltDateSet0").value+$("fltDateSet1").value+$(c).options[$(c).selectedIndex].value+$(e).options[$(e).selectedIndex].value}else{gStrTripType="segment";gObjDepartureCityDisplay=$("fltDepCityActualSet"+a);gObjArrivalCityDisplay=$("fltArrCityActualSet"+a);gObjDepartureCityCode=$(x+a);gObjArrivalCityCode=$(y+a);gObjTimeSide=$(r+a);gStrCurrentFormHash=$(y+a).value+$(x+a).value+$(t+a).value+$(b+a).options[$(b+a).selectedIndex].value}}}function toggleFlightChart(d){var a="otPopupDialogdiv",e="aria-expanded";gObjFlightChartContainer=$("container-flight-"+d+"-chart");gObjExpanderElement=$("expander-flight-"+d);var c,b;if(CNQR.IsGateway){c="expander-opened";b="expander-closed"}else{c="/images/hooville/expander_down.gif";b="/images/hooville/expander_left.gif"}if(gObjFlightChartContainer.style.display=="none"){gObjExpanderElement.up(0).setAttribute(e,"true");if(CNQR.IsGateway)gObjExpanderElement.className=c;else gObjExpanderElement.src=c;gObjFlightChartContainer.style.display="";checkFlightGraphCriteria(d);quirksFix();if($(a)!=null)$(a).style.height=$(a).clientHeight+70+"px"}else{gObjExpanderElement.up(0).setAttribute(e,"false");gObjFlightChartContainer.style.display="none";if(CNQR.IsGateway)gObjExpanderElement.className=b;else gObjExpanderElement.src=b;quirksFix();if($(a)!=null)$(a).style.height=$(a).clientHeight-70+"px"}}function stripSpecialChars(b){var a=b+"";a=a.replace(/[^a-zA-Z 0-9]+/g,"");a=a.replace(/ /g,"");return a}function toDate(a,c){var b=new Date;if(c=="h:m"){b.setHours(a.substr(0,a.indexOf(":")));b.setMinutes(a.substr(a.indexOf(":")+1));b.setSeconds(0);return b}else return OTGetUserMessage("TravelAvailabilityJS","InvalidFormat")}function convertToMilitaryTime(c){var g="standard",f="military",d="",k=/^((([0]?[1-9]|1[0-2])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?( )?(AM|am|aM|Am|PM|pm|pM|Pm))|(([0]?[0-9]|1[0-9]|2[0-3])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?))$/,j=/^(([0-9])|([0-1][0-9])|([2][0-3])):(([0-9])|([0-5][0-9]))$/;if(j.test(c))d=f;else if(k.test(c))d=g;else{d="invalid";return"invalid format"}if(d==g){var h=c.split(":"),i=h[0],a=h[1],e="";a=stripSpecialChars(a);a=a.toLowerCase();if(a.indexOf("am")>0||a.indexOf("pm")>0){if(a.length==3)a="0"+a;e=a.substring(2,4);a=a.replace("am","");a=a.replace("pm","")}var b,l=":";if(e=="am"){b=i;if(b=="12")b="00"}else if(e=="pm"){tempHours=parseInt(i,10)+2;if(tempHours<10)tempHours="1"+tempHours;else tempHours="2"+(tempHours-10);if(tempHours=="24")tempHours="12";b=tempHours}if(b.length<2)b="0"+b;if(a.length<2)a="0"+a;return b+l+a}if(d==f){if(c.length<5&c.charAt(0)!="0")c="0"+c;return c}}function timeToMinutes(a){a=convertToMilitaryTime(a);var b=0,d=parseFloat(a.substr(0,2)),c=parseFloat(a.substr(3,2));b=d*60;b+=c;return b}function whichSlice(d){var c=30,b=0,a=0;b=timeToMinutes(d);a=Math.round(b/c);if(a>47)a=47;return a}function checkFlightGraphCriteria(b){initFlightChart(b);var h=/^\d{2}\/\d{2}\/\d{4}$/,e,d,j,i,k,l,g,m,f,a;if(CNQR.IsGateway)a="/static/images/arrows/arrow-2-N-blue.png?manualcachekilla=20142701";else a="/images/hooville/expander_down.gif";if(gStrPreviousFormHash!=gStrCurrentFormHash){gStrPreviousFormHash=gStrCurrentFormHash;if(gObjDepartureCityDisplay.value.length>2&&gObjArrivalCityDisplay.value.length>2&&gObjFlightDate.value.length>9){if(gObjFlightDate.value.length>5)if(gStrTripType=="round"){$("expander-flight-0").src=a;$("expander-flight-1").src=a;$("container-flight-0-chart").style.display="";$("container-flight-1-chart").style.display="";$("container-load-message-0").style.display="";$("container-load-message-1").style.display="";doFlightGraph(0,gObjDepartureCityCode.value,gObjArrivalCityCode.value);doFlightGraph(1,gObjReturnDepartureCityCode.value,gObjReturnArrivalCityCode.value)}else doFlightGraph(b,gObjDepartureCityCode.value,gObjArrivalCityCode.value)}else{var c=OTGetUserMessage("TravelAvailabilityJs","FillOutFieldsError");gObjLoadMessage.innerHTML=c;gObjLoadMessage.style.display=""}}}function doFlightGraph(e,B,A){var M="FlightArrives",g=" ",L="FlightDeparts",K="nonstop-tooltip-",D="-nonstop-",x=" #",C="ErrorGettingFlightInfo",d="TravelAvailabilityJS",o=true,c="";gObjLoadMessage=$("container-load-message-"+e);var S,R,B,A,X,a,Q,U,Y,T,k,s;k=false;s=c;a=gObjFlightDate.value;strTimeSideSet=gObjDepartureOrArrival.value;gObjLoadMessage.innerHTML=OTGetUserMessage("TravelAvailabilityJs","GettingFlightInfo");resetFlightGraph(e);var E=new XMLHttpRequest;a=a.replace(/[.]+/g,"/");a=a.replace(/[-]+/g,"/");var p,q,r;if(userDatePreference==0||userDatePreference==1||userDatePreference==2){p=a.substring(0,2);q=a.substring(3,5);r=a.substring(6,10)}else if(userDatePreference==3||userDatePreference==4||userDatePreference==5){q=a.substring(0,2);p=a.substring(3,5);r=a.substring(6,10)}else{r=a.substring(0,4);p=a.substring(5,7);q=a.substring(8,10)}if(isValidDate(parseInt(r,10),parseInt(p,10)-1,parseInt(q,10)))a=p+"/"+q+"/"+r;else{a=c;k=o;s=OTGetUserMessage(d,C)}try{if(B.length>0&&A.length>0&&!k){E.open("GET","/javascript/service/GetFlightsWithTimes.asp?depcity="+B+"&arrcity="+A+"&startdate="+a+"&tf="+userMilitaryTime+"&timeside="+strTimeSideSet,false);E.send(B,A,a,Q);var j=E.responseText.evalJSON()}if(j&&j.Records){var w,v,n,m,t,u,I,z,H=j.Records.length,G=j.CodeShares.length,V=0,f=0,W=c,l=c,J=c,N=c,P=0,O=0;z=c;for(var h=c,y=0;y<H;y++){var b=j.Records[y];w=b.strCarrierName;v=b.strFlightNumber;strDepartureDate=b.strDepartureDate;strArrivalDate=b.strArrivalDate;m=b.strDepartureTime;n=b.strArrivalTime;t=b.strDepartureAirportCode;u=b.strArrivalAirportCode;strOutsideTimeWindow=b.strOutsideTimeWindow;I=strTimeSideSet;P=b.intIsCodeShare;O=b.strAircraftOwner;h=c;if(G>0)for(var F=0;F<G;F++){var i=j.CodeShares[F];if(m==i.strDepartureTime&&n==i.strArrivalTime&&t==i.strDepartureAirportCode&&u==i.strArrivalAirportCode){h=w+x+v+" ("+i.strCarrierName+x+i.strFlightNumber+")";break}else h=w+x+v}else h=w+x+v;if(I=="A")f=whichSlice(n);else f=whichSlice(m);z="td-flight-"+e+D+f;strTooltipTemp=K+e+"-"+f;N="flight-slice-"+e+D+f;if($(K+e+"-"+f)==null){l='<p class="flightHeader">'+h+"</p><p>"+OTGetUserMessage(d,L)+g+t+g+m+"<br/>"+OTGetUserMessage(d,M)+g+u+g+n+"</p>";J='<span class="timeslice active" id="flight-slice-'+e+D+y+'" style="width:'+gIntSliceWidth+'px" tabindex="0" onmouseover="javascript:showFlightPopup('+e+","+f+')" onmouseout="javascript:hideFlightPopup(\''+strTooltipTemp+"')\" /></span>";$(z).innerHTML=J+'<div style="display: none;" class="nonstop-balloon top" id="nonstop-tooltip-'+e+"-"+f+'">'+l;+"</div>"}else{l=l+'<hr class="tooltip-hr"/><p class="flightHeader">'+h+"</p><p>"+OTGetUserMessage(d,L)+g+t+g+m+"<br/>"+OTGetUserMessage(d,M)+g+u+g+n+"</p>";$(strTooltipTemp).innerHTML=l}}}}catch(Z){k=o;s=OTGetUserMessage(d,C)}if(H<1){k=o;s=OTGetUserMessage(d,"NoNonstopFlightsScheduled")}if(k==o){gObjLoadMessage.innerHTML=s;gObjLoadMessage.style.display=c}else{gObjLoadMessage.innerHTML=OTGetUserMessage(d,"FlightInformationLoaded");gObjLoadMessage.fade()}}function resetFlightGraph(e){var d="-nonstop-";for(var b="",c="",g="",f="",a=0;a<=47;a++){b="td-flight-"+e+d+a;c='<span class="timeslice" id="flight-slice-'+e+d+a+'" style="width:'+gIntSliceWidth+'px" tabindex="-1"></span>';$(b).innerHTML=c;$(b).title=""}}function showFlightPopup(g,h){var a=$("nonstop-tooltip-"+g+"-"+h),b=$("td-flight-"+g+"-nonstop-"+h);a.style.display="";var e=b.offsetLeft,n=b.offsetTop,c=a.offsetHeight,d=22,f=c+d,l=document.body.clientHeight,m=b.offsetTop,k=c+d,i=findTop(b.offsetParent.offsetParent),j=b.offsetParent.offsetTop+i+k;a.className="nonstop-balloon top";e-=48;a.style.left=e+"px";a.style.top=d+"px";if(j>l){f=c+b.offsetHeight;a.className="nonstop-balloon";a.style.top="-"+f+"px"}}function hideFlightPopup(a){document.getElementById(a).style.display="none"}function quirksFix(){var c="-nonstop",b="container-flight-";if(Prototype.Browser.IE&&document.compatMode!="CSS1Compat")for(var a=0;a<=8;a++)if($(b+a+c)!=undefined){$(b+a+c).style.display="none";$(b+a+c).style.display=""}}function findTop(a){var b=0;if(a.offsetParent){do b+=a.offsetTop;while(a=a.offsetParent);return b}}function isValidDate(c,b,d){var a=new Date(c,b,d);return a.getFullYear()===c&&a.getMonth()===b&&a.getDate()===d};

//FileName: /javascript/concurmaps.js
var ConcurMaps=function(){var g="</div>",t="ReferencePoint",h="Geocode",q="TravelAvailabilityJS",j="string",p="undefined",i="referencepoint",a="",f=180,e="function",o="locationdiv_",n="click",c=true,b=null,d=false,l=[],m,w,B,y,u,v,r,z=d,x={"set":function(c,d,e){var b=this,a=Math.exp(6-Math.log(2)*e);b.min_lat=c-a;b.max_lat=c+a;b.min_lon=d-a;b.max_lon=d+a},extend:function(d){var a=this,b=parseFloat(d.latitude),c=parseFloat(d.longitude);if(!isNaN(b)&&!isNaN(c)){if(!a.min_lat||b<a.min_lat)a.min_lat=b;if(!a.max_lat||b>a.max_lat)a.max_lat=b;if(!a.min_lon||c<a.min_lon)a.min_lon=c;if(!a.max_lon||c>a.max_lon)a.max_lon=c}},grow:function(d){var a=this;if(a.min_lat&&a.min_lon){var b=(a.max_lat-a.min_lat)*(d-1)/2,c=(a.max_lon-a.min_lon)*(d-1)/2;a.min_lat=a.min_lat-b;a.max_lat=a.max_lat+b;a.min_lon=a.min_lon-c;a.max_lon=a.max_lon+c}},getZoom:function(){var a=this;if(a.min_lat&&a.min_lon)return Math.min(Math.floor((6-Math.log(Math.max(a.max_lat-a.min_lat,a.max_lon-a.min_lon)))/.686),14)},getCenterLat:function(){var a=this;if(a.min_lat&&a.min_lon)return(a.min_lat+a.max_lat)/2},getCenterLon:function(){var a=this;if(a.min_lat&&a.min_lon)return(a.min_lon+a.max_lon)/2}},D={language:b,map:b,zoom:b,center:b,panoramaSupported:c,defaultLanguage:"en",supportedLanguages:["ar","bg","bn","ca","cs","da","de","el","en","es","eu","fi","fil","fr","gl","gu","hi","hr","hu","id","it","iw","ja","kn","ko","lt","lv","ml","mr","nl","nn","no","or","pl","pt","pt-BR","pt-PT","rm","ro","ru","sk","sl","sr","sv","ta","te","th","tr","uk","vi","zh-CN","zh-TW"],browserIsCompatible:function(){return c},init:function(t,r,j,u,p,m){var i="bounds_changed",g=this;j.grow(1.09);g.zoom=j.getZoom();g.center=new google.maps.LatLng(j.getCenterLat(),j.getCenterLon());if(!u){var s={zoom:g.zoom,center:g.center,mapTypeId:google.maps.MapTypeId.ROADMAP};g.map=new google.maps.Map(document.getElementById(t),s)}var a=g.map;g.refreshLocations(r);google.maps.event.clearListeners(a,n);google.maps.event.addListener(a,n,function(c){if(ConcurMaps.onClick)ConcurMaps.onClick(a,b,c.latLng)});if(window.gShowHotelObj){k.showOnMap(gShowHotelObj.index+1,o+(gShowHotelObj.index+1),gShowHotelObj.lat,gShowHotelObj.lng,17);gShowHotelObj=b}var q=function(){if(typeof p===e){var b=a.getBounds();p(h,b.getCenter().lat(),b.getCenter().lng()>f?b.getCenter().lng()-360:b.getCenter().lng(),b.toSpan().lat(),b.toSpan().lng(),a.getZoom())}if(typeof m===e){l&&clearTimeout(l);var c=function(){var b=a.getBounds();m(h,b.getCenter().lat(),b.getCenter().lng()>f?b.getCenter().lng()-360:b.getCenter().lng(),b.toSpan().lat(),b.toSpan().lng(),a.getZoom());h=d};l=setTimeout(c,h?10:2e3)}};if(typeof p===e||typeof m===e){var l,h=c;google.maps.event.clearListeners(a,i);google.maps.event.addListener(a,i,q)}},getScriptUrl:function(d){var c=this;logJsError("System|GoogleMapsChannel",a,a);d=s(d,c.supportedLanguages,c.defaultLanguage);var j="gme-concur",h=document.location.protocol,i="maps.googleapis.com",g=a,f=a,e=a;try{g=document.location.host.replace(new RegExp("/","g"),"-");f=document.location.pathname.replace(new RegExp("/","g"),"-");e=encodeURIComponent(g+f)}catch(k){e=a}var b=h+"//"+i+"/maps/api/js?client="+j;b+="&sensor=false&v=3.8";b+="&hl="+s(d,c.supportedLanguages,c.defaultLanguage);b+="&channel=loadmap--"+e;b+="&callback=ConcurMaps.initMaps";return b},refreshLocations:function(c){this.clearOverlays();if(c)for(var b=0;b<c.length;b++){var a=c[b];if(a){var d=new google.maps.LatLng(a.latitude,a.longitude);A(d,b+1,a).setMap(this.map)}}},clearOverlays:function(){for(var a=0;a<l.length;a++)l[a]&&l[a].setMap(b);l.length=0},createProviderMarker:function(g,c,h,e,f,d){if(!d)c="/Images/gMaps/refpoint_marker.png";else c="/Images/gMaps/num/blue_marker"+d+".png";var a=new google.maps.Marker({position:g,map:this.map,icon:{url:c}});a.infoWindow=new google.maps.InfoWindow({content:e,pixelOffset:new google.maps.Size(9,2),maxWidth:260});a.vendorType=f;google.maps.event.addListener(a,n,function(){var e="locations_wrapper",c="geocodelistbox";a.infoWindow.open(a.getMap(),a);if(a.vendorType===i&&$(c)!==b)$(c).selectedIndex=d-1;if($(e)!==b&&$(id)!==b)if(a.vendorType==="car"||a.vendorType==="hotel"){$(e).scrollTop=$(id).offsetTop-45;typeof Effect!==p&&new Effect.Highlight(id)}});return a},setView:function(b,c,a){if(this.map){this.map.setZoom(a);this.map.setCenter(new google.maps.LatLng(b,c))}},resetView:function(){var a=this;if(a.map){a.map.setZoom(a.zoom);a.map.setCenter(a.center)}},showInfobox:function(c,a,d){if(this.map)if($(c)!==b&&typeof d!==j){a.infoWindow.setContent($(c).innerHTML);a.infoWindow.open(a.getMap(),a)}else if(typeof d===j&&d.length>0&&$(c)!==b){a.infoWindow.setContent($(c).infoWindowHtml);a.infoWindow.open(a.getMap(),a)}else a.infoWindow&&a.infoWindow.open(a.getMap(),a)},hideInfobox:function(a){this.map&&a.infoWindow.close()},openPanorama:function(d,b){if(!this.map)return;var e=new google.maps.LatLng(d,b),f=22,a=new google.maps.StreetViewService;a.getPanoramaByLocation(e,f,function(b,a){if(a==google.maps.StreetViewStatus.OK){mapProvider.map.getStreetView().setPano(b.location.pano);mapProvider.map.getStreetView().setVisible(c)}else CQAlert(OTGetUserMessage(q,"NoStreetViews"))})},closePanorama:function(){!this.map&&this.map.getStreetView().setVisible(d)}},E={language:b,map:b,zoom:b,center:b,panoramaSupported:d,panorama:b,defaultLanguage:"en-US",supportedLanguages:["nl-BE","en-US","en-CA","en-IN","en-GB","fr-FR","fr-CA","de-DE","it-IT","ja-JP","es-MX","es-ES","es-US"],browserIsCompatible:function(){return c},init:function(p,n,m,q,l,j){var a=this,g;if(q)g=a.map;else{g=new Microsoft.Maps.Map(document.getElementById(p),{disableKeyboardInput:c,useInertia:d,showMapTypeSelector:c,enableClickableLogo:d,enableSearchLogo:d,credentials:"AltwiX6pSxmrspK0s9tKL2lAUXtKiJPItsTrF_QyUQna66QmKlgYIQn-dQxw-b1P"});a.map=g}a.refreshLocations(n);a.zoom=m.getZoom();a.center=new Microsoft.Maps.Location(m.getCenterLat(),m.getCenterLon());a.resetView();if(window.gShowHotelObj){k.showOnMap(gShowHotelObj.index+1,o+(gShowHotelObj.index+1),gShowHotelObj.lat,gShowHotelObj.lng,17);gShowHotelObj=b}if(typeof l===e||typeof j===e){var i,h=c;Microsoft.Maps.Events.addHandler(a.map,"viewchangeend",function(){if(typeof l===e){var a=g.getTargetBounds();l(h,a.center.latitude,a.center.longitude>f?a.center.longitude-360:a.center.longitude,a.height,a.width,g.getZoom())}if(typeof j===e){i&&clearTimeout(i);var b=function(){var a=g.getTargetBounds();j(h,a.center.latitude,a.center.longitude>f?a.center.longitude-360:a.center.longitude,a.height,a.width,g.getZoom());h=d};i=setTimeout(b,h?10:2e3)}})}Event.observe(window,"unload",g.dispose.bindAsEventListener(a))},getScriptUrl:function(d){logJsError("System|BingMapsChannel",a,a);var c=document.location.protocol,e="ecn.dev.virtualearth.net",b;b=c+"//"+e+"/mapcontrol/mapcontrol.ashx?v=7.0";if(c==="https:")b+="&s=1";b+="&mkt="+s(d,this.supportedLanguages,this.defaultLanguage);b+="&onscriptload=ConcurMapsInitMaps";return b},refreshLocations:function(c){if(this.map){this.map.entities.clear();if(c)for(var b=0;b<c.length;b++){var a=c[b];if(a){var d=new Microsoft.Maps.Location(a.latitude,a.longitude);this.map.entities.push(A(d,b+1,a))}}}},createProviderMarker:function(o,m,s,p,q,j,e){var l,k,r=function(){if(e){if(e.vendorName||e.street||e.city||e.state)return" - "+e.vendorName+" "+e.street+" "+e.city+" "+e.state;if(e.name)return" - "+e.name}return a}();if(q==i){l=OTGetUserMessage(h,t);k="refPointImg"}else{l=OTGetUserMessage("Common","Location")+" "+j+r;k="pin"+j+"Img"}marker=new Microsoft.Maps.Pushpin(o,{icon:m,anchor:new Microsoft.Maps.Point(10,32),htmlContent:'<div class="pinWrapper"><a role="button"><div class="pinIndex">'+(j==b?a:j)+'</div><img src="'+m+'" alt="'+l+'" id="'+k+'"  aria-haspopup="true"></a></div>'});marker.map=this.map;marker.index=j;marker.id=k;htmlWrapped='<div id="bing7infoboxDiv" class="bing7infoboxDiv" tabindex="-1" aria-describedby="infoBoxHeader" role="dialog">';htmlWrapped+='  <div class="bing7infobox">';htmlWrapped+='\t\t<a class="infobox-close close" role="button" href="javascript:void(mapProvider.hideInfobox( ConcurMaps.currentInfoBox ))">';htmlWrapped+='\t\t\t<span aria-hidden="true">x</span>';htmlWrapped+='\t\t\t<span class="screen-reader-only">Close Location '+j+" Info Box</span>";htmlWrapped+="\t\t</a>";htmlWrapped+='\t\t<div class="description" id="pinDescription">'+p+g;htmlWrapped+="\t</div>";htmlWrapped+=g;var f=new Microsoft.Maps.Infobox(o,{htmlContent:htmlWrapped,visible:d});Microsoft.Maps.Events.addHandler(marker,n,function(){var a="bing7infoboxDiv",l=12,k=45,i=marker.map.tryLocationToPixel(f.getLocation()),h=marker.map.tryPixelToLocation(new Microsoft.Maps.Point(i.x+f.getWidth()+l,i.y+f.getHeight()+k)),e=h.longitude-marker.map.getTargetBounds().getEast(),b=marker.map.getTargetBounds().getSouth()-h.latitude,g=function(){f.setOptions({visible:c})};if(CNQR.ConcurAccessible==d){if(e<0)e=0;if(b<0)b=0;if(e>0||b>0){marker.map.setView({center:new Microsoft.Maps.Location(marker.map.getCenter().latitude-b,marker.map.getCenter().longitude+e)});setTimeout(g,500)}else g()}else g();window.gShowHotelObj&&$$("#locationdiv_"+(j-1)+" a")[0].focus();ConcurMaps.currentInfoBox=this.target;if($(a)&&$(a).observe){$(a).observe("keydown",function(b){switch(b.keyCode){case Event.KEY_ESC:mapProvider.hideInfobox(ConcurMaps.currentInfoBox);break;case Event.KEY_TAB:var d=CNQR.getFocusableElements($(a),c);if(b.target===d.last()&&!b.shiftKey){d.first().focus();b.preventDefault()}else if(b.target===d.first()&&b.shiftKey){d.last().focus();b.preventDefault()}}});$(a).focus()}});Microsoft.Maps.Events.addHandler(this.map,n,function(){f.setOptions({visible:d})});marker.infobox=f;this.map.entities.push(f);return marker},setLanguage:function(a){this.language=s(a,this.supportedLanguages,this.defaultLanguage)},setView:function(b,c,a){this.map&&this.map.setView({center:new Microsoft.Maps.Location(b,c),zoom:a})},resetView:function(){var a=this;a.map&&a.map.setView({center:a.center,zoom:a.zoom})},showInfobox:function(d,a){if(this.map){ConcurMaps.currentInfoBox&&mapProvider.hideInfobox(ConcurMaps.currentInfoBox);a.infobox.setOptions({visible:c})}},hideInfobox:function(a){if(this.map){a.infobox.setOptions({visible:d});a.id&&$(a.id)&&$(a.id).up().focus()}},openPanorama:function(){},closePanorama:function(){}},C=function(h){var i=dynList.getListOfVisibleResults(),b=dynList.arrResults[i[h]],e=a;if(b.hotelPrefRank==gHOTEL_COMPANY_LESS_PREFERRED||b.hotelPrefRank==gHOTEL_COMPANY_PREFERRED||b.hotelPrefRank==gHOTEL_COMPANY_MOST_PREFERRED)e="CompanyPreferredVendorText";else e="CompanyPreferredHotelText";var f=a,d=a;if(isPreferenceSetup(b.hotelPrefRank))f=getPreferenceLevelText(b.hotelPrefRank,NormalizePriority(b.companyPriority),lookupVendor(b.vendor,"h"),e);if(gGovtHotelsEnabled&&b.isFedRoom)d=OTGetUserMessage(q,"FedroomHotel");else if(gGovtHotelsEnabled&&!b.isFedRoom&&b.isFema)d=OTGetUserMessage(q,"FEMAHotel");var j=b.neighborhood!=a?b.neighborhood+"<br>":a,k="/travelwizard/picture.asp?1=2&gds="+GetGDSID(b.gdsName)+"&pictype=t&propid="+b.id,c='<div id="locationdiv_'+h+'" class="locationdiv">';c+='<img class="hotelPictureExSmall" src="'+k+'" onerror="showWatermark(this,true)">';c+='<div class="hotelDetails">';c+='<div class="hotelName">'+b.propertyName+" "+j;if(b.minFare&&b.maxFare)c+='<span class="price"> - '+fmtCurrencyWithExchangeRate(b.minFare,b.rates[0].baseCurrency,a)+"-"+fmtCurrencyWithExchangeRate(b.maxFare,b.rates[0].baseCurrency,a)+"</span>";c+=g;c+='<div class="hotelAddress">'+b.address+", ";if(b.city!=a)c+=b.city;c+=g;if(mapProvider.panoramaSupported)c+='<div><a href="javascript:void(ConcurMaps.openPanorama('+b.latitude+","+b.longitude+'))">'+OTGetUserMessage(q,"StreetView")+"</a></div>";c+=g;if(f.length>0||d.length>0)c+='<div class="prefText">'+formatFooterOutput([f,d])+g;c+=g;return c},A=function(n,d,e){var g,k=c,m=e.index||d;switch(e.vendorType){case"car":case"restaurant":case"hotel":case"airport":g="/Images/gMaps/"+e.vendorType+"_marker.png";break;case i:g="/Images/gMaps/icon-reference-point.png";break;case"number-non-preferred":case"number-most-preferred":case"number-preferred":case"number-less-preferred":case"number-not-preferred":case"number-company-most-preferred":case"number-company-preferred":case"number-company-less-preferred":case"number-purple":case"number-yellow":case"number-black":case"number-green":case"number-blue":case"number-red":case"number-gold":case"number-silver":case"number-lightblue":case"number-lightgreen":case"number-AgencyPreferred":case"number-Fedroom":case"number-Fema":case"number":g="/Images/gMaps/blue-pin-icon.png";break;default:g="/Images/gMaps/blue_marker.png"}var j=o+d,f=a;if(v)f=v(e);else if(window.hooville&&typeof dynList!=p)if(e.vendorType==i)f='<div class="locationdiv"><div class="refPointDiv">'+OTGetUserMessage(h,t)+"<br>"+$F("refPointName")+"</div></div>";else f=C(d-1);else if($(j)!==b&&!ConcurMaps.locations[d-1].displayName)f=$(j).innerHTML;else if(ConcurMaps.locations[d-1].displayName)f=ConcurMaps.locations[d-1].displayName.unescapeHTML();l[d]=mapProvider.createProviderMarker(n,g,k,f,e.vendorType,e.vendorType==i?b:m,ConcurMaps.locations[d-1]);$$(".MapPushpinBase").each(function(a){$(a).writeAttribute("role","button")});return l[d]},s=function(b,g,h){var c,d,e;if(b)for(var f=1;f<g.length;f++){var a=g[f];if(b==a)return a;if(b==a.substr(0,b.length)&&!c)c=a;if(b.substr(0,a.length)==a&&!d)d=a;if(b.substr(0,2)==a.substr(0,2)&&!e)e=a}return c||d||e||h},F=function(c,a,d,b){return Math.min(Math.floor((6-Math.log(Math.max(a-c,b-d)))/.686),19)},k={locations:b,showOnMap:function(c,a,f,g,e,d){mapProvider.setView(f,g,e);mapProvider.showInfobox(a,l[c],d);mapProvider.closePanorama();ConcurMaps.currentInfoBox=l[c];typeof Effect!==p&&$(a)!==b&&new Effect.Highlight(a)},selectMarker:function(a){mapProvider.showInfobox($(o+a),l[a]);openInfoWindowHtml($(o+a).innerHTML,{maxWidth:260})},setMapDiv:function(a){m=a},getMapDiv:function(){return m},showAllOnMap:function(){mapProvider.resetView();k.hideAllMarkers();k.refreshLocations()},hideAllMarkers:function(){for(var a=1;a<l.length;a++)mapProvider.hideInfobox(l[a])},openPanorama:function(b,a){mapProvider.openPanorama(b,a)},closePanorama:function(){mapProvider.closePanorama()},getMarkers:function(){return l},setLanguage:function(a){if(typeof a===j)w=a},setProvider:function(b){switch(typeof b==j?b:a){case"G":case"G3":mapProvider=D;break;default:mapProvider=E}},setIsGsaFedrooms:function(a){z=a},getIsGsaFedrooms:function(){return z},setInitialView:function(b,c,a){r={lat:b,lon:c,zoom:a}},setOnViewChange:function(a){B=a},setOnViewChangeFinish:function(a){y=a},setOnLoaded:function(a){u=a},setOnRenderPopup:function(a){v=a},getLanguage:function(){return w},loadScript:function(b){var a=document.createElement("script");a.src=mapProvider.getScriptUrl(w);a.type="text/javascript";if(b===c)$$("head")[0].appendChild(a);else Event.observe(window,"load",function(){$$("head")[0].appendChild(a)})},refreshLocations:function(a){mapProvider.refreshLocations(a||k.locations)},reInitMaps:function(){mapProvider.map.entities&&mapProvider.map.entities.clear();this.initMaps(c)},initMaps:function(q){var l="<br/><br/><br/>",f="<br/>";if(typeof m!==j||typeof m===j&&m.length===0)m="mapdiv";if($(m)!=b){if(window.hooville&&typeof dynList!=p){var n;k.locations=$A();var o=dynList.getListOfVisibleResults();o.each(function(b){n={latitude:dynList.arrResults[b].latitude,longitude:dynList.arrResults[b].longitude,vendorType:dynList.arrResults[b].vendorType,city:dynList.arrResults[b].city,state:dynList.arrResults[b].state,vendorName:function(b){return b.propertyName?b.propertyName:b.vendorName?b.vendorName:a}(dynList.arrResults[b]),street:function(b){return b.address?b.address:b.street?b.street:a}(dynList.arrResults[b])};k.locations.push(n)});n={latitude:$F("latitude"),longitude:$F("longitude"),vendorType:i};k.locations.push(n)}if(r)x.set(r.lat,r.lon,r.zoom);else k.locations.each(function(a){x.extend(a)});if($(m)!==b&&Element.visible(m)===c&&k.locations===b&&r===b){alert("You have to set the locations property with a valid value. initMaps won't work otherwise!");return d}if(mapProvider.browserIsCompatible())mapProvider.init(m,k.locations,x,q,B,y,u);else{var s=document.getElementById(m),e='<div style="text-align:center; margin:100px 20px;">';e+=OTGetUserMessage(h,"ErrorMapDisplayFailed")+f;e+=l;e+=OTGetUserMessage(h,"ErrorMapDisplayFailedIncompatibleBrowser")+f;e+='<a target="_blank" href="http://support.google.com/maps/bin/answer.py?hl=en&topic=1499&answer=16532">';e+=OTGetUserMessage(h,"ErrorMapDisplayFailedCompatibleBrowserLink")+"</a><br/>";e+=l;e+=OTGetUserMessage(h,"ErrorMapDisplayFailedAlias")+f;e+=l;e+=OTGetUserMessage(h,"ErrorMapDisplayFailedSupportHint")+f;e+="<div class=\"typewriting\" style=\"margin:10px 50px;text-align:left;font-size:8pt;font-family:'Courier New', Courier, 'Times New Roman'\">";e+="GBrowserIsCompatible() returned false; ";if(bUtil)e+="version = "+navigator.userAgent+"; ";e+="url = "+document.URL+".";e+="</span>";e+=g;s.innerHTML=e}}u&&u()},calcDistance:function(a,j,i,k,d){var b=a-i,c=j-k,e=Math.cos(a*Math.PI/f),g=Math.cos(a*Math.PI/f),h=d==="M"?69.047:d==="K"?111.12:1;return h*Math.sqrt(b*b+c*c*e*g)}};return k}();function ConcurMapsInitMaps(){ConcurMaps.initMaps()};

//FileName: /javascript/travel/travelhome_car.js
function carOffAirportObject(){var a="",b=this;b.carPickupLocationName=a;b.carPickupIATA=a;b.carPickupVendor=a;b.carPickupCategory=a;b.carPickupLocationNumber=a;b.carPickupCityName=a;b.carPickupCountryCode=a;b.carDropoffLocationName=a;b.carDropoffIATA=a;b.carDropoffVendor=a;b.carDropoffCategory=a;b.carDropoffLocationNumber=a;b.carDropoffCityName=a;b.carDropoffCountryCode=a;b.currLocationBoxName=a}carOffAirportObject.prototype.copyPickupFieldsToDropoff=function(){var a=this;a.carDropoffLocationName=a.carPickupLocationName;a.carDropoffIATA=a.carPickupIATA;a.carDropoffVendor=a.carPickupVendor;a.carDropoffCategory=a.carPickupCategory;a.carDropoffLocationNumber=a.carPickupLocationNumber;a.carDropoffCityName=a.carPickupCityName;a.carDropoffCountryCode=a.carPickupCountryCode;document.frmMain.carDropoffLocationName.value=a.carPickupLocationName?a.carDropoffLocationName:"";document.frmMain.carDropoffCityName.value=a.carPickupCityName?a.carDropoffCityName:""};carOffAirportObject.prototype.setFields=function(d,n,j,k,i,c,e,m,l){var h="carCollectionLocationDD",g="carDeliveryLocationDD",f="LocationName",b="car",a=this;a[b+a.currLocationBoxName+"Vendor"]=d;a[b+a.currLocationBoxName+"IATA"]=n;a[b+a.currLocationBoxName+"Category"]=j;a[b+a.currLocationBoxName+"LocationNumber"]=k;a[b+a.currLocationBoxName+f]=i;a[b+a.currLocationBoxName+"CityName"]=m;a[b+a.currLocationBoxName+"CountryCode"]=l;document.frmMain[b+a.currLocationBoxName+f].value=i;if(c&&a.currLocationBoxName=="Pickup"&&$(g)){$(g).value=c;SetCarDelColAC($("cl_lookupCarDelivery"),e)}if(c&&a.currLocationBoxName=="Dropoff"&&$(h)){$(h).value=c;SetCarDelColAC($("cl_lookupCarCollection"),e)}a.enableDeliveryCollection(a.currLocationBoxName,d);if(a.currLocationBoxName=="Pickup"&&!document.frmMain.carDropoffDifferent.checked){a.copyPickupFieldsToDropoff();a.enableDeliveryCollection("Dropoff",d)}};carOffAirportObject.prototype.enableDeliveryCollection=function(m,b){var e="none",f="block",a=",",d=document.frmMain.carDeliveryCollectionChains,c=document.frmMain.carHomeDeliveryCollectionChains;if(d.value!=a||c.value!=a){if(m=="Pickup"){var l=document.getElementById("carDeliveryDiv");l.style.display=d.value.match(a+b+a)||c.value.match(a+b+a)?f:e;if(l.style.display==f){if(d.value==a||!d.value.match(a+b+a)){var h=document.getElementById("carDeliveryLocationDD");if(h)h.style.display=e}if(c.value==a||!c.value.match(a+b+a)){var j=document.getElementById("carDeliveryDivHome");if(j)j.style.display=e}}}if(m=="Dropoff"){var k=document.getElementById("carCollectionDiv");k.style.display=d.value.match(a+b+a)||c.value.match(a+b+a)?f:e;if(k.style.display==f){if(d.value==a||!d.value.match(a+b+a)){var g=document.getElementById("carCollectionLocationDD");if(g)g.style.display=e}if(c.value==a||!c.value.match(a+b+a)){var i=document.getElementById("carCollectionDivHome");if(i)i.style.display=e}}}}};carOffAirportObject.prototype.copyPropertiesToFormFields=function(b){var a=this;if(b=="Pickup"){document.frmMain.carPickupLocationName.value=a.carPickupLocationName;document.frmMain.carPickupIATA.value=a.carPickupIATA;document.frmMain.carPickupVendor.value=a.carPickupVendor;document.frmMain.carPickupCategory.value=a.carPickupCategory;document.frmMain.carPickupLocationNumber.value=a.carPickupLocationNumber;document.frmMain.carPickupCityName.value=a.carPickupCityName;document.frmMain.carPickupCountryCode.value=a.carPickupCountryCode}else{document.frmMain.carDropoffLocationName.value=a.carDropoffLocationName;document.frmMain.carDropoffIATA.value=a.carDropoffIATA;if(a.carDropoffVendor!=""&&document.frmMain.carPickupVendor.value=="")document.frmMain.carPickupVendor.value=a.carDropoffVendor;document.frmMain.carDropoffVendor.value=a.carDropoffVendor;document.frmMain.carDropoffCategory.value=a.carDropoffCategory;document.frmMain.carDropoffLocationNumber.value=a.carDropoffLocationNumber;document.frmMain.carDropoffCityName.value=a.carDropoffCityName;document.frmMain.carDropoffCountryCode.value=a.carDropoffCountryCode}};carOffAirportObject.prototype.clearFormFields=function(b){var a="";if(b=="Pickup"){document.frmMain.carPickupLocationName.value=a;document.frmMain.carPickupVendor.value=a;document.frmMain.carPickupCategory.value=a;document.frmMain.carPickupLocationNumber.value=a;document.frmMain.carPickupCityName.value=a;document.frmMain.carPickupCountryCode.value=a}else{document.frmMain.carDropoffLocationName.value=a;document.frmMain.carDropoffVendor.value=a;document.frmMain.carDropoffCategory.value=a;document.frmMain.carDropoffLocationNumber.value=a;document.frmMain.carDropoffCityName.value=a;document.frmMain.carDropoffCountryCode.value=a}};function popupOffAirportCar(d,b){var c="&searchRefPoint=",a="";if(exists(arguments[2]))a+="&latitude="+arguments[2];if(exists(arguments[3]))a+="&longitude="+arguments[3];if(exists(arguments[4]))a+="&searchCity="+arguments[4];if(exists(arguments[5]))a+="&searchState="+arguments[5];if(exists(arguments[6])&&arguments[6]!=""){a+="&searchCountry="+arguments[6];a+=c+arguments[4]+", "+arguments[5]}if(!exists(arguments[2])&&!exists(arguments[3])&&document.frmMain.carOffAirportDefaultSearchType){a+="&defaultSearchType="+document.frmMain.carOffAirportDefaultSearchType.value;a+="&defaultCompanyLocLat="+document.frmMain.carOffAirportDefaultCompanyLocLat.value;a+="&defaultCompanyLocLon="+document.frmMain.carOffAirportDefaultCompanyLocLon.value}if(exists(arguments[7])&&arguments[7]==true)a+="&pageaction=getrefpoints";if(exists(arguments[8]))a+="&vendor="+arguments[8];if(exists(arguments[9])&&arguments[6]=="")a+=c+arguments[9];if(!exists(b))b="";gOffAirportObj.currLocationBoxName=d;popupWindow("/twPopup/car_search_new.asp?txtString="+b+a,"caroffairport",785,675,"status=1,scrollbars=1,resizable=1,modal=yes,dialog=yes,dependent=yes,")}function SetCarDelColAC(a,b){if(!a)return;!a.myPopup&&a.onfocus();b!=null&&kickstartDynamicAutoComplete(a,b)}function UpdateOffAirportLocation(i,g,a,b,c,k,e,h,j,f,d){if(typeof bTwTemplateStart!="undefined"){UpdateOffAirportLocationTemplate(i,g,a,parseInt(b,10),c,f,d);mywindow.close();return}var m=document.frmMain;if(e&&h&&($("carCollectionLocationDD")||$("carDeliveryLocationDD")))FilterCompanyLocationsByRadius(i,g,a,b,c,k,e,h,j,f,d);else UpdateOffAirportLocation_Finish(i,g,a,b,c,k,e,h,j,f,d)}function UpdateOffAirportLocation_Finish(k,j,c,e,f,h,l,m,d,i,g){var a="offAirportSearchLink";gOffAirportObj.setFields(k,j,c,e,f,h,d,i,g);var b=$(a).innerHTML;if(b.endsWith(" ")==true)$(a).innerHTML=b.substring(0,$(a).innerHTML.length-1);else $(a).innerHTML=b+" ";mywindow.close();carLocationChanged()}function homeDC_checkd(c,b){var d=document.frmMain,a=document.getElementById(b+"_wrapper");if(!a)a=document.getElementById(b);if(a){a.style.display=c?"none":"block";a.value=""}}function carDropoffDifferent_checked(a,f){var c="none",b="block",e=document.frmMain,h=document.getElementById("carDropoffsection");h.style.display=a?b:c;var d=document.getElementById("carCollectionSame_div");if(d){d.style.display=a?c:b;var i=document.getElementById("carDelivery"),g=document.getElementById("carCollectionSame"),j=document.getElementById("carDeliveryLocationDiv");j.style.display=i.checked||g.checked&&!a?b:c}a&&e.carDropoffIATADisplay.value!=e.carPickupIATADisplay.value&&copyCarPickupToDropoff();f&&carLocationChanged()}function copyCarPickupToDropoff(){var a=document.frmMain,b=getRadioVal(a.carPickupType);setRadioVal(a.carPickupType,b);document.getElementById("carDropoffType_"+b).click();a.carDropoffIATA.value=a.carPickupIATA.value;a.carDropoffIATADisplay.value=a.carPickupIATADisplay.value;if(a.carDropoffType&&getRadioVal(a.carDropoffType)=="airport"){a.carDropoffIATADisplay.value=a.carDropoffIATA.value;try{kickstartDynamicAutoComplete(a.carDropoffIATADisplay,a.carDropoffIATA.value)}catch(c){}}else gOffAirportObj.copyPickupFieldsToDropoff()}function carLocationType_click(a){var b=getRadioVal(document.frmMain["car"+a+"Type"]),d=document.getElementById(a+"_airport_div"),c=document.getElementById(a+"_offairport_div");d.style.display=b=="airport"?"block":"none";c.style.display=b=="offairport"?"block":"none";carLocationChanged()}function carLocationChanged(){var g="block",f="none",e="offairport",a=false,b=document.frmMain,d=getRadioVal(b.carPickupType),c;if(window.gdsSupportsCarOneWayAltAirport==a){var m=document.getElementById("CarDropoffGroup"),j=d==e;if(j){b.carDropoffDifferent.checked=a;carDropoffDifferent_checked(a,a)}m.style.display=j?f:g}if(b.carDropoffDifferent.checked)c=getRadioVal(b.carDropoffType);else c=d;var i=document.getElementById("carvendor_div"),h=document.getElementById("offAirportVendor_div"),l=document.getElementById("offAirportVendor_img"),k=gOffAirportObj.carPickupVendor;if(k!=""&&(d==e||c==e)){i.style.display=f;h.style.display=g;l.style.backgroundImage="url(/images/trav/c/"+k+".gif)"}else{i.style.display=g;h.style.display=f}}function carDelivery_checked(d){var b=document.getElementById("carCollectionSame"),a=document.getElementById("carCollectionSame_div"),c=document.getElementById("carDeliveryLocationDiv");c.style.display=d||b.checked&&a.style.display!="none"?"block":"none"}function carCollectionSame_checked(a){var b=document.getElementById("carCollection");b.checked=a;var d=document.getElementById("carDelivery"),e=document.getElementById("carDeliveryLocationDiv");e.style.display=d.checked||a?"block":"none";var c=document.getElementById("carCollectionLocationDiv");c.style.display=a?"block":"none"}function carCollection_checked(a){var b=document.getElementById("carCollectionSame");b.checked=a;var c=document.getElementById("carCollectionLocationDiv");c.style.display=a?"block":"none"}function car_submit(a){var v="carDeliveryLocationDD",m="HomeLocation",l="CompanyLocation",g="none",u="carDeliveryDiv",t="offairport",h="isBlank",b=false,c="",y=a.carChains,e=a.carstartdate,B=a.carenddate;if(a.RuleClassOverride&&a.RuleClassOverride.options&&a.RuleClassOverride.options[a.RuleClassOverride.selectedIndex].value==c){alert(a.NoRuleClassWarning.value);a.RuleClassOverride.focus();return b}var o=b;if(CNQR.IsGovtSite){var k=document.location.href;if(k.indexOf("travelhome")>=0||k.indexOf("portal")>=0||k.indexOf("arrangerhome")>=0||k.indexOf("/home")>=0)o=true}if(o){var n="car_submit";if(!checkForSelectedAuthorization())return b;if(CNQR.cgeUIVersion>=2){if(!CNQR.TDYLocationValidation.skipTDYLocationValidation&&$$(".dutystation").length>0){TDYLocationValidation(n,[a]);return b}CNQR.TDYLocationValidation.skipTDYLocationValidation=b}if($("crossFundOrgSelect")&&CNQR.crossFundOrg&&!CNQR.crossFundOrg.skipCrossFundOrgConfirm){crossFundOrgConfirm(n,[a]);return b}if(window.CNQR.SurgeTravelDateValidation&&window.CNQR.SurgeTravelDateValidation.isSurgeTravel&&!window.CNQR.SurgeTravelDateValidation.skipSurgeTravelDateValidation){var r,f=a.carstartdate,j=a.carenddate;sDateUnformatted=JSUnformatDate(f.value);eDateUnformatted=JSUnformatDate(j.value);r=validateSurgeTravelDates(n,[a],sDateUnformatted,eDateUnformatted,f,j);if(r)return b}}!a.carDropoffDifferent.checked&&copyCarPickupToDropoff();var s=getRadioVal(a.carPickupType),p=getRadioVal(a.carDropoffType),d=Array();d.carstartdate=Array("Start Date","date");d.carenddate=Array("End Date","date");if(s=="airport"){gOffAirportObj.clearFormFields("Pickup");d.carPickupIATA=Array(cLangCarPickupLocation,h)}else{gOffAirportObj.copyPropertiesToFormFields("Pickup");d.carPickupLocationName=Array(cLangCarPickupLocation,h)}if(p=="airport"){gOffAirportObj.clearFormFields("Dropoff");d.carDropoffIATA=Array(cLangCarDropoffLocation,h)}else{gOffAirportObj.copyPropertiesToFormFields("Dropoff");d.carDropoffLocationName=Array(cLangCarDropoffLocation,h)}if(!validate_page(d))return b;if(s==t&&p==t&&a.carPickupVendor.value!=a.carDropoffVendor.value){alert(cLangOffAirportMustUseSameVendor);a.carDropoffIATADisplay.focus();return b}var f=JSUnformatDate(e.value),j=JSUnformatDate(B.value);if(f.valueOf()>j.valueOf()){alert(cLangCarStartBeforeEnd);e.focus();e.select();return b}if(f.valueOf()==j.valueOf()){var z=a.carPickupHour,w=a.carDropoffHour;if(parseInt(w.value,10)<=parseInt(z.value,10)){alert(cLangCarDropoffTimeAfterPickup);w.focus();return b}}var i=new Date,q=new Date(i.getFullYear(),i.getMonth(),i.getDate()),x=getDateDiffArray(f,i),A=x[0];if(A>330||f.getTime()<q.getTime()){alert(cLangCarPickupDateTomorrow);e.focus();e.select();return b}if(f.getTime()==q.getTime())if(!confirm(cLangCarPickupDateTodayConfirm)){e.focus();e.select();return b}if(!isUnderMaxSelectedCheckbox(y,4)){alert(cLangCarCarVendorFourMax);return b}if(a.carDeliveryLocationType){a.carDeliveryLocationType.value=c;a.carDeliveryLocationId.value=c;a.carCollectionLocationType.value=c;a.carCollectionLocationId.value=c;if($(u)){if($("Pickup_offairport_div").style.display!=g&&$(u).style.display!=g){if(a.carDelivery.checked)if(a.carDeliveryLocationDD&&a.carDeliveryLocationDD.value!=c){a.carDeliveryLocationType.value=l;a.carDeliveryLocationId.value=a.carDeliveryLocationDD.value}else if(a.carDeliveryHomeLocation&&a.carDeliveryHomeLocation.checked)a.carDeliveryLocationType.value=m;else if(a.carDeliveryLocationDD&&a.carDeliveryLocationDD.value==c){$(v).focus();alert(cLangPickDeliveryLocation);return b}else{alert(cLangPickDeliveryLocation);return b}else a.carDelivery.checked=b;if($("carCollectionSame_div").style.display!=g&&a.carCollectionSame.checked)if(a.carDeliveryLocationDD&&a.carDeliveryLocationDD.value!=c){a.carCollectionLocationType.value=l;a.carCollectionLocationId.value=a.carDeliveryLocationDD.value}else if(a.carDeliveryHomeLocation&&a.carDeliveryHomeLocation.checked)a.carCollectionLocationType.value=m;else if(a.carDeliveryLocationDD&&a.carDeliveryLocationDD.value==c){$(v).focus();alert(cLangPickCollectionLocation);return b}else{alert(cLangPickCollectionLocation);return b}else a.carCollectionSame.checked=b}if($("Dropoff_offairport_div").style.display!=g&&$("carDropoffsection").style.display=="block"&&$("carCollectionDiv").style.display!=g)if(a.carCollection.checked)if(a.carCollectionLocationDD&&a.carCollectionLocationDD.value!=c){a.carCollectionLocationType.value=l;a.carCollectionLocationId.value=a.carCollectionLocationDD.value}else if(a.carCollectionHomeLocation&&a.carCollectionHomeLocation.checked)a.carCollectionLocationType.value=m;else if(a.carCollectionLocationDD&&a.carCollectionLocationDD.value==c){$("carCollectionLocationDD").focus();alert(cLangPickCollectionLocation);return b}else{alert(cLangPickCollectionLocation);return b}else a.carCollection.checked=b}}if(typeof BookingSwitch==="function")if(typeof window.checkCteBookingSwitchRan==="undefined"){var C=BookingSwitch.InitializeConcurTravelCarTab().Send(function(a){window.checkCteBookingSwitchRan=true;a==="online"&&$("btnCarLaunchWizard").click()});return b}if(a.PreviousSearchID)a.PreviousSearchID.value=c;return portalTravelSearch(document.frmMain,"C")!=b?true:b}function clearCarLocation(b){var a="car",d=getRadioVal(document.frmMain[a+b+"Type"]),c=document.frmMain;if(d=="airport"){c[a+b+"LocationName"].value="";c[a+b+"LocationNumber"].value="";c[a+b+"Category"].value="";c[a+b+"Vendor"].value="";c[a+b+"CityName"].value="";c[a+b+"CountryCode"].value=""}else c[a+b+"IATADisplay"].value=""}function checkChains(b,d){var a=true;if(typeof b.length!="undefined"){for(var c=d;c<b.length;c++)if(b[c].checked==a){return a;break}}else if(b.checked==a)return a;return false}function isUnderMaxSelected(d,c){for(var a=0,b=0;b<d.options.length-1;b++){if(d.options[b].selected)a++;if(a>c)break}return a>c?false:true}function isUnderMaxSelectedCheckbox(d,c){for(var a=0,b=0;b<d.length-1;b++){if(d[b].checked)a++;if(a>c)break}return a>c?false:true}function checkForRemovedCarCity(d){if($("mapframe")&&exists(window.frames.mapframe.currMap)){var b=getEventTarget(d);if(b.value==""){var c=b.name,a;if(c.indexOf("Pickup")>=0)a=0;else a=1;window.frames.mapframe.currMap.removeSpecificCity(a)}}}function CarAutoCompleteIataCodeChanged(b){var a="",i=this.edit.name;b!=a&&window.populateAirportDataCache&&populateAirportDataCache(this,b);if($("mapframe")&&exists(window.frames.mapframe.currMap)){var e=window.frames.mapframe.currMap,c;if(i.indexOf("Pickup")>=0)c=0;else c=1;if(b!=a){var d=this.getCurrentAirportStruct();if(d)var g=d.xPos,h=d.yPos,f=d.mapNum;if(exists(e.arrSelectedCities[c]))if(exists(e.arrCities[b]))window.frames.mapframe.currMap.addOrUpdateCityFromForm(c,b,a,a,a,a,a);else window.frames.mapframe.currMap.addOrUpdateCityFromForm(c,b,a,a,g,h,f);else{if(exists(e.arrCities[b]))window.frames.mapframe.currMap.addOrUpdateCityFromForm(a,b,a,a,a,a,a);else window.frames.mapframe.currMap.addOrUpdateCityFromForm(a,b,a,a,g,h,f);e.formUpdated=true}}}}function carPickupChanged(){var a=document.frmMain;a.carPickupIATA.value!=""&&!a.carDropoffDifferent.checked&&copyCarPickupToDropoff()}function carCityIataSet(a){var b=getEventTarget(a);b.myPopup.onsetiata=CarAutoCompleteIataCodeChanged}function carCityReallyBlur(a){var b=getEventTarget(a);b.myPopup.onreallyblur=carPickupChanged}function initializeCarEvents(){var e="Dropoff",d="Pickup",g="carDropoffIATADisplay",c="focus",a=false,b="carPickupIATADisplay";if(!$(b))return a;addEvent(document.getElementById(b),c,carCityIataSet,a);addEvent(document.getElementById(g),c,carCityIataSet,a);addEvent(document.getElementById(b),"change",checkForRemovedCarCity,a);addEvent(document.getElementById(g),"change",checkForRemovedCarCity,a);addEvent(document.getElementById(b),c,carCityReallyBlur,a);carLocationType_click(d);carLocationType_click(e);if(!(document.frmMain&&document.frmMain.tripid)){gOffAirportObj.clearFormFields(d);gOffAirportObj.clearFormFields(e)}if(document.frmMain&&document.frmMain.tripid){f=document.frmMain;var h=gOffAirportObj.currLocationBoxName;if(f.carPickupType[1]&&f.carPickupType[1].checked){gOffAirportObj.currLocationBoxName=d;gOffAirportObj.setFields(f.carPickupVendor.value,f.carPickupIATA.value,f.carPickupCategory.value,f.carPickupLocationNumber.value,f.carPickupLocationName.value,"","",f.carPickupCityName.value,f.carPickupCountryCode.value)}if(f.carDropoffType[1]&&f.carDropoffType[1].checked){gOffAirportObj.currLocationBoxName=e;gOffAirportObj.setFields(f.carDropoffVendor.value,f.carDropoffIATA.value,f.carDropoffCategory.value,f.carDropoffLocationNumber.value,f.carDropoffLocationName.value,"","",f.carDropoffCityName.value,f.carDropoffCountryCode.value)}gOffAirportObj.currLocationBoxName=h;var i=document.getElementById("carDropoffsection");i.style.display=f.carDropoffDifferent.checked?"block":"none"}}function checkCarSearchRules(a){var d="|",e="C",f=false,b=true,i=new HttpRequest;otShowPopupDialog("",document.frmMain,{title:OTGetUserMessage("TripSegmentJs","CheckingRulesPleaseWait"),showWaitImage:b,modal:b,closeDisabled:b,destroyOnClose:b,showEffect:f});a.disabled=b;i.oncomplete=function(d,g){if(d==200){a.disabled=f;var c=g.evalJSON();if(c)if(c.returnCode==1){if(c.popupText=="")portalTravelSearch(a,e,b)&&a.submit();else CNQR.MessageBox.confirm("<div>"+c.popupText+"</div>",{title:" ",icon:CNQR.MessageBox.QuestionIcon,buttons:[{value:1,messageid:"Continue"},{value:0,messageid:"Cancel"}],onButtonClick:function(d,c){c.onhide=function(){c.onhide=function(){};if(d.value=="1")portalTravelSearch(a,e,b)&&a.submit()}}});if(c.popupText==""){otHidePopupDialog();portalTravelSearch(a,e,b)&&a.submit()}}else{otHidePopupDialog();portalTravelSearch(a,e,b)&&a.submit()}else{otHidePopupDialog();portalTravelSearch(a,e,b)&&a.submit()}}else{otHidePopupDialog();a.disabled=f;portalTravelSearch(a,e,b)&&a.submit()}};i.ontimeout=function(){a.disabled=f;otHidePopupDialog();portalTravelSearch(a,e,b)&&a.submit()};var c="",n="",m;m=$("bookFor");if(m)n=m.value;else n="";var p="",l=JSUnformatDate(a.carstartdate.value),k=JSUnformatDate(a.carenddate.value),h=l.getMonth()+1,o=l.getFullYear(),g=l.getDate();h=JSPadOut(h);g=JSPadOut(g);c=o+"-"+h+"-"+g;c+=d+a.carPickupHour.value;h=k.getMonth()+1;o=k.getFullYear();g=k.getDate();h=JSPadOut(h);g=JSPadOut(g);c+=d+o+"-"+h+"-"+g;c+=d+a.carDropoffHour.value;c+=d+getRadioVal(a.carPickupType);c+=d+a.carPickupLocationName.value;c+=d+a.carPickupIATA.value;c+=d+a.carPickupVendor.value;c+=d+a.carPickupCategory.value;c+=d+a.carPickupLocationNumber.value;c+=d+a.carDropoffDifferent.checked;c+=d+getRadioVal(a.carDropoffType);c+=d+a.carDropoffLocationName.value;c+=d+a.carDropoffIATA.value;c+=d+a.carDropoffVendor.value;c+=d+a.carDropoffCategory.value;c+=d+a.carDropoffLocationNumber.value;c+=d;var j=document.frmMain.carType;if(!j)j=document.frmMain.CarType;if(j)c+=getMultiSelectValuesList(j);p="&carData="+c;var r="/Javascript/Service/ApplySearchRules.asp",q="triptype=cs&u="+n+p;i.httpOptions.postData=q;i.httpOptions.timeout=3.6e5;i.makeRequest(r)}function trimOffAirportLocationName(b){var a;if(b=="")return b;else if(b.indexOf(" -- ")!=-1){var c=b.split(" -- ");a=c[1];if(a.length>0&&a[a.length-1]==")")a=a.substring(0,a.lastIndexOf("(")-1)}return a}var gOffAirportObj=new carOffAirportObject;addEvent(window,"load",initializeCarEvents,false);

//FileName: /javascript/travel/travelhome_air.js
var gAdvisoryDisplayed;function submitForm(c,b,a){if(window.location.toString().indexOf("twAirDates.asp")!==-1&&typeof twACAirDatesNextStep!=="undefined")twACAirDatesNextStep(a);else air_submit(c,b,a,"")}function air_submit_return(a){return a}function air_submit(a,c,d,i){var v="selectedairline",u="chk_airlinechoose",t="function",s="numHotelSearchRules",k=null,r="numAirSearchRules",q="TMAIR_searchRefPoint",e=true,b=false,f="undefined";if(document.location.pathname.indexOf("twTemplateStart.asp")>=0&&typeof air_submit_template_start!=f)return air_submit_template_start(a,c,d);if(d==1)return air_submit_return(b);var a=document.frmMain;gIsQuickTravel=e;var j=getMaxSegs(),h=parseInt(a.tripType.value,10);if(CNQR.IsGovtSite){var l="air_submit";if(!checkForSelectedAuthorization())return b;if(CNQR.cgeUIVersion>=2){if(!CNQR.TDYLocationValidation.skipTDYLocationValidation&&$$(".dutystation").length>0){TDYLocationValidation(l,[a,c,d,i]);return b}CNQR.TDYLocationValidation.skipTDYLocationValidation=b}if($("crossFundOrgSelect")&&CNQR.crossFundOrg&&!CNQR.crossFundOrg.skipCrossFundOrgConfirm){crossFundOrgConfirm(l,[a,c,d,i]);return b}if(window.CNQR.SurgeTravelDateValidation&&window.CNQR.SurgeTravelDateValidation.isSurgeTravel&&!window.CNQR.SurgeTravelDateValidation.skipSurgeTravelDateValidation){for(var p,g=0;g<=j;g++)if(g+1<=j){if(h==cTripMultiSeg&&$(q+(g+1))&&$(q+(g+1)).value=="")continue;var z=a["fltDate"+g],y=a["fltDate"+(g+1)];sDateUnformatted=JSUnformatDate(z.value);eDateUnformatted=JSUnformatDate(y.value);p=validateSurgeTravelDates(l,[a,c,d,i],sDateUnformatted,eDateUnformatted,z,y)}if(p)return b}}if(a.RuleClassOverride&&a.RuleClassOverride.options&&a.RuleClassOverride.options[a.RuleClassOverride.selectedIndex].value==""){alert(a.NoRuleClassWarning.value);a.RuleClassOverride.focus();return b}for(var m=0;m<=j;m++)if(!validateAirFields(a,m,h,c,d))return air_submit_return(b);var o=0;if($(r)!=k)o=parseInt($(r).value,10);var n=0;if($(s)!=k)n=parseInt($(s).value,10);if((o>0||n>0)&&(typeof i==f||i==b)){checkAirSearchRules(a,c,d);return b}if(typeof TravelAlternativeCalculator==t&&(typeof gSkipTravelAlternativeCalculator==f||!gSkipTravelAlternativeCalculator)){TravelAlternativeCalculator(a,c,d);return b}if(window.hooville&&window.gCheckForNonStops&&h!=cTripMultiSeg&&!OAGTester.run){var A=a.fltDepCity0.value,C=a.fltArrCity0.value,B=a.fltDate0.value,D=h==cTripRoundTrip?a.fltDate1.value:"";OAGTester.callback=function(){air_submit(a,c,d,i)};OAGTester.testForNonStops(A,C,B,D);return b}if(c>0&&h!=cTripMultiSeg&&acCheckFlightPass())acFlightPassOptions(a,c);else{var F=a["fltArrCityDisplay"+j].value;if(h==cTripMultiSeg&&j<maxAirSegs&&(typeof gAdvisoryDisplayed==f||gAdvisoryDisplayed==b)){var E=OTFormatUserMessage("tripSegmentJS","TripEndsAt",F,"\n");if(!confirm(E)){gAdvisoryDisplayed=b;return air_submit_return(b)}gAdvisoryDisplayed=e}a.NumFlightSegs.value=j;a.HighestCity.value=getHighestCity();if(typeof a.railType!=f)a.railType.value="";var w=$("fltArrCityDisplay0_airAC0"),x=$("fltDepCityDisplay0_airAC0");if(w!=k&&x!=k)var G=w.innerHTML,H=x.innerHTML;else var G="",H="";if(typeof makeAdvantageCardCheck!==f&&makeAdvantageCardCheck(G,H,h)){checkSNCFAdvantageCard("btnAirLaunchWizard");return air_submit_return(b)}if(typeof BookingSwitch===t)if(typeof window.checkCteBookingSwitchRan===f){var I=BookingSwitch.InitializeConcurTravelAirTab().Send(function(b){window.checkCteBookingSwitchRan=e;b==="online"&&air_submit(a,c,d,e)});return air_submit_return(b)}portalTravelSearch(a)}if($(u)&&$(u).checked==e&&a.dd_airlines[a.dd_airlines.selectedIndex])$(v).value=a.dd_airlines[a.dd_airlines.selectedIndex].value;else $(v).value="";return air_submit_return(e)}function getSelectedAirlineOnClick(a){$("selectedairline").value=a[a.selectedIndex].value}function acCheckFlightPass(){for(var a=0;a<=maxAirSegs;a++){if(getCountryForField(a,"Dep")=="CA")return true;if(getCountryForField(a,"Arr")=="CA")return true}return false}function acFlightPassSelect(b){b.ACFlightPassNumber.value="";var c=1;while(true){var a=$("acflightpass_"+c);if(a!=null){if(a.checked)if(a.value&&a.value.length>0){b.ACFlightPassNumber.value=a.value;break}c++}else break}if(b.ACFlightPassNumber.value.length<=0){alert(cLangACFPNoSelection);return false}else return true}function acFlightPassOptions(c,t){var r="StartDate",q="undefined",b=-1,a=true,f=",",d=false,g=new HttpRequest;g.oncomplete=function(k,i){if(k==200){c.disabled=d;var e=i.split(f),h=d;if(e.length>0)if(e[0].length>0){var j=parseInt(e[0],10);if(j>0){h=a;var g=i.substring(2);if(g.length>0)otShowPopupDialog(g,null,{modal:a,destroyOnClose:a,title:cLangACFPSelection,showWaitImage:d,showEffect:d,width:700,maxHeight:document.body.clientHeight-30});else{otHidePopupDialog();air_submit(c,b,b,a)}}}if(h!=a){otHidePopupDialog();air_submit(c,b,b,a)}}else{c.disabled=d;otHidePopupDialog();air_submit(c,b,b,a)}};g.ontimeout=function(){c.disabled=d;otHidePopupDialog();var e=confirm(cLangACFPTimeout);e&&air_submit(c,b,b,a)};for(var k=getMaxSegs(),w=parseInt(c.tripType.value,10),e="",l=0;l<=k;l++){var n=c["fltDepCity"+l].value,m=c["fltArrCity"+l].value;if(n.length>0&&e.indexOf(f+n+f)<0){if(e.length>0)e+=f;e+=n}if(m.length>0&&e.indexOf(f+m+f)<0){if(e.length>0)e+=f;e+=m}}var j=null;if(typeof c["fltDate"+k]!=q)j=c["fltDate"+k];else for(var i=k+1;i>0;i--)if(typeof c[r+i]!=q){j=c[r+i];break}if(j!=null){otShowPopupDialog("",document.frmMain,{title:cLangACFPSearch,showWaitImage:a,modal:a,closeDisabled:a,destroyOnClose:a,showEffect:d});c.disabled=a;var h=JSUnformatDate(j.value),s="";if(h){var p=h.getMonth()+1,v=h.getFullYear(),o=h.getDate();p=JSPadOut(p);o=JSPadOut(o);s="&date="+v+"-"+p+"-"+o}var u="/Javascript/Service/GetACFlightPass.asp";g.httpOptions.postData="bookforid="+t+"&cities="+e+s;g.httpOptions.timeout=3.6e5;g.makeRequest(u)}else air_submit(c,b,b,a)}function validateAirFields(b,a,e,z,B){var q="TravelAvailabilityJS",p="TripSegmentJs",d="fltDate",c=false,o="fltDepCityDisplay";if(!(e==cTripRoundTrip&&a==1)){var f=b["fltDepCity"+a],l=b["fltArrCity"+a];if(isBlank(f.value)){alert(cLangPlsEnterAirport);b[o+a].focus();return c}if(isBlank(l.value)){alert(cLangPlsEnterAirport);b["fltArrCityDisplay"+a].focus();return c}if(l.value==f.value){try{var h,w;h=l.value;w=h.charCodeAt(0)*h.charCodeAt(1)*h.charCodeAt(2);w==381096&&window.open("/errors/eErr1.asp")}catch(D){}alert(cLangSameCityAlert);f.focus();f.select();return c}if(a>1){var A=b.fltDepCity0;if(f.value==A.value){alert(cLangAlreadyHomeAlert);return c}}}var s=b["chkCarNeeded"+a];if(s&&s.checked){var n=b["chkCarAutoBook"+a],j=b["ddCarVendor"+a],k=b["ddCarType"+a];if(n&&j&&k&&n.checked){if(j.selectedIndex==0){alert(cLangPlsChooseCarVendor);j.focus();return c}if(k.selectedIndex==0){alert(cLangPlsChooseCarType);k.focus();return c}}}var v=b["chkHotelNeeded"+a];if(v&&v.checked){var t=e==cTripRoundTrip?JSUnformatDate(b.fltDate0.value):JSUnformatDate(b[d+a].value),r=e==cTripRoundTrip?JSUnformatDate(b.fltDate1.value):JSUnformatDate(b[d+(a+1)].value);if(t.getTime()==r.getTime()){var y=e==cTripRoundTrip?b.fltDepCityDisplay1.value:b[o+(a+1)].value;alert(OTFormatUserMessage(p,"NoHotelWhenArriveDepartDateSame",y));return c}if(getDateDiffArray(t,r)[0]>99){alert(cLangHotel99Days);theForm.hotelEndDate.focus();theForm.hotelEndDate.select();return c}var m=b["distanceMax"+a];if(!isPosNumber(m.value)){alert(OTFormatUserMessage("TripHotelJs","MaximumDistanceMustBeAWholeNumber",99));m.focus();m.select();return c}if(!gArrGeocodeHotelOK[a]){var i=document.getElementById("geocode_maindiv"+a);if(i&&i.scrollIntoView)i.scrollIntoView(true);else theForm["fltDateSet"+a].focus();gEvalNextAction="air_submit(document.frmMain,"+z+","+B+")";SendGeoCode(a,true);return c}}var u=OTGetUserMessage(q,"DepartureDate");if(e==cTripRoundTrip&&a==1)u=OTGetUserMessage(q,"ReturnDate");if(!check_ff_Date(b[d+a],u))return c;for(var g=0;g<=getMaxSegs();g++)if(g+1<=getMaxSegs()){var C=b[d+g],x=b[d+(g+1)];sDateUnformatted=JSUnformatDate(C.value);eDateUnformatted=JSUnformatDate(x.value);if(sDateUnformatted>eDateUnformatted){x.focus();alert(OTFormatUserMessage(p,"BeSureDatesAreSequential"));return c}}return true}function getMaxSegs(){var a=0,c=parseInt(document.frmMain.tripType.value,10);switch(c){case cTripOneWay:a=0;break;case cTripRoundTrip:a=1;break;default:for(var b=0;b<=maxAirSegs;b++){var e=document.frmMain["fltDepCityDisplay"+b],d=document.frmMain["fltArrCityDisplay"+b];if(e.value==""||d.value==""){a=b-1;break}else a=b}if(a==-1)a=0}return a}function getMaxSegsForFlexFaring(){var a=0,b=parseInt(document.frmMain.tripType.value,10);switch(b){case cTripOneWay:case cTripRoundTrip:a=0;break;default:a=getMaxSegs()}return a}function getHighestCity(){var c="fltArrCity",b=2,e=document.frmMain.tripType.value;if(e==cTripMultiSeg)for(var a=1;a<=maxAirSegs;a++){var d=document.frmMain["fltDepCity"+a],g=document.frmMain[c+a];if(d.value!=""&&g.value!=""){b++;var f=document.frmMain[c+(a-1)];d.value==f.value}}else b=2;return b}function flightSegsDisplay(e){var c="dutyStation_maindiv";for(var b=e=="show"?"block":"none",a=0;a<=minSegsMulti;a++){document.getElementById("flightseg_"+a).style.display=b;document.getElementById("flightseg_airports_"+a).style.display=b;document.getElementById("div_datetime_"+a).style.display=b;if(document.getElementById(c+a))document.getElementById(c+a).style.display=b;var d=document.getElementById("AddCarAndHotelDiv_"+a);if(d)d.style.display="block"}}function parseSize(a){var b=0;rexp=/^(\d+)(px)?$/i;if(a!=null&&rexp.test(a))b=parseFloat(a.toString().replace(rexp,"$1"));return b}function recalculateIataDivsOffsetLeft(){var d="iataCodefltArrCityDisplay0_airAC",c="iataCodefltDepCityDisplay0_airAC";if($(c)!=null){var a=$("fltDepCityDisplay0"),b=parseInt(a.offsetLeft,10)||0;$(c).style.left=parseSize(a.offsetWidth)-30+b+"px"}if($(d)!=null){var a=$("fltArrCityDisplay0"),b=parseInt(a.offsetLeft,10)||0;$(d).style.left=parseSize(a.offsetWidth)-30+b+"px"}}function changeTripType(l){var u="DepartureInputAriaLabel",t="DepartureSegTipTitle",s="aria-label",r="ReturnInputAriaLabel",i="#fltDate1",q="ReturnSegTipTitle",h="#div_datetime_1 div a span.screen-reader-only",c="MultiAirportDiv1",b="MultiAirportDiv0",g="dutyStation_maindiv0",p="flightsearchdiv",k="flightTabDiv",f="none",o="AddCarAndHotelDiv_0",n="div_datetime_0",m="flightseg_airports_",a="block",j="flightseg_",e=$$("#div_datetime_1 div span[data-id=dateLegendText]"),v=$$("[data-id=dateLegendText]");switch(parseInt(l,10)){case cTripRoundTrip:unHighlightAllFlightSegs();flightSegsDisplay("hide");document.getElementById(j+0).style.display=a;document.getElementById(m+0).style.display=a;document.getElementById(n).style.display=a;document.getElementById(j+1).style.display=a;document.getElementById("div_datetime_1").style.display=a;document.getElementById(o).style.display=f;if(e.length)e[0].innerHTML=cLangReturn;document.getElementById(k).className=p;if(document.getElementById(g))document.getElementById(g).style.display="";if($(b))$(b).style.display=a;if($(c))$(c).style.display=a;if($$(h).length&&$(q)!=null)$$(h)[0].innerHTML=$F(q);$$(i).length&&$(r)&&$$(i)[0].setAttribute(s,$F(r));break;case cTripOneWay:unHighlightAllFlightSegs();flightSegsDisplay("hide");document.getElementById(j+0).style.display=a;document.getElementById(m+0).style.display=a;document.getElementById(n).style.display=a;document.getElementById(o).style.display=f;document.getElementById(k).className=p;if(document.getElementById(g))document.getElementById(g).style.display="";if($(b))$(b).style.display=a;if($(c))$(c).style.display=a;break;case cTripMultiSeg:flightSegsDisplay("show");if(e.length)e[0].innerHTML=OTGetUserMessage("TravelAvailabilityJS","Depart");document.getElementById(k).className="multisegsearch";for(var d=0;d<6;d++){kickstartDynamicAutoComplete("fltDepCityDisplay"+d,$("fltDepCity"+d).value);kickstartDynamicAutoComplete("fltArrCityDisplay"+d,$("fltArrCity"+d).value)}if($(b))$(b).style.display=f;if($(c))$(c).style.display=f;if($$(h).length&&$(t)!=null)$$(h)[0].innerHTML=$F(t);$$(i).length&&$(u)!=null&&$$(i)[0].setAttribute(s,$F(u))}recalculateIataDivsOffsetLeft();document.frmMain.tripType.value=l;setMapTripType(l);setFlexFareOrShopType()}function unHighlightAllFlightSegs(){for(var a=0;a<=maxAirSegs;a++){currSeg=document.getElementById("flightseg_"+a);currSeg.className="flightseg"}}function setTimeSide(a){var b=a[a.selectedIndex].value;document.frmMain[a.name.replace("Set","")].value=b}function setTimeSide2(c){var a=getEventTarget(c),b=a[a.selectedIndex].value;document.frmMain[a.name.replace("Set","")].value=b}function chkHotelNeeded_Checked(c,b){var e=$("divHotelLocationSection"+b);e.style.display=c.checked?"table-row":"none";if(c.checked){var d=getRadioVal(document.frmMain["hotelSearchtype"+b]);if(d=="airport"){var a=$("searchAirportDisplay"+b);a&&a.value!=""&&kickstartDynamicAutoComplete(a.id,a.value)}}}function CarNeededChanged(segnum){var chkCarNeeded=eval("document.frmMain.chkCarNeeded"+segnum),chkAutoBookBox=eval("document.frmMain.chkCarAutoBook"+segnum),carNeeded=eval("document.frmMain.carNeeded"+segnum),carPromoSelect=eval("document.frmMain.carPromoCodeVendor"+segnum),carPromoInput=eval("document.frmMain.carPromoCode"+segnum);if(carNeeded)carNeeded.value=chkCarNeeded.checked?1:"";if(chkAutoBookBox&&!chkCarNeeded.checked){chkAutoBookBox.checked=0;CarAutoBookChanged(segnum);if(carPromoSelect&&carPromoInput){carPromoSelect.value="";carPromoInput.value="";carPromoSelect.disabled=1;carPromoInput.disabled=1;CarPromoChanged(segnum)}}else if(chkCarNeeded.checked)if(carPromoSelect&&carPromoInput){carPromoSelect.disabled=0;carPromoInput.disabled=0}}function CarPromoChanged(segnum){var chkBox=eval("document.frmMain.chkCarAutoBook"+segnum),carPromoSelect=eval("document.frmMain.carPromoCodeVendor"+segnum);if(chkBox&&carPromoSelect)if(carPromoSelect.selectedIndex>0)chkBox.disabled=1;else chkBox.disabled=0}function CarAutoBookChanged(segnum){var chkBox=eval("document.frmMain.chkCarAutoBook"+segnum),chkNeedCarBox=eval("document.frmMain.chkCarNeeded"+segnum),carPromoSelect=eval("document.frmMain.carPromoCodeVendor"+segnum),carPromoInput=eval("document.frmMain.carPromoCode"+segnum),carAutoBuyDiv=document.getElementById("CarAutoBookDiv"+segnum);if(chkBox)if(chkBox.checked){carAutoBuyDiv.style.display="table-row";chkNeedCarBox.checked=1;if(carPromoSelect){carPromoSelect.disabled=1;carPromoSelect.value=""}if(carPromoInput){carPromoInput.disabled=1;carPromoInput.value=""}}else{if(carPromoSelect)carPromoSelect.disabled=0;if(carPromoInput)carPromoInput.disabled=0;carAutoBuyDiv.style.display="none";var ddCarType=eval("document.frmMain.ddCarType"+segnum),ddCarVendor=eval("document.frmMain.ddCarVendor"+segnum),cv=eval("document.frmMain.carVendor"+segnum),ct=eval("document.frmMain.carType"+segnum);if(cv)cv.value="";if(ct)ct.value=""}}function makeFlightWidgetToolTipText(b){var a=cLangFlightWidgetHelp;otShowPopupHelp(a,b,{width:"300px",showClose:true})}function makeAirportToolTipText(c,b){var a=cLangAirportSelectorHelp;a+='<div style="margin:10px;text-align:center;"><a role="button" href="javascript:void(0);" onclick="javascript: popupNearestAirports(\''+b+"');\">"+cLangHelpMeFindAnAirport+"</a></div>";otShowPopupHelp(a,c,{width:"300px",showClose:true})}function popupNearestAirports(a){popupWindow("/twPopup/nearest_airport_search.asp?kickstartFormField="+escape(a),"nearestairport",785,555,"status=1,scrollbars=1,resizable=1,modal=yes,dialog=yes,dependent=yes,");otHidePopupHelp()}function advanceNextAirDates(a){var c=document.getElementById("fltDate"+a),b=document.getElementById("fltDate"+(parseInt(a,10)+1));if(b!=null){compareDateFieldsAndAdd("d",1,c,b);advanceNextAirDates(parseInt(a,10)+1)}}function checkForRemovedCity(g){if(window.frames.mapframe&&window.frames.mapframe.currMap){var b=getEventTarget(g),a=b.name,c=a.indexOf("Arr")>0,f=a.substring(a.length-1),e=c?1:0,d=f*2+e;b.value==""&&window.frames.mapframe.currMap.removeSpecificCity(d)}}function checkReturnToStart(){var a=false;if(document.frmMain.tripType.value==cTripRoundTrip)a=true;else if(getHighestCity()==3&&document.frmMain.fltDepCity0.value==document.frmMain.fltArrCity1.value)a=true;return a}function getShopType(){var a=0;if(document.frmMain.shopType.length>1)if($("shopType1").checked==true)a=1;return a}function airCityIataSet(a){var b=getEventTarget(a);b.myPopup.onsetiata=AirAutoCompleteIataCodeChanged}function airCityReallyBlur(b){var a=getEventTarget(b);a.myPopup.onreallyblur=airportChanged;a.name.indexOf("Dep")>0&&populateDepFromPrevArrAirport(a)}function AirAutoCompleteIataCodeChanged(b){var a="",e=this,d=e.edit.name,j=d.indexOf("Arr")>0,l=d.substring(d.length-1),f;if(d=="fltDepCityDisplay0")f="MultiAirportListDisplay0";else if(d=="fltArrCityDisplay0")f="MultiAirportListDisplay1";var i=$(f);if(i){i.style.display="none";$(f.replace(/Display/,a)).value=a}j&&updateAddHotelFields(e,b,l);setDefaultTimeWindows(e.edit);if(b.length<3)return;if(b!=a){populateAirportDataCache(e,b);$("railRefundable_div")&&getRailRefundableCheckboxStatus()}setFlexFareOrShopType();if(window.frames.mapframe&&window.frames.mapframe.currMap){var h=window.frames.mapframe.currMap,o=j?1:0,g=l*2+o;if(b!=a){var c=e.getCurrentAirportStruct();if(c){var m=c.xPos,n=c.yPos,k=c.mapNum;b=c.airportKey}if(exists(h.arrSelectedCities[g]))if(exists(h.arrCities[b]))window.frames.mapframe.currMap.addOrUpdateCityFromForm(g,b,a,a,a,a,a);else window.frames.mapframe.currMap.addOrUpdateCityFromForm(g,b,a,a,m,n,k);else if(exists(h.arrCities[b]))window.frames.mapframe.currMap.addOrUpdateCityFromForm(a,b,a,a,a,a,a);else window.frames.mapframe.currMap.addOrUpdateCityFromForm(a,b,a,a,m,n,k)}window.frames.mapframe.gMapLoaded=true}}function airportChanged(){var a=this.edit,b=a.name.indexOf("Arr")>0;b==true&&updateNextDepart(a);setFlexFareOrShopType()}function setDefaultTimeWindows(k){for(var a=k.name.substring(k.name.length-1),d,e,i,j,b,c,g,h,l=0;l<=a;l++){d=$("fltDepCityDisplay"+a);e=$("fltArrCityDisplay"+a);if(d.value!=""&&e.value!=""){i=d.myPopup;j=e.myPopup;b=i.getCurrentAirportStruct();c=j.getCurrentAirportStruct();if(b&&c){if(airUseDomesticTimeWindowForIntraRegion){g=b.airportRegion;h=c.airportRegion}else{g=b.countryCode.toUpperCase();h=c.countryCode.toUpperCase()}var m=parseInt(document.frmMain.tripType.value,10)==cTripRoundTrip,f=g!=h;if(m==true){setDefaultTimeWindow(0,f);setDefaultTimeWindow(1,f)}else setDefaultTimeWindow(a,f)}}}}function setDefaultTimeWindow(c,b){var a=$("windowBeforeSet"+c);if(b==true)a[a.selectedIndex].value<gDefaultTimeWindowInternational&&setDDIndexByValue(a,gDefaultTimeWindowInternational.toString());else setDDIndexByValue(a,gDefaultTimeWindowDomestic.toString())}function updateNextDepart(b){var d="tripTypeMulti";if(document.getElementById(d)&&document.getElementById(d).checked==true){var a=b.name.substring(b.name.length-1),e=document.frmMain["fltDepCity"+(parseInt(a,10)+1)];if(exists(e)&&e!=null){var g=document.frmMain["fltArrCity"+a].value,f=b.myPopup.getCurrentAirportStruct();f&&copyArrToNextDepart(b,g)}if(a>=3){var c=$("fltDepCityDisplay"+a);c.value.length==3&&kickstartDynamicAutoComplete(c,c.value)}}}function copyArrToNextDepart(b,d){var f=b.name.substring(b.name.length-1),e=parseInt(f,10)+1,c=document.getElementById("fltDepCityDisplay"+e);if(c!=null&&b.value.length>=3)if(c.value=="")try{var a=b.myPopup.getCurrentAirportStruct();if(a)if(a.cityCode!=a.airportKey&&a.airportKey!="")d=a.airportKey;else d=a.cityCode;kickstartDynamicAutoComplete(c,d)}catch(g){return}}function populateDepFromPrevArrAirport(e){var b=e.name,c=b.charAt(b.length-1);if(c!=""&&parseInt(c,10)>0){var d=$(b.replace("Display",""));if(d&&d.value==""){var a=$("fltArrCity"+(c-1));a&&a.value!=""&&kickstartDynamicAutoComplete(e,a.value)}}}function initializeAirEvents(){var g="fltClassInitialSet",f="change",e="fltArrCityDisplay",b=false,d="focus",c="fltDepCityDisplay";if(!window.maxAirSegs)return;for(var a=0;a<=maxAirSegs;a++){addEvent($(c+a),d,airCityIataSet,b);addEvent($(e+a),d,airCityIataSet,b);addEvent($(c+a),f,checkForRemovedCity,b);addEvent($(e+a),f,checkForRemovedCity,b);addEvent($("timeSideSet"+a),f,setTimeSide2,b);addEvent($(e+a),d,airCityReallyBlur,b);addEvent($(c+a),d,airCityReallyBlur,b);$(c+a).setAttribute("prefix",a);$(e+a).setAttribute("prefix",a);flip_search_type("",a);$("TMAIR_div_TM_refpoint"+a)&&flip_search_type_tdy("TMAIR_RefPoint",a)}try{kickstartDynamicAutoComplete(document.frmMain.fltDepCityDisplay0,document.frmMain.fltDepCityDisplay0.value)}catch(i){}if($(g)){var h=$(g)[$(g).selectedIndex].value;flightClassChanged_search(h)}}function updateAddHotelFields(h,c,o){var j=parseInt(document.frmMain.tripType.value,10);if(j==cTripOneWay)return;if(j==cTripMultiSeg&&o>=maxAirSegs)return;var a=j==cTripRoundTrip?"1":o,m=document.getElementById("searchAirport"+a);if(m==null)return;var d=document.getElementById("searchAirportDisplay"+a),g=document.getElementById("searchRefPoint"+a),i=document.getElementById("searchCountry"+a),f=document.getElementById("hotelLatitude"+a),e=document.getElementById("hotelLongitude"+a);m.value=c;d.value=c;d&&c!=""&&kickstartDynamicAutoComplete(d,c);if(c!=""){var b=h.getCurrentAirportStruct();if(b){var n=h.edit.form["hotelSearchtype"+a];gArrGeocodeHotelOK[a]=getRadioVal(n)!="location"?true:false;if(getRadioVal(n)=="refpoint"){f.value=b.cityLatitude;e.value=b.cityLongitude;$("searchHotelAddress"+a).value="";$("searchHotelCity"+a).value=b.cityName;$("searchHotelState"+a).value=b.state;$("searchHotelPostalCode"+a).value="";$("searchHotelCountry"+a).value=b.countryCode}else{f.value=b.latitude;e.value=b.longitude}g.value=b.cityName+", ";g.value+=b.state?b.state:b.countryName;setDDIndexByValue(i,b.countryCode);i.onchange&&i.onchange();hotelAirportChanged(b.airportKey,h,a)}}else{f.value="";e.value="";g.value="";var k=document.getElementById("searchCompanyLocation"+a);if(k){k.options.length=0;var l=new Option;l.text=OTGetUserMessage("Geocode","NoCompanyLocationsGeocoded");l.value="";k.options[0]=l}gArrGeocodeHotelOK[a]=false}}function addSegment(a){var b="dutyStation_maindiv";if($(b+(a+1)))$(b+(a+1)).style.display="block";$("flightseg_"+(a+1)).style.display="block";if($("addseg_"+a))$("addseg_"+a).style.display="none";if($("remseg_"+a))$("remseg_"+a).style.display="none";minSegsMulti++}function removeSegment(a){var d="chkHotelNeeded",e="chkCarNeeded",b="fltDepCityDisplay",c="fltArrCityDisplay";if($(c+a).value!=""){$(c+a).value="";removeCityFromMap(a,true)}if($(b+a).value!=""&&$(b+a).value!=$(c+(a-1)).value){$(b+a).value="";removeCityFromMap(a,false)}if($(b+(a+1)))$(b+(a+1)).value="";$("fltDate"+a).value="";if($(e+a)){$(e+a).checked=false;CarNeededChanged(a)}if($(d+a)){$(d+a).checked=false;chkHotelNeeded_Checked($(d+a),a)}$("flightseg_"+a).style.display="none";if($("addseg_"+(a-1)))$("addseg_"+(a-1)).style.display="inline";if($("remseg_"+(a-1)))$("remseg_"+(a-1)).style.display="inline";minSegsMulti--}function removeCityFromMap(){if(window.frames.mapframe&&window.frames.mapframe.currMap){window.frames.mapframe.currMap.RemoveCityFromEnd();window.frames.mapframe.currMap.isOpenJaw=false}}function updateSettingForRailShopType(){var c="railShopType",b="shopType1";if($(b)){var a=$(b).checked==true?1:0;if($(c+a)){var d=$(c+a);$("railSearchBySet").value=$("fltSearchBySet").value;d.checked!=true&&d.click()}}}function flightClassChanged_search(b){var a="fltClass_Search";if($(a))$(a).value=b;setShopTypeFromFlightClassSel(b)}function setShopTypeFromFlightClassSel(i){var h="selectShopType1",a="fltSearchBySet",d="#ffffff",g="shopType1_label",c=true,b="shopType1",f="shopType0",e=CNQR.IsGateway?"#F4A900":"#FFFF00";if($(f)&&$(b)&&window.hooville!=c){if(i!="Y"){if($(b).checked==false){$(b).checked=c;new Effect.Highlight($(g),{duration:1,startcolor:e,endcolor:d})}if($(a))if($(a).selectedIndex!==$(h).value){$(a).selectedIndex=1;new Effect.Highlight($(a),{duration:1,startcolor:e,endcolor:d})}}}else if($(f)&&$(b)&&window.hooville==c)if(i.indexOf("H_")!=-1){if($(b).checked==false){$(b).checked=c;new Effect.Highlight($(g),{duration:1,startcolor:e,endcolor:d})}if($(a))if($(a).selectedIndex!==$(h).value){$(a).selectedIndex=1;new Effect.Highlight($(a),{duration:1,startcolor:e,endcolor:d})}}updateSettingForRailShopType();updatePrevShopType()}function setClassToY(){var a="fltClassInitialSet";if($(a))if($(a).selectedIndex!=0){var b=CNQR.IsGateway?"#F4A900":"#FFFF00";$(a).selectedIndex=0;flightClassChanged_search($F(a));new Effect.Highlight($(a),{duration:1,startcolor:b,endcolor:"#ffffff"})}}function setClassToNotHighest(){var a="fltClassInitialSet";if($(a))if($(a).selectedIndex>0)if($(a).options[$(a).selectedIndex].value.indexOf("H_")!=-1){var b=CNQR.IsGateway?"#F4A900":"#FFFF00";$(a).selectedIndex=0;flightClassChanged_search($F(a));new Effect.Highlight($(a),{duration:1,startcolor:b,endcolor:"#ffffff"})}}function setFlexFareOrShopType(){var k="FI",j="DK",i="NO",h="SE",l=false,o="IsEvature",e=true,a=e,b="";if($(o)&&$(o).value=="1")return;if(gFlexFaring>0){for(var p=getMaxSegsForFlexFaring(),m={},g=0;g<=p;g++){var b=getCountryForField(g,"Dep");if(b)m[b]=b;b=getCountryForField(g,"Arr");if(b)m[b]=b}var f=Object.keys(m);if(f.length==1){var b=f[0];a=l;if(b=="CA"&&gFlexFaring&cFlexFare_Canada)a=e;else if((b=="AU"||b=="NZ")&&gFlexFaring&cFlexFare_Australia)a=e;else if(b=="IN"&&gFlexFaring&cFlexFare_India)a=e;else if((b==h||b==i||b==j||b==k)&&gFlexFaring&cFlexFare_Nordics)a=e}else if(f.length==2){var c=f[0],d=f[1];a=l;if((c=="AU"&&d=="NZ"||c=="NZ"&&d=="AU")&&gFlexFaring&cFlexFare_Australia)a=e;if((c==h&&d==i||c==i&&d==h)&&gFlexFaring&cFlexFare_Nordics)a=e;if((c==h&&d==j||c==j&&d==h)&&gFlexFaring&cFlexFare_Nordics)a=e;if((c==i&&d==j||c==j&&d==i)&&gFlexFaring&cFlexFare_Nordics)a=e;if((c==k&&d==j||c==j&&d==k)&&gFlexFaring&cFlexFare_Nordics)a=e;if((c==k&&d==i||c==i&&d==k)&&gFlexFaring&cFlexFare_Nordics)a=e;if((c==k&&d==h||c==h&&d==k)&&gFlexFaring&cFlexFare_Nordics)a=e}else if(f.length>2){for(var n=0,g=0;g<f.length;g++)if((f[g]==k||f[g]==j||f[g]==i||f[g]==h)&&gFlexFaring&cFlexFare_Nordics)n++;if(n==f.length)a=e;else a=l}else a=l;toggleFlexFares_SearchType(a);toggleFlexFares_FlightClass(a)}updateSettingForAirShopType(-1)}function getRailRefundableCheckboxStatus(){var a="block",b="SNCFPromoFaresAirDiv",e="directTrainsOnly_div",d="none",c="railRefundable_div",f="TR,HU,UA,AT,GB,BY,DE,BE,IT,NL,GR,SE,CZ,MA,RO,SI,YU,BG,IE,DK,CH,HR,LT,PL,LV,FR,MK,SK,ES,NO,FI,PT,RU,LU",i=false,h,g;if(otTrim($("fltDepCityDisplay0").value)==""||otTrim($("fltArrCityDisplay0").value)=="")return;var h=getCountryForField(0,"Dep"),g=getCountryForField(0,"Arr");$(c).style.display=d;$(e).style.display=d;if($(b))$(b).style.display=d;if(gIsSNCFEnabled){if(f.indexOf(h)!=-1&&f.indexOf(g)!=-1){$(c).style.display=a;$(e).style.display=a;if($(b))$(b).style.display=a}}else if(gIsDeutscheBahnEnabled)if(h=="DE"||g=="DE"){$(c).style.display=a;$(e).style.display=a}}function getCountryForField(c,b){var a=$("flt"+b+"CityDisplay"+c);if(!a)a=$("flt"+b+"CityActualSet"+c);if(!a&&b=="Arr")a=$("fltDepCityActualSet"+(c+1));if(a&&a.value&&a.myPopup){var d=a.myPopup.getCurrentAirportStruct();if(d)return d.countryCode}return null}function updatePrevShopType(){var d="shopType2",c="shopType1",b="shopType0",a="prevShopType";if($(a)){if($(b))if($(b).checked)$(a).value="0";if($(c))if($(c).checked)$(a).value="1";if($(d))if($(d).checked)$(a).value="2"}}function selectPrevShopType(){var e="shopType2",d="shopType1",b="true",c="shopType0",a="prevShopType";if($(a))if($(a).value=="0"){if($(c))$(c).checked=b}else if($(a).value=="1"){if($(d))$(d).checked=b}else if($(a).value=="2")if($(e))$(e).checked=b}function toggleFlexFares_SearchType(f){var e="chk_refundablediv",d="none",g="shopType1",c="block",b="flexfaretext",a="shoptyperadios",h=$("isFlex");if(h)h.value=f?"1":"0";if(!($(a)&&$(b)))return;if(f==true&&$(a)){$(b).style.display=c;if($(g)){updatePrevShopType();$(g).checked="true"}$(a).style.display=d}else{$(b).style.display=d;$(a).style.display=c;selectPrevShopType()}if($(e))if(f==true)$(e).style.display=d;else $(e).style.display=c}var gMixedClassSet=false;function toggleFlexFares_FlightClass(k){var e=null,i="shopTypeSet2",h="div_flightclass",g="defaultFlexFaringMixedClass",d="MixOptionLabel",a="fltClassInitialSet",j=0,c,l,b;if($(a))if(k==true){if($(d)&&$(g)&&$(g).value=="True"&&!gMixedClassSet){$A($(a).options).find(function(a){return a.innerHTML==$F(d)}).selected=true;gMixedClassSet=true}}else{$(h).style.display="block";if($(i))if($(i).checked)$(h).style.display="none";if($(a)){for(var f=0;f<$(a).options.length;f++)if($(a).options[f].value.indexOf("H_")!=-1)j++;if(j==0){c=document.getElementById("MixOptionValue");b=document.getElementById(d);if(c!=e&&b!=e){opt=new Option;opt.text=b.value;opt.value=c.value;$(a).options[$(a).options.length]=opt}c=document.getElementById("HighestOptionValue");b=document.getElementById("HighestOptionLabel");if(c!=e&&b!=e){opt=new Option;opt.text=b.value;opt.value=c.value;$(a).options[$(a).options.length]=opt}}}}}function cleanHttpDate(a){var d="";if(a){var c=a.getMonth()+1,e=a.getFullYear(),b=a.getDate();c=JSPadOut(c);b=JSPadOut(b);d=e+"-"+c+"-"+b}return d}function checkAirSearchRules(a,l,m){var h="|",n="-",t="fltDate",k="undefined",e=false,d=true,g="",p=new HttpRequest;otShowPopupDialog(g,document.frmMain,{title:OTGetUserMessage("TripSegmentJs","CheckingRulesPleaseWait"),showWaitImage:d,modal:d,closeDisabled:d,destroyOnClose:d,showEffect:e});a.disabled=d;p.oncomplete=function(c,f){if(c==200){a.disabled=e;var b=f.evalJSON();if(b)if(b.returnCode==1){if(b.popupText==g)air_submit(a,l,m,d);else CNQR.MessageBox.confirm("<div>"+b.popupText+"</div>",{title:" ",icon:CNQR.MessageBox.QuestionIcon,buttons:[{value:1,messageid:"Continue"},{value:0,messageid:"Cancel"}],onButtonClick:function(c,b){b.onhide=function(){b.onhide=function(){};if(c.value=="1")air_submit(a,l,m,d);else if(typeof gSkipTravelAlternativeCalculator!=k)gSkipTravelAlternativeCalculator=e}}});if(b.popupText==g){otHidePopupDialog();a.disabled=e;air_submit(a,l,m,d)}}else{otHidePopupDialog();a.disabled=e;air_submit(a,l,m,d)}else{otHidePopupDialog();a.disabled=e;air_submit(a,l,m,d)}}else{otHidePopupDialog();a.disabled=e;air_submit(a,l,m,d)}};p.ontimeout=function(){a.disabled=e;otHidePopupDialog();air_submit(a,l,m,d)};var I=getMaxSegs(),C=parseInt(a.tripType.value,10),c=g,f=g,r=g,o;o=$("AssisteeUserID");if(o)if(parseInt(o.options[o.selectedIndex].IsGuest,10)==1)r=o.options[0].value;else r=o.value;else r=g;for(var z=g,F=g,E=g,b=0;b<=I;b++){var y=a["fltDepCity"+b].value,x=a["fltArrCity"+b].value;if(c.length>0)c+=",";if(y.length>0)c+=y;else c+=E;if(c.length>0)c+=",";if(x.length>0)c+=x;else c+=F;if(c.length>0)c+=",";var q=JSUnformatDate(a[t+b].value);if(q){var j=q.getMonth()+1,s=q.getFullYear(),i=q.getDate();j=JSPadOut(j);i=JSPadOut(i);c+=s+n+j+n+i}else c+="1999-01-01";var w=a["timeSideSet"+b];if(c.length>0)c+=",";if(w)c+=w.options[w.selectedIndex].value;else c+="D";var D=a["fltTime"+b].value;if(c.length>0)c+=",";if(D)c+=D;else c+="9";z+="&routedata"+b+"="+c;var B=a["chkHotelNeeded"+b];if(B&&B.checked){var v=C==cTripRoundTrip?JSUnformatDate(a.fltDate0.value):JSUnformatDate(a[t+b].value),u=C==cTripRoundTrip?JSUnformatDate(a.fltDate1.value):JSUnformatDate(a[t+(b+1)].value),j=v.getMonth()+1,s=v.getFullYear(),i=v.getDate();j=JSPadOut(j);i=JSPadOut(i);f=s+n+j+n+i;j=u.getMonth()+1;s=u.getFullYear();i=u.getDate();j=JSPadOut(j);i=JSPadOut(i);f+=h+s+n+j+n+i;f+=h+a["distanceMax"+b].value;f+=h+a["distanceScale"+b].value;var A=getRadioVal(a["hotelSearchtype"+b]);f+=h+A;switch(A){case"location":var G=a["searchCompanyLocation"+b];f+=h+G.options[G.selectedIndex].getAttribute("locationid");break;case"address":case"refpoint":f+=h+a["searchHotelAddress"+b].value;f+=h+a["searchHotelCity"+b].value;f+=h+a["searchHotelState"+b].value;f+=h+a["searchHotelPostalCode"+b].value;f+=h+a["searchHotelCountry"+b].value;f+=h+a["hotelLatitude"+b].value;f+=h+a["hotelLongitude"+b].value;break;case"airport":f+=h+a["searchAirport"+b].value}z+="&hoteldata"+b+"="+f}c=g;F=y;E=x}var J="/Javascript/Service/ApplySearchRules.asp",H="triptype=as&u="+r+z+"&refundable="+(typeof a.penaltySet==k?e:a.penaltySet.checked)+"&numPax="+(typeof a.numCompanions==k?0:a.numCompanions.value)+"&cabin="+(typeof a.fltClassInitialSet==k?"Y":a.fltClassInitialSet.value)+"&shoptype="+(typeof a.shopType==k?"0":getRadioVal(a.shopType))+"&tripTypeSet="+getRadioVal(a.tripTypeSet);p.httpOptions.postData=H;p.httpOptions.timeout=3.6e5;p.makeRequest(J)}var OAGTester=new function(){var b=true,c="tripsegmentjs",a=null,d=this;d.resultCache={};d.run=false;d.callback=function(){};d.messageQueue=[];var e=function(a){if(a)try{a=JSUnformatDate(a);if(a.constructor!=Date)a=otDateAdd(new Date,1,0,0);a=formatIsoDate(a)}catch(b){a=""}return a||""},f=function(e,d){var c=a,b=a,f=e.each(function(e){if(e.getTime()==d.getTime()){c=e;b=0;return e}else{var f=Math.abs(e.getTime()-d.getTime());if(b===a||f<b){c=e;b=f}}});return c};d.fireMessageQueue=function(d){if(d){otHidePopupDialog();return}var a=this.messageQueue.shift();if(a)CNQR.MessageBox.confirm("<div>"+a.msg+"</div>",{title:OTFormatUserMessage(c,"ExpandSearch"),icon:CNQR.MessageBox.QuestionIcon,buttons:[{value:2,messageid:"Yes"},{value:1,messageid:"No"},{value:0,messageid:"Cancel"}],onButtonClick:function(c,d){var e=a;d.onhide=function(){d.onhide=function(){};if(c.value==0)OAGTester.fireMessageQueue(b);else OAGTester.fireMessageQueue()};c.value==2&&e.onButtonOKCallback()}});else{otHidePopupDialog();this.run=b;this.callback()}};d.handleResults=function(a,d,b){var e=this;e.messageQueue.clear();if(a&&a.length&&a[0].length){var i=function(l,e){var h="fltArrCity0",g="fltDepCity0",a="windowBeforeSet",m=parseInt(document.frmMain["fltTime"+e].value,10),k=JSUnformatDate(document.frmMain["fltDate"+e].value,m),p=new Date(k.getTime()),o=new Date(k.getTime()),u=document.frmMain[a+e]&&parseInt(document.frmMain[a+e].value,10)||0,j=m-u;if(j<0){p.setDate(k.getDate()-1);j=j+24}p.setHours(j);var i=m+u;if(i>24){o.setDate(k.getDate()+1);i=i-24}o.setHours(i);var y=l.reject(function(a){return p.getTime()<=a.getTime()&&a.getTime()<o.getTime()});if(y.length==l.length){var n=new Date(k.getTime());n.setHours(m);var v=f(l,n),z=Math.abs(v.getTime()-n.getTime())/(1e3*60*60),x=l.collect(function(a){return JSLocalizeTime(a.getHours()+":00")}).join(", "),q=document.frmMain[e==0?g:h].value,r=document.frmMain[e==0?h:g].value;if(e==0){if(d)q=d;if(b)r=b}else{if(b)q=b;if(d)r=d}var w=JSLocalizeTime(j+":00"),t=JSLocalizeTime(i+":00");if(i==24)t=JSLocalizeTime("23:59");var s=OTFormatUserMessage(c,"NoNonStopsInTimeWindow",q,r,w,t);s+="<p>"+OTFormatUserMessage(c,"NonStopsInTimeWindow",x)+"</p>";s+="<p>"+OTFormatUserMessage(c,"WantToExpandWindow")+"</p>";return{msg:s,onButtonOKCallback:function(){var b=z+1,c=a+e;document.frmMain[c].value=b}}}},g=i(a[0],"0");g&&e.messageQueue.push(g);if(a[1]&&a[1].length){var h=i(a[1],"1");h&&e.messageQueue.push(h)}}e.fireMessageQueue()};d.testForNonStops=function(d,f,i,g){var c=this;otShowPopupDialog(OTGetUserMessage("TripSegmentJs","CheckingForNonstops"),document.frmMain,{title:OTGetUserMessage("TravelPortal","TripSearch"),showWaitImage:b,modal:b,closeDisabled:b,destroyOnClose:b,showEffect:false});d=d.toUpperCase();f=f.toUpperCase();i=e(i);g=e(g);if(d.length!=3||f.length!=3){c.handleResults();return}var j=d+f,h=c.resultCache[j]&&c.resultCache[j][i]||a,l=c.resultCache[j]&&c.resultCache[j][g]||a;if(h&&l){c.handleResults([h,l]);return}else if(h&&!g){c.handleResults([h]);return}var k=0;if(window.gGovTravelMode)k=window.gGovTravelMode;var o={startAirport:d,endAirport:f,departDate:i,returnDate:g,govTravelMode:k},n=function(k){if(k.status==200){var c=k.responseText.evalJSON();if(c&&c.Records){for(var i=[],d=a,h=a,e=0;e<c.Records.length;e++){var g=[],b=c.Records[e];OAGTester.resultCache[b.key]=b.data;for(var j=$H(b.data).values()[0],f=0;f<j.length;f++){var l=new Date(j[f]);g.push(l)}if(d==a)if($H(b.data).values().length>=3){d=$H(b.data).values()[1];h=$H(b.data).values()[2]}i.push(g)}OAGTester.handleResults(i,d,h)}}else OAGTester.handleResults()},m=function(d,b){b=b||{};var c=b.message?b.message:b;logJsError(c,a,b.lineNumber,b.stack);OAGTester.handleResults()};new Ajax.Request("/javascript/service/GetAirNonStops.asp",{parameters:o,onComplete:n.bind(c),onException:m,method:"get"})}};function updateSettingForAirShopType(a){var h="inline",b="none",k="shopType2",j="shopType1",i="shopType0",d=document.getElementById("windowBeforeSet0"),e=document.getElementById("windowBeforeSet1"),f=document.getElementById("windowBeforeSet2"),g=document.getElementById("div_flightclass"),c=document.getElementById("chk_refundablediv");if(a<0){if($(i))if($(i).checked)a=cShopFare;if($(j))if($(j).checked)a=cShopFlight;if($(k))if($(k).checked)a=cShopMultiFares}if(a==cShopMultiFares){if(d)d.style.display=b;if(e)e.style.display=b;if(f)f.style.display=b;if(g)g.style.display=b;if(c)c.style.display=b}else if(a==cShopFare||a==cShopFlight){if(d)d.style.display=h;if(e)e.style.display=h;if(f)f.style.display=h;if(g)g.style.display="block";if(c){c.style.display="block";if($("isFlex"))if($("isFlex").value=="1")c.style.display=b}}}function toggleCarPromoSection(c){var a="gReaderMessage",b="aria-expanded";gObjCarPromoContainer=$("carpromo-div-"+c);gObjExpanderImage=$("expand-carpormo-"+c);if(gObjCarPromoContainer&&gObjCarPromoContainer.style.display=="none"){gObjExpanderImage.up(0).setAttribute(b,"true");gObjExpanderImage.src="/images/hooville/expander_down.gif";if($(a))$(a).innerHTML=gObjExpanderImage.alt+" - Expanded";gObjCarPromoContainer.style.display=""}else{gObjExpanderImage.up(0).setAttribute(b,"false");if(gObjCarPromoContainer)gObjCarPromoContainer.style.display="none";gObjExpanderImage.src="/images/hooville/expander_left.gif";if($(a))$(a).innerHTML=gObjExpanderImage.alt+" - Collapsed"}}addEvent(window,"load",function(){if(CNQR.IsGateway){var a=$("flight-show-more"),e=$$("div.lefttabdiv")[0],b=$("flightTab"),c=$$("div.search-widget-flightTab")[0];function f(){a&&a.observe("click",function(){if(c){c.removeClassName("cnqr-delay-reveal-container");a.setAttribute("aria-expanded","true");a.stopObserving("click")}},false)}function d(){a&&a.click()}e&&e.observe("mousedown",d);b&&b.up()&&b.up().observe("focus",d);f()}});

//FileName: /javascript/validations.js
var userMonth,userDay,userYear,dateDelim,dateStrArray;function setDateArray(){switch(userDatePreference){case OT_DateFormat_MDY_slash:userMonth=dateStrArray[0];userDay=dateStrArray[1];userYear=dateStrArray[2];dateDelim="/";break;case OT_DateFormat_MDY_hyphen:userMonth=dateStrArray[0];userDay=dateStrArray[1];userYear=dateStrArray[2];dateDelim="-";break;case OT_DateFormat_MDY_dot:userMonth=dateStrArray[0];userDay=dateStrArray[1];userYear=dateStrArray[2];dateDelim=".";break;case OT_DateFormat_DMY_slash:userDay=dateStrArray[0];userMonth=dateStrArray[1];userYear=dateStrArray[2];dateDelim="/";break;case OT_DateFormat_DMY_hyphen:userDay=dateStrArray[0];userMonth=dateStrArray[1];userYear=dateStrArray[2];dateDelim="-";break;case OT_DateFormat_DMY_dot:userDay=dateStrArray[0];userMonth=dateStrArray[1];userYear=dateStrArray[2];dateDelim=".";break;case OT_DateFormat_YMD_slash:userYear=dateStrArray[0];userMonth=dateStrArray[1];userDay=dateStrArray[2];dateDelim="/";break;case OT_DateFormat_YMD_hyphen:userYear=dateStrArray[0];userMonth=dateStrArray[1];userDay=dateStrArray[2];dateDelim="-";break;case OT_DateFormat_YMD_dot:userYear=dateStrArray[0];userMonth=dateStrArray[1];userDay=dateStrArray[2];dateDelim="."}}function jsTrim(b){var a;a=b;a=a.replace(/^\s*/,"");a=a.replace(/\s*$/,"");return a}var errorMessage,submitcount=0;function submitOnce(){if(submitcount==0){submitcount++;return true}else{errorMessage=OTGetUserMessage("ValidationsJS","AlreadySubmitted");return false}}function isEmpty(c,b){var a=c.value;if(a==null||a==""){errorMessage=OTFormatUserMessage("ValidationsJS","FieldValueEnter",b);return true}else return false}function delimiterIsValid(a){var d="InvalidDates",c="ValidationsJS",b=0;if(a.lastIndexOf("/")>=0)if(a.lastIndexOf(".")==-1&&a.lastIndexOf("-")==-1)dateStrArray=a.split("/");else b=1;else if(a.lastIndexOf("-")>=0)if(a.lastIndexOf(".")==-1&&a.lastIndexOf("/")==-1)dateStrArray=a.split("-");else b=1;else if(a.lastIndexOf(".")>=0)if(a.lastIndexOf("/")==-1&&a.lastIndexOf("-")==-1)dateStrArray=a.split(".");else b=1;else{errorMessage=OTGetUserMessage(c,d);return false}if(b==1){errorMessage=OTGetUserMessage(c,d);return false}return true}function fullDateEntered(a){if(a.length!=3){errorMessage=OTGetUserMessage("ValidationsJS","AllDatePartsSpecified");return false}return true}function stripLeadZero(b){var a=b.toString(10);a=parseInt(a,10);return a}function monthLengthValid(b,c){var g="MonthDaysMax",d=false,e="ValidationsJS",f="February",a="DateTime";b=stripLeadZero(b);c=stripLeadZero(c);var h=["",OTGetUserMessage(a,"January"),OTGetUserMessage(a,f),OTGetUserMessage(a,"March"),OTGetUserMessage(a,"April"),OTGetUserMessage(a,"May"),OTGetUserMessage(a,"June"),OTGetUserMessage(a,"July"),OTGetUserMessage(a,"August"),OTGetUserMessage(a,"September"),OTGetUserMessage(a,"October"),OTGetUserMessage(a,"November"),OTGetUserMessage(a,"December")];if(b==2){if(typeof userYear=="undefined"||userYear==-1)if(c<=29)return true;else{errorMessage=OTFormatUserMessage(e,"FebDaysMaxNoYear",OTGetUserMessage(a,f));return d}return leapMonthValid(c,userYear)?true:d}else if((b==4||b==6||b==9||b==11)&&c>30){errorMessage=OTFormatUserMessage(e,g,OTGetUserMessage(a,h[b]),"30");return d}else if(c>31){errorMessage=OTFormatUserMessage(e,g,OTGetUserMessage(a,h[b]),"31");return d}return true}function leapMonthValid(f,a){var e="February",d="DateTime",c="FebDaysMax",b="ValidationsJS";if(a%4>0&&f>28){errorMessage=OTFormatUserMessage(b,c,OTGetUserMessage(d,e),a,"28");return false}else if(f>29){errorMessage=OTFormatUserMessage(b,c,OTGetUserMessage(d,e),a,"29");return false}return true}function monthIsValid(b){var c="DateTime",a="ValidationsJS";if(!isNaN(b)){if(b<1||b>12){errorMessage=OTFormatUserMessage(a,"MonthDayRange",OTGetUserMessage(c,"January"),OTGetUserMessage(c,"December"))+"\n";errorMessage+=OTFormatUserMessage(a,"CheckDateExample")+"\n";errorMessage+=OTGetUserMessage(a,"ProfileChangeFormat");return false}}else{errorMessage=OTGetUserMessage(a,"DatesOnlyNumbers");return false}return true}function dayIsValid(a){var c="ValidationsJS",b=false;if(!isNaN(a))if(a!=0&&a!="")return monthLengthValid(userMonth,a)?leapMonthValid(userMonth,a,userYear)?true:b:b;else{errorMessage=OTGetUserMessage(c,"EnterValidDay");return b}else{errorMessage=OTGetUserMessage(c,"DatesOnlyNumbers");return b}return true}var longYear;function yearIsValid(a,e){var d=true,c=false,b="ValidationsJS";if(!isNaN(a))if(a!=""){a=stripLeadZero(a);if(a>99&&a<999||a>9999){errorMessage=OTGetUserMessage(b,"InvalidDates");return c}else if(a<30){longYear=a+2e3;return d}else if(a>=30&&a<100){longYear=a+1900;return d}else if(a<1900||a>2078){errorMessage=OTFormatUserMessage(b,"DateYearRange",e);return c}else{longYear=a;return d}}else{errorMessage=OTGetUserMessage(b,"EnterValidYear");return c}else{errorMessage=OTGetUserMessage(b,"DatesOnlyNumbers");return c}return d}function checkDate(b,c){var a=false;if(typeof b.value=="undefined")return;try{CNQR.FullWidth.elTransform(b)}catch(e){}dateStr=jsTrim(b.value);var d=0;if(!isEmpty(b,c)){if(delimiterIsValid(dateStr)){if(fullDateEntered(dateStrArray)){setDateArray();return monthIsValid(userMonth)?dayIsValid(userDay)?yearIsValid(userYear,c)?true:a:a:a}return a}return a}}function checkBirthDate(b){var a=false;if(typeof b.value=="undefined")return a;if(checkDate(b,"")==a)return a;if(userYear<100)return a;var d=new Date,c=new Date(userYear,userMonth,userDay);if(c>d)return a;var e=150*365.25;return daysBetween(d,c)<e}function checkPastDate(b){var a=false;if(typeof b.value=="undefined")return a;if(checkDate(b,"")==a)return a;if(userYear<100)return a;var d=new Date,c=new Date(userYear,userMonth,userDay);return c>d?a:true}function checkUserAge2(b,g,f){var a=false;if(typeof b.value=="undefined")return a;if(checkDate(b,"")==a)return a;if(userYear<100)return a;var e=new Date,d=new Date(userYear,userMonth-1,userDay);if(d>e)return a;var c=getUserAge(e,d);return c>=g&&c<=f}function checkUserAge(a,b){return checkUserAge2(a,b,200)}function getUserAge(b,a){var c=b.getFullYear()-a.getFullYear();if(b.getMonth()<a.getMonth())c-=1;if(b.getMonth()==a.getMonth()&&b.getDate()<a.getDate())c-=1;return c}function daysBetween(b,c){var a=1e3*60*60*24,e=b.getTime(),f=c.getTime(),d=Math.abs(e-f);return Math.round(d/a)}function isBlank(d){var a=String(d);if(a=="")return true;if(a==null)return true;for(var c=0;c<a.length;c++){var b=a.charAt(c);if(b!=" "&&b!="\n"&&b!="\t")return false}return true}function validateForm(c){for(var b=0;b<c.length;b++){var a=c.elements[b];if((a.type=="text"||a.type=="textarea")&&a.required)if(a.value==null||a.value==""||isBlank(a.value)){alert(OTGetUserMessage("ValidationsJS","AllRequiredFields"));return false}else return true}}function isNumeric(a){return isNumericValue(a.value)}function isNumericValue(c){for(var e="0123456789",d="yes",b,a=0;a<c.length;a++){b=""+c.substring(a,a+1);if(e.indexOf(b)=="-1")d="no"}return d=="no"?false:true}function isPosNumber(a){return isNaN(a)?false:a<1?false:parseInt(a,10)!=a?false:true}function isPosNumberOrZero(a){return isNaN(a)?false:a<0?false:parseInt(a,10)!=a?false:true}function validNumber(a,c,d,b){return!isBlank(a)&&(isNaN(a)||parseFloat(a)<parseFloat(c)||parseFloat(a)>parseFloat(d)||!b&&parseInt(a,10)!=parseFloat(a))?false:true}function validFormattedMoney(e,d,b){if(typeof b=="undefined")b="$";var a;if(b.length==3)a=new RegExp(b,"g");else a=new RegExp("\\"+b,"g");var c=e.replace(a,"");GetNumberSeparators(d);a.compile("\\"+thouSep,"g");c=c.replace(a,"");a.compile("\\"+decSep,"g");c=c.replace(a,".");return isNaN(c)?false:true}function validEmailList(d){var b=false;if(!d)return b;var a=jsTrim(d);a=a.replace(/,/ig,";").replace(/;+/ig,";");a=a.replace(/\s*;\s*/ig,";");emailArr=a.split(";");emailArr.length&&!emailArr[emailArr.length-1]&&emailArr.pop();if(emailArr.length==0)return b;for(var e=emailArr.length-1,c=0;c<=e;c++){if(!validEmail(emailArr[c]))return b;if(emailArr[c].indexOf(" ",0)!=-1)return b}return true}function validEmail(a){if(!a)return false;var b=/^\s*([a-zA-Z0-9_.'\-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+\s*$/;return b.test(a)}function validate_page(c){var f="FieldNumberOnly",d=false,e="ValidationsJS";for(var b in c)if(c.hasOwnProperty(b)){var a=document.frmMain[b];if(!a)a=$(b);switch(c[b][1]){case"isBlank":if(isBlank(a.value)){alert(OTFormatUserMessage(e,"FieldValueEnter",c[b][0]));tryFocus(a);return d}break;case"email":if(!validEmail(a.value)){alert(OTFormatUserMessage(e,"FieldValueInvalid",c[b][0]));a.select();tryFocus(a);return d}break;case"emailList":if(a&&a.value)a.value=a.value.replace(/ /ig,"").replace(/,/ig,";").replace(/;+/ig,";");if(!validEmailList(a.value)){alert(OTFormatUserMessage(e,"FieldValueListInvalid",c[b][0]));a.select();tryFocus(a);return d}break;case"date":if(!checkDate(a,c[b][0])){alert(errorMessage);a.select();tryFocus(a);return d}break;case"isPosNumber":if(!isPosNumber(a.value)){alert(OTFormatUserMessage(e,f,c[b][0]));a.select();tryFocus(a);return d}break;case"isPosNumberOrZero":if(!isPosNumberOrZero(a.value)){alert(OTFormatUserMessage(e,f,c[b][0]));a.select();tryFocus(a);return d}break;case"isNumeric":if(!isNumeric(a)){alert(OTFormatUserMessage(e,f,c[b][0]));a.select();tryFocus(a);return d}}}return true}function tryFocus(a){try{a.focus()}catch(b){}};

//FileName: /javascript/http.js
var __nextHttp=0,__requests=[];function HttpRequest(g,h){var b=null,d="SmallJs",c="undefined",a=this;a.timeout=3e4;a.url="";a.baseUrl=window.location.protocol+"//"+window.location.host;a.browserMessage="Sorry, this page requires at least Internet Explorer 5, Netscape 7, FireFox, or Mozilla.";if(typeof OTGetUserMessage!=c)a.browserMessage=OTGetUserMessage(d,"RequiresRealBrowser");a.timeoutMessage="Request timed out. Please try again.";if(typeof OTGetUserMessage!=c)a.timeoutMessage=OTGetUserMessage(d,"RequestTimedOut");a.errorMessage="Request failed. Please try again.";if(typeof OTGetUserMessage!=c)a.errorMessage=OTGetUserMessage(d,"RequestFailed");a.http=false;a.timeoutId=b;a.identifier=++__nextHttp;__requests[a.identifier]=a;a.IFrameDoc=b;a.IFrameObj=b;a.emptyDoc=h;if(a.emptyDoc==b)a.emptyDoc="/common/empty.asp";if(g!=true){if(window.XMLHttpRequest)a.http=new XMLHttpRequest;if(!a.http)for(var f=["MSXML2.XmlHttp","Microsoft.XmlHttp","MSXML.XmlHttp"],e=0;e<f.length;e++)try{a.http=new ActiveXObject(f[e]);break}catch(i){a.http=false}}!a.http&&a.createIFrame()}HttpRequest.prototype.createIFrame=function(){var a=this;if(!document.createElement){alert(a.browserMessage);return true}if(!a.IFrameObj&&document.createElement)try{var b=document.createElement("iframe");b.setAttribute("id","HttpFrame"+a.identifier);b.style.border="0px";b.style.width="0px";b.style.height="0px";a.IFrameObj=document.body.appendChild(b)}catch(c){}navigator.userAgent.indexOf("Gecko")!=-1&&!a.IFrameObj.contentDocument;if(a.IFrameObj.contentDocument)a.IFrameDoc=a.IFrameObj.contentDocument;else if(a.IFrameObj.contentWindow)a.IFrameDoc=a.IFrameObj.contentWindow.document;else if(a.IFrameObj.document)a.IFrameDoc=a.IFrameObj.document;else{alert(a.browserMessage);return true}a.IFrameDoc.location.replace(a.baseUrl+a.emptyDoc);return false};HttpRequest.prototype.ontimeout=function(){alert(this.timeoutMessage)};HttpRequest.prototype.oncomplete=function(){};HttpRequest.prototype.abort=function(){var a=this;try{if(!a.http)a.IFrameDoc.location.replace(a.baseUrl+a.emptyDoc);else{a.http.onreadystatechange=function(){};a.http.abort()}a.timeoutId=null}catch(c){}try{a.ontimeout()}catch(b){}};HttpRequest.prototype.httpOptions={timeout:3e4,postData:"",contentType:"application/x-www-form-urlencoded",requestHeaders:{"X-Requested-With":"XMLHttpRequest"}};HttpRequest.prototype.makeRequest=function(i,e){var h="].abort();",g="__requests[",b=null,a=this;if(i!=b){try{if(a.timeoutId!=b){clearTimeout(a.timeoutId);a.timeoutId=b}if(!a.http)try{a.IFrameDoc.location.replace(a.baseUrl+a.emptyDoc)}catch(l){a.IFrameObj.document.location.replace(a.baseUrl+a.emptyDoc)}else{a.http.onreadystatechange=function(){};a.http.abort()}}catch(k){}a.url=a.baseUrl+i;e=e||{};var d;for(d in a.httpOptions)if(a.httpOptions.hasOwnProperty(d))a[d]=e[d]==b?a.httpOptions[d]:e[d];if(a.postData.length>0)a.requestMethod="POST";else a.requestMethod="GET";a.timeoutId=setTimeout(g+a.identifier+"].makeRequest(null);",10);return}if(!a.http){if(a.requestMethod!="GET"){alert(a.browserMessage);return}if(a.url.indexOf("?")>a.baseUrl.length)a.url=a.url.concat("&if="+a.identifier);else a.url=a.url.concat("?if="+a.identifier);try{a.IFrameDoc.location.replace(a.url)}catch(j){a.IFrameObj.document.location.replace(a.url)}a.timeoutId=setTimeout(g+a.identifier+h,a.timeout)}else{a.http.open(a.requestMethod,a.url,true);var f;for(f in a.requestHeaders)a.requestHeaders.hasOwnProperty(f)&&a.http.setRequestHeader(f,a.requestHeaders[f]);a.requestMethod=="POST"&&a.http.setRequestHeader("Content-type",a.contentType);var c=a;a.http.onreadystatechange=function(){try{if(c.http.readyState==4){if(c.timeoutId!=b){clearTimeout(c.timeoutId);c.timeoutId=b}c.oncomplete(c.http.status,c.http.responseText)}}catch(a){c.oncomplete(-1,a.message)}};a.timeoutId=setTimeout(g+a.identifier+h,a.timeout);a.http.send(a.requestMethod=="GET"?b:a.postData)}};function __oniframeload(id,status,data){var obj=__requests[id];if(obj){if(obj.timeoutId!=null){clearTimeout(obj.timeoutId);obj.timeoutId=null}obj.oncomplete(status,data)}else if(status==200)eval(data)}HttpRequest.prototype.options={busyIndicator:null,resultFunction:null,resultContainer:null,xslTemplate:null,failFunction:null,grabValueXPath:null,indicatorDisplay:"block"};HttpRequest.prototype.getAndRender=function(f,d){var a=null,b=this;d=d||{};var e={},c;for(c in b.options)if(b.options.hasOwnProperty(c))b[c]=d[c]==a?b.options[c]:d[c];for(c in b.httpOptions)if(d[c]!=a)e[c]=d[c];b.__resElem=$(b.resultContainer);b.__busyIndicator=$(b.busyIndicator);if(b.timeout==a)b.timeout=3e4;b.oncomplete=function(g,c){var b=this;if(b.__busyIndicator!=a)b.__busyIndicator.style.display="none";if(g!=200)if(b.failFunction!=a)b.failFunction(c);else alert(b.errorMessage);else try{var d=c,e=a;if(b.xslTemplate!=a){var f=xmlParse(c),i=xmlParse(b.xslTemplate);d=xsltProcess(f,i);if(b.grabValueXPath!=a){var h=xpathParse(b.grabValueXPath);e=h.evaluate(new ExprContext(f)).stringValue()}}if(b.__resElem!=a)b.__resElem.innerHTML=d;b.resultFunction!=a&&b.resultFunction(d,e)}catch(j){if(b.failFunction!=a)b.failFunction(j.message);else alert(j.message)}b.busyIndicator=a;b.timeout=3e4;b.resultFunction=a;b.resultContainer=a;b.xslTemplate=a;b.__resElem=a;b.__busyIndicator=a};b.ontimeout=function(){var b=this;b.busyIndicator=a;b.timeout=3e4;b.resultFunction=a;b.resultContainer=a;b.xslTemplate=a;b.__resElem=a;if(b.__busyIndicator!=a)b.__busyIndicator.style.display="none";b.__busyIndicator=a;alert(b.timeoutMessage)};if(b.__busyIndicator!=a)b.__busyIndicator.style.display=b.indicatorDisplay;b.makeRequest(f,e)};var xx_globalHttp=null;function GetHttpRequest(){if(xx_globalHttp==null)xx_globalHttp=new HttpRequest;return xx_globalHttp};

//FileName: /javascript/airportautocomplete.js
var useLocationServices=false,xxx_globalACcache_xxx={};xxx_DefaultAirportAutoCompleteOptions_xxx={strictDocType:false,protTravelConfigId:"",showHubs:false,countrySearch:false,customLang:"",showMinorAirports:false,showCityCodes:false,protgds:"",filterRailStations:false,useLocationServices:false,baseUrl:"",overrideMethods:{}};function AirportAutoComplete(g,h,b,e,f,d,j,i){var a=this,k=g?g:"",p=h?h:0,m=b?b:0,n=e?e:0,l=f?f:0,o=j?j:"",q=i?i:0;a.countrySearch=b!=null&&b==1?true:false;a.codeDiv=null;a.travelconfig=k;var c;try{c=OTLangID}catch(r){c="en-us"}if(d!=null&&d!="")c=d;a.url="/Javascript/Service/airport.asp?tc="+encodeURIComponent(k)+"&h="+encodeURIComponent(p)+"&lang="+encodeURIComponent(c)+"&cs="+encodeURIComponent(m)+"&ma="+encodeURIComponent(n)+"&ci="+encodeURIComponent(l)+"&g="+encodeURIComponent(o)+"&r="+encodeURIComponent(q)+"&t=";a.keyThreshold=3;a.ignoreRegex=/([\-,]|\s$)/i;a.cursorHomeOnChange=true}AirportAutoComplete.prototype=new DynamicAutoComplete;AirportAutoComplete.prototype.constructor=AirportAutoComplete;AirportAutoComplete.prototype.unload=function(){var a=this;a.unloadAirportAutoComplete();a.unloadDynamicAutoComplete();a.unloadAutoComplete();a.unloadPopupList();a.unloadPopupDiv()};AirportAutoComplete.prototype.unloadAirportAutoComplete=function(){this.codeDiv=null};AirportAutoComplete.prototype.ongettext=function(l,g){var e=" - ",d=", ",c="",j=this;if(l>=0&&l<j.items.length){var p=[],a=j.items[l],f=[5,1,2];if(j.keyThreshold<3){f[f.length]=3;f[f.length]=8}if(j.countrySearch==true)f[f.length]=4;for(var k=0;k<f.length;k++){var n=true,b=a[f[k]];switch(f[k]){case 1:b+=(a[3]!=c?d:c)+a[3]+e+a[2];break;case 2:n=false;for(var h=typeof b=="undefined"?[]:b.split(" "),o=false,i=0;i<h.length&&!o;i++)if(!/(airport|flughafen|aerop|arpt|intl|aeroporto|international|intern|intern\.|internacional|aeropuerto|aroport|municipal|apt|luchthaven|int\.)/i.test(h[i])){b=h[i];for(var m=i+1;m<h.length;m++)b+=" "+h[m];b+=e+a[1]+(a[3]!=c?d:c)+a[3];if(b.substring(0,g.length).toLowerCase()==g.toLowerCase())return b}break;case 3:b+=d+a[1]+e+a[2];break;case 4:b+=d+a[1]+(a[3]!=c?d:c)+a[3]+e+a[2];break;case 5:b+=e+a[2]+e+a[1]+(a[3]!=c?d:c)+a[3];break;case 8:b+=d+a[1]+(a[3]!=c?d:c)+a[3]+e+a[2]}if(n&&b.substring(0,g.length).toLowerCase()==g.toLowerCase())return b}if(!isNaN(parseInt(g,10))&&g==a[7])return a[5]+e+a[2]+e+a[1]+(a[3]!=c?d:c)+a[3]}return null};AirportAutoComplete.prototype.ongetid=function(a){return a>=0?this.items[a][7]:null};AirportAutoComplete.prototype.ondrawitem=function(d){var g="</span> ",f='<span class="cnqr-airportkey">',c=this,a=c.items[d],j=a[7],k=a[2],i=a[1],h=a[3],l=a[4],n=a[5],m=a[6],e=a[9],b="";if(/^[0-9]+$/.test(j))b+=f+n+g;else b+=f+j+g;if(m=="1")b+='<span class="cnqr-bold">'+k+"</span>";else b+=k;b+='<div class="cnqr-cityname">'+i+(h!=""&&i!=""?", ":"")+h+", "+l;if(e!=null&&e!=""){var o=c.parseSize(c.divs[d].offsetLeft)+c.parseSize(c.divs[d].offsetWidth)-61;if(!document.all||c.isStrictDocType)o-=2;b+='<span class="cnqr-near"><span class="text">'+e+"</span></span>"}b+="</div>";c.divs[d].childNodes[0].innerHTML=b};AirportAutoComplete.prototype.onsetid=function(b){var a=this;if(a.codeDiv!=null)a.codeDiv.style.visibility="hidden";if(/[0-9]+/.test(b))b=a.items[a.selectedIndex][5];a.onsetiata(b)};AirportAutoComplete.prototype.onsetiata=function(){};AirportAutoComplete.prototype.getCurrentAirportStruct=function(){return this.selectedIndex==-1?null:this.getAirportStruct(this.selectedIndex)};AirportAutoComplete.prototype.getAirportStruct=function(c){var b=this.items[c];if(!b)return null;var a=[];a.sortPriority=b[0];a.cityName=b[1];a.displayName=b[2];a.state=b[3];a.countryName=b[4];a.cityCode=b[5];a.isMajor=b[6];a.airportKey=b[7];a.countryCode=b[8];a.near=b[9];a.xPos=b[10];a.yPos=b[11];a.mapNum=b[12];a.latitude=b[13];a.longitude=b[14];a.airportRegion=b[15];a.cityLatitude=b[16];a.cityLongitude=b[17];return a};function LocationservicesAutocomplete(g,h,f,d,e,b,j,i,k){var a=this;a.constructor(g,h,f,d,e,b,j,i);var o=g?g:"",r=h?h:0,n=f?f:0,l=d?d:0,m=e?e:0,q=j?j:"",s=i?i:0,c;try{c=OTLangID}catch(p){c="en-us"}if(b!=null&&b!="")c=b;a.includeMinorLocations=escape(l);a.language=escape(c);if(k!=""){a.baseUrl=k;a.url="autocomplete"}}LocationservicesAutocomplete.prototype=new AirportAutoComplete(null,null,null,null,null,null,null,null,null);LocationservicesAutocomplete.constructor=LocationservicesAutocomplete;LocationservicesAutocomplete.prototype.makeHttpRequest=function(g,h){var f="undefined",e="; url: ",d="autocomplete.js",c="locationservices",b=null,a=this;a.locationClient=new LocationServiceAutocompleteClient(a.baseUrl,a.url,b);a.http.oncomplete=function(status,data){var a=this;a.myPopup.inRequest=false;a.myPopup.onrequest(status==200);if(status==200){var sarr=b;try{otLogMetric(c,d,"OnComplete::GetResponse( "+(Date.now()-a.myPopup.initTimer)+e+a.url);var insideTimer=Date.now();otLogMetric(c,d,"OnComplete::StartProcessingResponse("+a.originalValue+"): "+insideTimer+e+a.url);if(typeof a.myPopup.baseUrl!=f)sarr=a.myPopup.locationClient.onComplete(status,data);else{otLogMetric("LocationServices","autocomplete.ashx","Total run : "+(Math.floor((new Date).getTime())-a.myPopup.initTimer).toString()+"ms");sarr=eval(data)}}catch(e){sarr=data.evalJSON()}if(sarr!=b)if(h==b)a.myPopup.cache["_"+g.toLowerCase()]=sarr;else a.myPopup.cache["_"+g.toLowerCase()]=sarr[h];a.myPopup.showFromCache(g)}otLogMetric(c,d,"OnComplete::EndProcessingDataFromRequest : "+(Date.now()-insideTimer)+e+a.url);otLogMetric(c,d,"OnComplete::End: "+(Date.now()-a.myPopup.initTimer)+e+a.url)};var i=a.url;initTimer=Date.now();a.timestamp=Math.floor((new Date).getTime());i=a.url.replace("[current_stamp]",a.timestamp.toString());if(typeof a.baseUrl!=f){a.http.requestMethod="POST";a.http.httpOptions.postData=a.locationClient.createJsonRequest(a.includeMinorLocations,a.language,a.originalValue,a.travelconfig);a.http.baseUrl=a.baseUrl;a.initTimer=Date.now();otLogMetric(c,d,"OnComplete::Start("+a.originalValue+"): "+Date.now()+e+a.url);a.http.makeRequest(a.url)}else a.http.makeRequest(i+encodeURIComponent(a.originalValue));if(a.httpCounter!=b)a.httpCounter.value+="*";if(a.httpField!=b)a.httpField.value=a.originalValue};function ShowAirportAC(d,i,b){var c="-";if(!d.myPopup){b=b||{};if(CNQR.ProdStatus=="dev"){d.getAttribute("autocomplete")==null&&alert('Please add an attribute called autocomplete = "off" to the form field: '+d.name);!d.id&&alert('Please add an "ID" attribute to: '+d.name);for(var h in b)xxx_DefaultAirportAutoCompleteOptions_xxx[h]==null&&alert("'"+h+"' is not an option for ShowAirportAC!")}var a=Object.clone(xxx_DefaultAirportAutoCompleteOptions_xxx);a=Object.extend(a,b);var e="";if(a.useLocationServices)useLocationServices=true;else if(b.hasOwnProperty("useLocationServices")&&b.useLocationServices!=false)useLocationServices=b.useLocationServices;if(a.baseUrl&&a.baseUrl!="")e=a.baseUrl;else if(b.hasOwnProperty("baseUrl")&&b.baseUrl!="")e=b.baseUrl;airAC=GetAutocompleteClass(a,e);airAC.minWidth=300;airAC.isStrictDocType=a.strictDocType==true||otUseStrict;airAC.create(d.id+"_airAC");airAC.div.setAttribute("role","list");airAC.attachTo(d,i,a.width);airAC.setupHttpRequest();airAC=Object.extend(airAC,a.overrideMethods);var n=a.protgds?a.protgds:"",m=a.protTravelConfigId?a.protTravelConfigId:"",o=a.showHubs?1:0,k=a.countrySearch?1:0,p=a.customLang?a.customLang:"",l=a.showMinorAirports?1:0,j=a.showCityCodes?1:0,q=a.filterRailStations?1:0,f="["+m+c+o+c+k+c+p+c+l+c+j+c+n+c+q+"]";if(xxx_globalACcache_xxx[f]==null){var g=[];g[""]=[];xxx_globalACcache_xxx[f]=g}airAC.cache=xxx_globalACcache_xxx[f]}}function GetAutocompleteClass(a,b){return useLocationServices?new LocationservicesAutocomplete(a.protTravelConfigId,a.showHubs?1:0,a.countrySearch?1:0,a.showMinorAirports?1:0,a.showCityCodes?1:0,a.customLang,a.protgds,a.filterRailStations?1:0,b):new AirportAutoComplete(a.protTravelConfigId,a.showHubs?1:0,a.countrySearch?1:0,a.showMinorAirports?1:0,a.showCityCodes?1:0,a.customLang,a.protgds,a.filterRailStations?1:0)};

//FileName: /javascript/locationserviceclient.js
function LocationServiceAutocompleteClient(c,b,d){var a=this;a.baseUrl=c;a.endpoint=b;a.request=d;a.defaultTypesForSearch='"airport","hub","rail_station","bus_station","heliport"';a.defaultCount="10";a.defaultRequestType="POST";a.resultDataElement=1;a.searchString="";a.source="IATA"}LocationServiceAutocompleteClient.prototype.createJsonRequest=function(e,i,g,h,d,c,f){var b=null,a=this,e=e!=b&&e=="1"?true:false;a.searchString=d=d!=b?d:a.defaultTypesForSearch;c=c!=b?c:a.defaultCount;a.source=f!=b?f:a.source;a.searchString=g;var j='{"request":{"language": "'+i+'","locationTypes":['+d+'],"maxResultCount":'+c+',"searchText": "'+a.searchString+'","travelConfigId": "'+h+'","includeMinorLocations": '+e+',"sources": ["'+a.source+'"]}}';return j};LocationServiceAutocompleteClient.prototype.filterSource=function(a){return function(b){return a.indexOf(b.source)>-1}};LocationServiceAutocompleteClient.prototype.getSourceCode=function(c){var a=c.filter(LocationServiceAutocompleteClient.prototype.filterSource(this.source)),b="";if(a!=null||a.length>0)b=a[0].code;else if(source.length>0)b=c[0].code;return b};LocationServiceAutocompleteClient.prototype.getCityName=function(a){return a.name?a.name:a.city?a.city.name:""};LocationServiceAutocompleteClient.prototype.getName=function(a){var c="AreaAirports",b="TravelPortal";return a.city&&a.city.name?OTFormatUserMessage(b,c,a.city.name):a.name!=null&&a.name!=""?a.name:OTFormatUserMessage(b,c,this.getSourceCode(a.alternateIds))};LocationServiceAutocompleteClient.prototype.createArrayFromLocation=function(a){var c="",d=null,b=[],e=this.getSourceCode(a.alternateIds);b[0]=a.rank?a.rank:"99";b[1]=a.city!=d?a.city.name:c;b[2]=a.name!=d&&a.name!=c?a.name:a.city!=d?a.city.name:c;b[3]=a.state!=d?a.state.name:c;b[4]=a.country!=d?a.country.name:c;b[5]=e;b[6]=a.isMajor?a.isMajor:c;if(a.outtaskHubId)b[7]=a.outtaskHubId;else b[7]=e;b[8]=a.country!=d?a.country.code:c;b[9]=a.near?a.near:c;b[13]=a.point!=d?a.point.lat:c;b[14]=a.point!=d?a.point.lon:c;b[16]=b[13];b[17]=b[14];return b};LocationServiceAutocompleteClient.prototype.onComplete=function(k,j){var h="NearAirport",g="TravelPortal",c=this;source=c.source;transformedLocations=[];autocompleteResponse=j.evalJSON();var b=[];transformedLocations[0]="";transformedLocations[1]=b;if(autocompleteResponse!=null){var e=autocompleteResponse.airports.concat(autocompleteResponse.heliports,autocompleteResponse.railStations,autocompleteResponse.busStations);c.addNearCodeToLocations(e,autocompleteResponse.hubs);for(index=0;index<e.length;index++){var d=e[index];if(d){if(d.near)d.near=OTFormatUserMessage(g,h,d.near);var i=c.createArrayFromLocation(d);b[b.length]=i}}for(index=0;index<autocompleteResponse.hubs.length;index++){var a=autocompleteResponse.hubs[index];if(a){if(a.near)a.near=OTFormatUserMessage(g,h,a.near);var f=c.createArrayFromLocation(a);f[1]=c.getCityName(a);f[2]=c.getName(a);b[b.length]=f}}b.sort(function(a,b){return a[0]>b[0]?1:b[0]>a[0]?-1:0})}return transformedLocations};LocationServiceAutocompleteClient.prototype.addNearCodeToLocations=function(a,e){var b=this,c=0;while(c<a.length){if(!b.doesLocationHaveMatchOnSourceCode(a[c])){var f=b.doesLocationHaveMatch(a[c]);b.addNearCodeToLocation(a[c],a,e,f)}c++}var d=0;while(d<e.length){if(!b.doesLocationHaveMatchOnSourceCode(e[d])){var f=b.doesLocationHaveMatch(e[d]);b.addNearCodeToHub(e[d],a,f)}d++}};LocationServiceAutocompleteClient.prototype.doesLocationHaveMatch=function(a){var b=this;return b.searchString.toLowerCase()==b.getSourceCode(a.alternateIds).toLowerCase()||a.city&&a.city.name.toLowerCase().indexOf(b.searchString.toLowerCase())!=-1||a.name&&a.name.toLowerCase().indexOf(b.searchString.toLowerCase())!=-1||a.state&&a.state.name.toLowerCase().indexOf(b.searchString.toLowerCase())!=-1||a.country&&a.country.name.toLowerCase().indexOf(b.searchString.toLowerCase())!=-1};LocationServiceAutocompleteClient.prototype.doesLocationHaveMatchOnSourceCode=function(a){return this.searchString.toLowerCase()==this.getSourceCode(a.alternateIds).toLowerCase()};LocationServiceAutocompleteClient.prototype.addNearCodeToLocation=function(f,i,g,e){var a=this;for(var h=a.getSourceCode(f.alternateIds),c={},d=0;d<g.length;d++){var b=g[d];if(a.isLocationInHub(h,b)){if(a.canLocationBeUsedForNear(e,b)&&a.hasNewLocationBetterRank(c,b)){c.code=a.getSourceCode(b.alternateIds);c.rank=b.rank}a.overideNearLocationIfHubContainsBetter(b,i,e,c)}}f.near=c.code};LocationServiceAutocompleteClient.prototype.addNearCodeToHub=function(b,d,c){var a={};this.overideNearLocationIfHubContainsBetter(b,d,c,a);b.near=a.code};LocationServiceAutocompleteClient.prototype.overideNearLocationIfHubContainsBetter=function(b,i,h,f){var a=this;for(var e=b.airports.concat(b.heliports,b.railStations,b.busStations),c=0;c<e.length;c++)if(a.canLocationBeUsedForNear(h,e[c])){var g=a.getSourceCode(e[c].alternateIds),d=a.getLocationByCode(g,i);if(d&&a.hasNewLocationBetterRank(f,d)){f.code=g;f.rank=d.rank}}};LocationServiceAutocompleteClient.prototype.canLocationBeUsedForNear=function(b,a){return!b&&this.doesLocationHaveMatch(a)||this.doesLocationHaveMatchOnSourceCode(a)};LocationServiceAutocompleteClient.prototype.hasNewLocationBetterRank=function(a,b){return!a.rank||b.rank&&b.rank<a.rank};LocationServiceAutocompleteClient.prototype.isLocationInHub=function(b,a){var c=a.airports.concat(a.heliports,a.railStations,a.busStations);return this.getLocationByCode(b,c)?true:false};LocationServiceAutocompleteClient.prototype.getLocationByCode=function(c,b){for(var a=0;a<b.length;a++){var d=this.getSourceCode(b[a].alternateIds);if(c==d)return b[a]}return null};

//FileName: /javascript/companyautocomplete.js
function CompanyAutoComplete(){var a=this;a.codeDiv=null;a.showCode=true;a.url="/Javascript/Service/Company.asp?c=";a.keyThreshold=2;a.ignoreRegex=/([\-,\s]$)/i;a.cursorHomeOnChange=false;a.maxRows=20}CompanyAutoComplete.prototype=new DynamicAutoComplete;CompanyAutoComplete.prototype.constructor=CompanyAutoComplete;CompanyAutoComplete.prototype.unload=function(){var a=this;a.unloadCompanyAutoComplete();a.unloadDynamicAutoComplete();a.unloadAutoComplete();a.unloadPopupList();a.unloadPopupDiv()};CompanyAutoComplete.prototype.unloadCompanyAutoComplete=function(){this.codeDiv=null};CompanyAutoComplete.prototype.ongettext=function(a,b){if(a>=0&&a<this.items.length){var c=this.items[a];if(c[1].substring(0,b.length).toLowerCase()==b.toLowerCase())return c[1]}return null};CompanyAutoComplete.prototype.ongetid=function(a){return a>=0?this.items[a][0]:null};CompanyAutoComplete.prototype.ondrawitem=function(a){var b=this.items[a];this.divs[a].childNodes[0].innerHTML=b[1]};CompanyAutoComplete.prototype.oncoloritem=function(c,e){var a=this,b="ui-corner-all ";if(e)if(a.selectedItemClassName!=null&&a.selectedItemClassName!="")b+=a.selectedItemClassName;else b+="ui-state-focus";else if(a.itemClassName!=null&&a.itemClassName!="")b+=a.itemClassName;else{var d=a.items[c];if(d[3])b+=d[3]}a.divs[c].childNodes[0].className=b};CompanyAutoComplete.prototype.onsetid=function(f){var c=null,a=this;if(a.showCode){if(a.codeDiv==c){var d=a.edit.parentElement;if(d==c)d=a.edit.parentNode;if(d==c)return;var b=document.createElement("div");b.setAttribute("id","corpCode"+a.identifier);b.style.position="absolute";b.style.textAlign="right";b.style.marginTop="-1.2em";b.style.height="0px";b.style.overflow="visible";b.style.fontFamily="Tahoma, sans-serif";b.style.fontSize="6pt";b.style.fontStyle="normal";b.style.fontWeight="bold";a.codeDiv=d.insertBefore(b,a.edit);a.codeDiv.style.width=a.parseSize(a.edit.offsetWidth)+"px";a.codeDiv.innerHTML="<div>&nbsp;</div>"}var e="";if(f!=""&&a.selectedIndex>=0&&a.items[a.selectedIndex]!=c)e=a.items[a.selectedIndex][2];a.codeDiv.firstChild.innerHTML="&nbsp;"+e;a.codeDiv.style.visibility="visible"}else if(a.codeDiv!=c)a.codeDiv.style.visibility="hidden";a.onsetcode(f)};CompanyAutoComplete.prototype.onsetcode=function(){};CompanyAutoComplete.prototype.onrequest=function(b){var a=this;if(a.codeDiv!=null)if(b==true)a.codeDiv.firstChild.style.background="";else if(b==false)a.codeDiv.firstChild.style.background="";else a.codeDiv.firstChild.style.background="url(/images/trav/airwaitgreen.gif) top right no-repeat"};CompanyAutoComplete.prototype.getCurrentCompanyStruct=function(){return this.selectedIndex==-1?null:this.getCompanyStruct(this.selectedIndex)};CompanyAutoComplete.prototype.getCompanyStruct=function(c){var b=this.items[c];if(!b)return null;var a=[];a.companyId=b[0];a.companyName=b[1];a.companyDomain=b[2];return a};var xxx_globalCompanyACcache_xxx=[];function ShowCompanyAC(a,e,d,b,c){if(!a.myPopup){if(CNQR.ProdStatus=="dev"){a.getAttribute("autocomplete")==null&&alert('Please add an attribute called autocomplete = "off" to the form field: '+a.name);!a.id&&alert('Please add an "ID" attribute to: '+a.name)}if(b===undefined||b==null)b="240px";companyAC=new CompanyAutoComplete;if(c!=undefined)companyAC.url="/Javascript/Service/company.asp?f="+escape(c)+"&c=";companyAC.isStrictDocType=d==true||window.otUseStrict;companyAC.create(a.id+"_companyAC");companyAC.attachTo(a,e,b);companyAC.setupHttpRequest();companyAC.cache=xxx_globalCompanyACcache_xxx;return companyAC}}function ShowCompanyACInactiveBillable(f,e,c,b,h,g){ShowCompanyAC(f,e);var d="";if(g)d="10";var a;if(c&&b)a="4";else if(c&&!b)a="5";else if(!c&&b)a="6";else a="7";companyAC.url="/Javascript/Service/company.asp?cu="+d+a+"&c="}function ShowAgencyCompanyAC(c,b,a){ShowCompanyAC(c,b,a);companyAC.url="/Javascript/Service/company.asp?a=1&c="}function ShowCustomerAC(c,b,a){ShowCompanyAC(c,b,a);companyAC.url="/Javascript/Service/company.asp?cu=1&c=";companyAC.showCode=false}function ShowCustomerACAll(d,c,b,a){if(a===undefined)a="240px";ShowCompanyAC(d,c,b,a);companyAC.url="/Javascript/Service/company.asp?cu=2&c=";companyAC.showCode=false}function ShowCustomerACAllContract(d,c,b,a){if(a===undefined)a="240px";ShowCompanyAC(d,c,b,a);companyAC.url="/Javascript/Service/company.asp?cu=4&c=";companyAC.showCode=false}function ShowCustomerACAllIncludesInActive(d,c,b,a){if(a===undefined)a="240px";ShowCompanyAC(d,c,b,a);companyAC.url="/Javascript/Service/company.asp?cu=3&c=";companyAC.showCode=false}function ShowCustomerACAllIndirect(d,c,b,a,e){if(a===undefined)a="240px";ShowCompanyAC(d,c,b,a);companyAC.url="/Javascript/Service/company.asp?cu=2&ind="+e+"&c=";companyAC.showCode=false};

//FileName: /javascript/companylocationsautocomplete.js
function CompanyLocationsAutoComplete(){var a=this;a.keyThreshold=2;a.ignoreRegex=/([\-,\s]$)/i;a.cursorHomeOnChange=false;a.maxRows=20}CompanyLocationsAutoComplete.prototype=new DynamicAutoComplete;CompanyLocationsAutoComplete.prototype.constructor=CompanyLocationsAutoComplete;CompanyLocationsAutoComplete.prototype.unload=function(){var a=this;a.unloadCompanyLocationsAutoComplete();a.unloadDynamicAutoComplete();a.unloadAutoComplete();a.unloadPopupList();a.unloadPopupDiv()};CompanyLocationsAutoComplete.prototype.unloadCompanyLocationsAutoComplete=function(){};CompanyLocationsAutoComplete.prototype.ongettext=function(c,a){if(c>=0&&c<this.items.length){var b=this.items[c];if(a.length==2){if(b[4].substring(0,a.length).toLowerCase()==a.toLowerCase()||b[2]!="US"&&b[2].substring(0,a.length).toLowerCase()==a.toLowerCase())return b[1]}else if(b[0].substring(0,a.length).toLowerCase()==a.toLowerCase()||b[1].substring(0,a.length).toLowerCase()==a.toLowerCase()||b[4].substring(0,a.length).toLowerCase()==a.toLowerCase()||b[5].substring(0,a.length).toLowerCase()==a.toLowerCase()||b[9].substring(0,a.length).toLowerCase()==a.toLowerCase())return b[1]}return null};CompanyLocationsAutoComplete.prototype.ondrawitem=function(a){var b=this.items[a];this.divs[a].childNodes[0].innerHTML=b[6]};CompanyLocationsAutoComplete.prototype.ongetid=function(a){if(a>=0){var b=this.items[a];this.textboxidObj.setAttribute("locationId",b[7]);return b[this.getIdIndex]}return null};CompanyLocationsAutoComplete.prototype.onchoosecomplete=function(){var a=this;if(a.selectedIndex>=0){var b=a.items[a.selectedIndex];a.textboxidObj.setAttribute("cityname",b[0]);a.textboxidObj.setAttribute("statename",b[4])}};var gCompanyLocationsRadiusFilter_Longitude=null,gCompanyLocationsRadiusFilter_Latitude=null,gCompanyLocationsRadiusFilter_Params={};function ShowCompanyLocationsAC(b,i,l,c){var a=true,e=null;c=c||{};if(!b.myPopup){if(CNQR.ProdStatus=="dev"){b.getAttribute("autocomplete")==e&&alert('Please add an attribute called autocomplete = "off" to the form field: '+b.name);!b.id&&alert('Please add an "ID" attribute to: '+b.name)}var p=c.c,s=c.tc,t=c.s,r=gCompanyLocationsRadiusFilter_Longitude?gCompanyLocationsRadiusFilter_Longitude:"",q=gCompanyLocationsRadiusFilter_Latitude?gCompanyLocationsRadiusFilter_Latitude:"";CompanyLocationsAC=new CompanyLocationsAutoComplete;CompanyLocationsAC.url="/Javascript/Service/companylocations_lookup.asp?c="+p+"&s="+t+"&lng="+r+"&lat="+q+"&l=";CompanyLocationsAC.isStrictDocType=l==a||window.otUseStrict;CompanyLocationsAC.create(b.id+"_CompanyLocationsAC");CompanyLocationsAC.attachTo(b,i,"240px");CompanyLocationsAC.overflow="auto";CompanyLocationsAC.disableCompletion=a;CompanyLocationsAC.openOnClick=a;CompanyLocationsAC.textboxidObj=i;CompanyLocationsAC.tc=s}c!=e&&Object.extend(CompanyLocationsAC,c);if(CompanyLocationsAC.blurJs!=e){var k=CompanyLocationsAC.blurJs.indexOf("("),g;if(k>0)g=CompanyLocationsAC.blurJs.substring(0,k);else g=CompanyLocationsAC.blurJs;CompanyLocationsAC.onsetid=window[g]}if(CompanyLocationsAC.localArr!=e){CompanyLocationsAC.cache=[];for(var h=2,j=4,d=CompanyLocationsAC.localArr,n=d.length,m=d[0][h],o=d[0][j],f=0;f<n;f++){if(d[f][h]!=m)CompanyLocationsAC.searchCountry=a;if(d[f][j]!=o)CompanyLocationsAC.searchState=a;if(CompanyLocationsAC.searchCountry==a&&CompanyLocationsAC.searchState==a)break}CompanyLocationsAC.intervalHandle=setInterval("DynamicAutoComplete_intervalHandler("+CompanyLocationsAC.myIndex+");",CompanyLocationsAC.interval)}else{CompanyLocationsAC.setupHttpRequest();if(!DynamicAutoComplete.prototype.globalCache[CompanyLocationsAC.url]){DynamicAutoComplete.prototype.globalCache[CompanyLocationsAC.url]={};DynamicAutoComplete.prototype.globalCache[CompanyLocationsAC.url][""]=[]}CompanyLocationsAC.cache=DynamicAutoComplete.prototype.globalCache[CompanyLocationsAC.url]}}function FilterCompanyLocationsByRadius_Success(i){var a,e=i.responseText.evalJSON();if(gOffAirportObj.currLocationBoxName=="Pickup")a=$("carDeliveryLocationDD");else a=$("carCollectionLocationDD");if(a.tagName.toLowerCase()=="select"){while(a.firstChild)a.removeChild(a.firstChild);var f=document.createElement("OPTION");f.value="";f.innerHTML=e.first;a.appendChild(f);for(var c=0;c<e.optgroups.length;c++){var g=document.createElement("OPTGROUP");g.label=e.optgroups[c].label;for(var h=0;h<e.optgroups[c].options.length;h++){var d=e.optgroups[c].options[h],b=document.createElement("OPTION");b.value=d.value;b.innerHTML=d.text;b.setAttribute("locationid",d.locationid);b.setAttribute("cityname",d.cityname);b.setAttribute("statename",d.statename);g.appendChild(b)}a.appendChild(g)}}UpdateOffAirportLocation_Finish(gCompanyLocationsRadiusFilter_Params.rowid,gCompanyLocationsRadiusFilter_Params.vendor,gCompanyLocationsRadiusFilter_Params.iatacode,gCompanyLocationsRadiusFilter_Params.locationCategory,gCompanyLocationsRadiusFilter_Params.locationNumber,gCompanyLocationsRadiusFilter_Params.locationName,gCompanyLocationsRadiusFilter_Params.locationID,gCompanyLocationsRadiusFilter_Params.longitude,gCompanyLocationsRadiusFilter_Params.latitude,gCompanyLocationsRadiusFilter_Params.cityName,gCompanyLocationsRadiusFilter_Params.countryCode)}function FilterCompanyLocationsByRadius_Failure(){UpdateOffAirportLocation_Finish(gCompanyLocationsRadiusFilter_Params.rowid,gCompanyLocationsRadiusFilter_Params.vendor,gCompanyLocationsRadiusFilter_Params.iatacode,gCompanyLocationsRadiusFilter_Params.locationCategory,gCompanyLocationsRadiusFilter_Params.locationNumber,gCompanyLocationsRadiusFilter_Params.locationName,gCompanyLocationsRadiusFilter_Params.locationID,gCompanyLocationsRadiusFilter_Params.longitude,gCompanyLocationsRadiusFilter_Params.latitude,gCompanyLocationsRadiusFilter_Params.cityName,gCompanyLocationsRadiusFilter_Params.countryCode)}function FilterCompanyLocationsByRadius(k,j,i,c,d,e,g,a,b,h,f){gCompanyLocationsRadiusFilter_Longitude=a;gCompanyLocationsRadiusFilter_Latitude=b;gCompanyLocationsRadiusFilter_Params.rowid=k;gCompanyLocationsRadiusFilter_Params.vendor=j;gCompanyLocationsRadiusFilter_Params.iatacode=i;gCompanyLocationsRadiusFilter_Params.locationCategory=c;gCompanyLocationsRadiusFilter_Params.locationNumber=d;gCompanyLocationsRadiusFilter_Params.locationName=e;gCompanyLocationsRadiusFilter_Params.locationID=g;gCompanyLocationsRadiusFilter_Params.longitude=a;gCompanyLocationsRadiusFilter_Params.latitude=b;gCompanyLocationsRadiusFilter_Params.cityName=h;gCompanyLocationsRadiusFilter_Params.countryCode=f;var l="/Javascript/Service/companyLocations_CarColDel.asp?lat="+b+"&lng="+a;new Ajax.Request(l,{onSuccess:FilterCompanyLocationsByRadius_Success,onFailure:FilterCompanyLocationsByRadius_Failure})};

//FileName: /javascript/preferredhotelsautocomplete.js
function PreferredHotelsAutoComplete(){var a=this;a.keyThreshold=2;a.ignoreRegex=/([\-,\s]$)/i;a.cursorHomeOnChange=false;a.maxRows=20}PreferredHotelsAutoComplete.prototype=new DynamicAutoComplete;PreferredHotelsAutoComplete.prototype.constructor=PreferredHotelsAutoComplete;PreferredHotelsAutoComplete.prototype.unload=function(){var a=this;a.unloadPreferredHotelsAutoComplete();a.unloadDynamicAutoComplete();a.unloadAutoComplete();a.unloadPopupList();a.unloadPopupDiv()};PreferredHotelsAutoComplete.prototype.unloadPreferredHotelsAutoComplete=function(){};PreferredHotelsAutoComplete.prototype.ongettext=function(c,a){if(c>=0&&c<this.items.length){var b=this.items[c];if(a.length==2){if(b[7].substring(0,a.length).toLowerCase()==a.toLowerCase()||b[9]!="US"&&b[9].substring(0,a.length).toLowerCase()==a.toLowerCase())return b[3]}else if(b[6].substring(0,a.length).toLowerCase()==a.toLowerCase()||b[3].substring(0,a.length).toLowerCase()==a.toLowerCase()||b[7].substring(0,a.length).toLowerCase()==a.toLowerCase()||b[8].substring(0,a.length).toLowerCase()==a.toLowerCase())return b[3]}return null};PreferredHotelsAutoComplete.prototype.ondrawitem=function(a){var b=this.items[a];this.divs[a].childNodes[0].innerHTML=b[4]};PreferredHotelsAutoComplete.prototype.ongetid=function(a){if(a>=0){var b=this.items[a];this.textboxidObj.setAttribute("propertyId",b[0]);return b[this.getIdIndex]}return null};var gCompanyLocationsRadiusFilter_Longitude=null,gCompanyLocationsRadiusFilter_Latitude=null,gCompanyLocationsRadiusFilter_Params={};function ShowPreferredHotelsAC(c,i,m,a){var b=true,e=null;a=a||{};if(!c.myPopup){if(CNQR.ProdStatus=="dev"){c.getAttribute("autocomplete")==e&&alert('Please add an attribute called autocomplete = "off" to the form field: '+c.name);!c.id&&alert('Please add an "ID" attribute to: '+c.name)}var s=a.c,l=a.tc,t=a.s,r=a.gds,q=a.hotelName;PreferredHotelsAC=new PreferredHotelsAutoComplete;PreferredHotelsAC.url="/Javascript/Service/hotels.asp?tc="+l+"&gds="+r+"&hotelName="+q;PreferredHotelsAC.isStrictDocType=m==b||window.otUseStrict;PreferredHotelsAC.create(c.id+"_PreferredHotelsAC");PreferredHotelsAC.attachTo(c,i,"300px");PreferredHotelsAC.overflow="auto";PreferredHotelsAC.disableCompletion=b;PreferredHotelsAC.openOnClick=b;PreferredHotelsAC.textboxidObj=i;PreferredHotelsAC.tc=l}a!=e&&Object.extend(PreferredHotelsAC,a);if(PreferredHotelsAC.blurJs!=e){var k=PreferredHotelsAC.blurJs.indexOf("("),g;if(k>0)g=PreferredHotelsAC.blurJs.substring(0,k);else g=PreferredHotelsAC.blurJs;PreferredHotelsAC.onsetid=window[g]}if(PreferredHotelsAC.localArr!=e){PreferredHotelsAC.cache=[];for(var h=9,j=7,d=PreferredHotelsAC.localArr,o=d.length,n=d[0][h],p=d[0][j],f=0;f<o;f++){if(d[f][h]!=n)PreferredHotelsAC.searchCountry=b;if(d[f][j]!=p)PreferredHotelsAC.searchState=b;if(PreferredHotelsAC.searchCountry==b&&PreferredHotelsAC.searchState==b)break}PreferredHotelsAC.intervalHandle=setInterval("DynamicAutoComplete_intervalHandler("+PreferredHotelsAC.myIndex+");",PreferredHotelsAC.interval)}else{PreferredHotelsAC.setupHttpRequest();if(!DynamicAutoComplete.prototype.globalCache[PreferredHotelsAC.url]){DynamicAutoComplete.prototype.globalCache[PreferredHotelsAC.url]={};DynamicAutoComplete.prototype.globalCache[PreferredHotelsAC.url][""]=[]}PreferredHotelsAC.cache=DynamicAutoComplete.prototype.globalCache[PreferredHotelsAC.url]}};

//FileName: /javascript/railstationautocomplete.js
var xxx_globalRailACcache_xxx={};xxx_DefaultRailAutoCompleteOptions_xxx={strictDocType:false,protTravelConfigId:"",showHubs:false,countrySearch:false,customLang:"",showMinorRailStations:false,showCityCodes:false,railCarrierCode:""};function drawRailStationInputField(a,c,f,d,b,g,e){e=e||"";if(c=="")a.innerHTML="";else if(String(cRailDCCarriers).indexOf(c)!=-1){f&&f.remove();a.innerHTML="";a.innerHTML=a.innerHTML+'<input type="hidden" name="'+d+'" id="'+d+'" value="'+e+'" />';a.innerHTML=a.innerHTML+'<label for="'+b+'">'+g+"<label><br />";a.innerHTML=a.innerHTML+'<input id="'+b+'" name="'+b+'"class="airportautocomplete railstation_autocomplete railstation_deutschebahn_picker" type="text" maxlength="99" value="" autocomplete="off" style="width:250px;" onfocus="ShowRailStationAC(this, \''+d+"', {railCarrierCode: '"+c+"', showHubs: true });\" />"}else a.innerHTML=""}function RailAutoComplete(k,h,i,b,f,g,e){var a=this,d=k,j=h?h:"",o=i?i:0,m=b?b:0,n=f?f:0,l=g?g:0;a.countrySearch=b!=null&&b==1?true:false;a.codeDiv=null;a.travelconfig=j;var c;try{c=OTLangID}catch(p){c="en-us"}if(e!=null&&e!="")c=e;a.url="/Javascript/Service/LocationAutoComplete.asp?carrierCode="+d+"&language="+escape(c)+"&displayHubs="+escape(o)+"&countrySearch="+escape(m)+"&travelConfig="+escape(j)+"&includeMinorRailStations="+escape(n)+"&includeCityCodes="+escape(l)+"&searchString=";a.keyThreshold=d=="Z0"?2:3;a.ignoreRegex=/([,]|\s$)/i;a.cursorHomeOnChange=true;a.railCarrierCode=d;switch(d){case"2A":if(typeof initialSearchData_rail_BIBE!=="undefined")a.initialDataSet=initialSearchData_rail_BIBE}}RailAutoComplete.prototype=new DynamicAutoComplete;RailAutoComplete.prototype.constructor=RailAutoComplete;RailAutoComplete.prototype.unload=function(){var a=this;a.unloadRailAutoComplete();a.unloadDynamicAutoComplete();a.unloadAutoComplete();a.unloadPopupList();a.unloadPopupDiv()};RailAutoComplete.prototype.unloadRailAutoComplete=function(){this.codeDiv=null};RailAutoComplete.prototype.ongettext=function(j,f){var c=", ",i=" - ",d=this;if(j>=0&&j<d.items.length){var o=[],a=d.items[j],e=[5,1,2];if(d.railCarrierCode!="Z0"&&d.keyThreshold<3||d.railCarrierCode=="Z0"&&d.keyThreshold<2)e[e.length]=8;if(d.countrySearch==true)e[e.length]=4;for(var k=0;k<e.length;k++){var m=true,b="";switch(e[k]){case 1:b+=a[3];break;case 2:m=false;for(var g=b.split(" "),n=false,h=0;h<g.length&&!n;h++)if(!/(RailStation|flughafen|aerop|arpt|intl|aeroporto|international|intern|intern\.|internacional|aeropuerto|aroport|municipal|apt|luchthaven|int\.)/i.test(g[h])){b=g[h];for(var l=h+1;l<g.length;l++)b+=" "+g[l];b+=i+a[1]+(a[3]!=""?c:"")+a[3];if(b.substring(0,f.length).toLowerCase()==f.toLowerCase())return b}break;case 3:b+=c+a[1]+i+a[2];break;case 4:b+=c+a[1]+(a[3]!=""?c:"")+a[3]+i+a[2];break;case 5:if(d.railCarrierCode=="2V")b+=a[1]+c+a[3];else b+=a[1]+c+a[4];break;case 8:b+=c+a[1]+(a[3]!=""?c:"")+a[3]+i+a[2]}if(m&&b.substring(0,f.length).toLowerCase()==f.toLowerCase())return b}if(f.toLowerCase()==a[7].toLowerCase())return a[1]+c+a[4]}return null};RailAutoComplete.prototype.ongetid=function(a){return a>=0?this.items[a][7]:null};RailAutoComplete.prototype.ondrawitem=function(d){var b=this,a=b.items[d],k=a[0],m=a[7],f=a[1],l=a[2],j=a[3],g=a[4],n=a[5],i=a[6],e=a[9],c="";c+="&nbsp;";if(i=="1")c+='<span class="cnqr-bold">'+f+", "+g+"</span>";else if(b.railCarrierCode=="2V")c+=f+", "+j;else c+=f+", "+g;if(e!=null&&e!=""){var h=b.parseSize(b.divs[d].offsetLeft)+b.parseSize(b.divs[d].offsetWidth)-61;if(!document.all||b.isStrictDocType)h-=2;c+='<div style="position: absolute; overflow: wrap; opacity: 0.85; filter: alpha(opacity=85); text-align: center; top: 2px; left: '+h.toString()+'px; width: 60px; border: 1px solid royalblue; background-color: white; color:royalblue; font-size: 7pt;">&nbsp;'+e+"&nbsp;</div>"}b.divs[d].childNodes[0].innerHTML=c};RailAutoComplete.prototype.onsetid=function(b){var a=this;if(a.codeDiv!=null){if(/[0-9]+/.test(b))b=a.items[a.selectedIndex][5];a.codeDiv.style.visibility="hidden"}a.onsetiata(b)};RailAutoComplete.prototype.onsetiata=function(){};RailAutoComplete.prototype.getCurrentRailStationStruct=function(){return this.selectedIndex==-1?null:this.getRailStationStruct(this.selectedIndex)};RailAutoComplete.prototype.getRailStationStruct=function(c){var b=this.items[c];if(!b)return null;var a=[];a.sortPriority=b[0];a.cityName=b[1];a.displayName=b[2];a.state=b[3];a.countryName=b[4];a.cityCode=b[5];a.isMajor=b[6];a.RailStationKey=b[7];a.countryCode=b[8];a.near=b[9];a.xPos=b[10];a.yPos=b[11];a.mapNum=b[12];a.latitude=b[13];a.longitude=b[14];a.RailStationRegion=b[15];a.cityLatitude=b[16];a.cityLongitude=b[17];return a};function ShowRailStationAC(b,m,f){var d="-",i=null;if(!b.myPopup){f=f||{};if(CNQR.ProdStatus=="dev"){b.getAttribute("autocomplete")==i&&alert('Please add an attribute called autocomplete = "off" to the form field: '+b.name);!b.id&&alert('Please add an "ID" attribute to: '+b.name);var k;for(k in f)xxx_DefaultRailAutoCompleteOptions_xxx[k]==i&&alert("'"+k+"' is not an option for ShowRailStationAC!")}var a={},e;for(e in xxx_DefaultRailAutoCompleteOptions_xxx)if(xxx_DefaultRailAutoCompleteOptions_xxx.hasOwnProperty(e))a[e]=f[e]==i?xxx_DefaultRailAutoCompleteOptions_xxx[e]:f[e];railAC=new RailAutoComplete(a.railCarrierCode,a.protTravelConfigId,a.showHubs?1:0,a.countrySearch?1:0,a.showMinorRailStations?1:0,a.showCityCodes?1:0,a.customLang);railAC.minWidth=300;railAC.isStrictDocType=a.strictDocType==true||window.otUseStrict;railAC.create(b.id+"_railAC");railAC.attachTo(b,m,a.width);railAC.setupHttpRequest();railAC.overflow="auto";var r=a.protTravelConfigId?a.protTravelConfigId:"",s=a.showHubs?1:0,o=a.countrySearch?1:0,t=a.customLang?a.customLang:"",p=a.showMinorRailStations?1:0,n=a.showCityCodes?1:0,q=a.railCarrierCode,j="["+q+d+r+d+s+d+o+d+t+d+p+d+n+"]";if(xxx_globalRailACcache_xxx[j]==i){var h=[];h[""]=[];xxx_globalRailACcache_xxx[j]=h}railAC.cache=xxx_globalRailACcache_xxx[j];var h;for(var c in railAC.initialDataSet)if(railAC.initialDataSet.hasOwnProperty(c)){h=[];for(var g in railAC.initialDataSet[c])if(railAC.initialDataSet[c].hasOwnProperty(g)){railAC.cache["_"+g]=railAC.initialDataSet[c][g];for(var l=0;l<railAC.initialDataSet[c][g].length;l++)h.push(railAC.initialDataSet[c][g][l])}railAC.cache["_"+c]=h}}};

//FileName: /javascript/travel/travelhome_rail.js
var whichButtonWasClicked,gRail;if(!gRail)gRail={};gRail.cDeutscheBahnDateRange=90;gRail.cSNCFDateRange=120;gRail.cAmtrakDateRange=330;gRail.cTrainlineDateRange=330;var railTypeOneWayTab=[],railTypeRoundTripTab=[],railTypeOpenReturnTab=[],railTypeMultiCityTab=[];function changeRailType(x,hb){var fb="fieldsetHr",eb="railSearchFieldset",db="SNCFPromoFaresDiv",cb="companionsDiv",bb="promotionalFaresPinDiv",ab="bahnCardExistsDiv",Z="amtrakAllowCarHotelDiv",Y="promotionalFaresDiv",X="railShopTypeDiv",W="allowFirstClass",V="directTrainsOnlydiv",U="rail_refundablediv",D="TravelAvailabilityJS",u="railTimeSideSet",O="sncf_companions",N="trainline_companions",e="",d="block",M="amtrakSearchButton",L="searchOnDBButton",T="creditCardSection",c=true,b="none",a=false,p="rail_",K="#railTabDiv div.dutyStationPicker",C="railTripTypeMultiLabel",t="railTripTypeMulti",B="railTripTypeOpenLabel",s="railTripTypeOpen",J="railTripTypeOne",I="railTripTypeRound",n=$$("input:checked[type=radio][name=railTripTypeSet]")[0].value;if(!hb&&(document.frmMain.railType==undefined||x==document.frmMain.railType.value))return;if(railTypeRoundTripTab.length===0){railTypeRoundTripTab[0]=$(I);railTypeRoundTripTab[1]=$("railTripTypeRoundLabel")}if(railTypeOneWayTab.length===0){railTypeOneWayTab[0]=$(J);railTypeOneWayTab[1]=$("railTripTypeOneLabel")}if(railTypeOpenReturnTab.length===0){railTypeOpenReturnTab[0]=$(s);railTypeOpenReturnTab[1]=$(B)}if(railTypeMultiCityTab.length===0){railTypeMultiCityTab[0]=$(t);railTypeMultiCityTab[1]=$(C)}$$(K).each(function(a){a.hide()});var q=$(p+x),A=a,f=b,o=a,y=a,r=a,v=a,m=a,Q=a,j=a,z=a,S=a,h=a,F=a,R=a,H=a,w=a,g=x!=document.frmMain.railType.value,P=a,G=a,k=a,i=a;switch(x){case gRail.cRailTypeAmtrak:k=a;i=a;if(gRail.getRailEnabled[gRail.cAmtrakViaPrimaryGDS]){A=c;f=gRail.cAmtrakViaPrimaryGDS;h=amtrakAllowCarAndHotel;break}if(gRail.getRailEnabled[gRail.cGDSName_Amtrak]){$$(K).each(function(a){a.show()});f=gRail.cGDSName_Amtrak;j=c;h=c;A=c}break;case gRail.cRailTypeBIBE:case gRail.cRailTypeDeutscheBahn:if(gRail.getRailEnabled[gRail.cGDSName_DeutscheBahn]){q=$(p+gRail.cRailTypeAmtrak);f=gRail.cGDSName_DeutscheBahn;o=c;r=a;v=a;m=allowDBfirstClass;j=a;z=c;h=c}if(gRail.getRailEnabled[gRail.cNonGDSName_BIBE])if(gRail.bibeShopHere){q=$(p+gRail.cRailTypeAmtrak);f=gRail.cGDSName_DeutscheBahn;o=c;w=a;r=c;v=c;m=allowDBfirstClass;j=c;z=c;h=c;k=a;G=a;i=a}else{q=$(p+gRail.cRailTypeAmtrak);f=gRail.cGDSName_DeutscheBahn;o=c;w=a;r=a;v=a;m=allowDBfirstClass;j=a;z=c;h=c;G=c;k=a;i=c}break;case gRail.cRailTypeSNCF:if(gRail.getRailEnabled[gRail.cGDSName_SNCF]){k=a;q=$(p+gRail.cRailTypeAmtrak);f=gRail.cGDSName_SNCF;o=gRail.tc2.SNCF.AllowArriveBy;r=c;v=c;m=allowSNCFfirstClass;j=c;h=c;w=c;P=c;i=a}break;case gRail.cRailTypeTrainline:if(gRail.getRailEnabled[gRail.cGDSName_Trainline]){k=a;q=$(p+gRail.cRailTypeAmtrak);f=gRail.cGDSName_Trainline;y=c;r=a;j=c;h=c;F=c;m=allowTrainlinefirstClass;supportSearchWindow=c;R=c;S=c;H=c;i=a}if(gRail.getRailEnabled[gRail.cNonGDSName_Evolvi]){k=c;i=a;h=c}break;case gRail.cRailTypeVIARail:k=c;i=c;if(gRail.getRailEnabled[gRail.cNonGDSName_ViaRail])h=c;break;case gRail.cRailTypeSilverRail:k=a;i=a;$$(K).each(function(a){a.show()});f=gRail.cGDSName_SilverRail;j=a;A=a;q=$(p+gRail.cRailTypeAmtrak);m=allowSilverRailFirstClass}if(i)$(T).show();else $(T).hide();if(k){$(L).hide();$(M).hide()}else if(G){$(L).show();$(M).hide()}else{$(L).hide();$(M).show()}$$("#railTabDiv div.railSearchDiv").each(function(a){if(a===q)a.show();else a.hide()});var E=document.getElementById("railtype");if(A){!$(t)&&E.insert({bottom:railTypeMultiCityTab[0]});!$(C)&&E.insert({bottom:railTypeMultiCityTab[1]})}else{$(t)&&$(t).remove();$(C)&&$(C).remove()}if(R){!$(s)&&E.insert({bottom:railTypeOpenReturnTab[0]});!$(B)&&E.insert({bottom:railTypeOpenReturnTab[1]})}else{$(s)&&$(s).remove();$(B)&&$(B).remove()}if($(I)&&$(I).value==n)setRadioVal(document.frmMain.railTripTypeSet,n);else if($(J)&&$(J).value==n)setRadioVal(document.frmMain.railTripTypeSet,n);else if($(s)&&$(s).value==n)setRadioVal(document.frmMain.railTripTypeSet,n);else if($(t)&&$(t).value==n)setRadioVal(document.frmMain.railTripTypeSet,n);else setRadioVal(document.frmMain.railTripTypeSet,0);$$("#railTabDiv select.railstationamtrak").each(function(a){a.style.display=f==gRail.cAmtrakViaPrimaryGDS?d:b;if(g)a.selectedIndex=0});$$("#railTabDiv input.railstation_amtrak_picker").each(function(a){a.style.display=f==gRail.cGDSName_Amtrak?d:b;if(g)a.value=e});$$("#railTabDiv span.railstation_amtrak_picker").each(function(a){a.style.display=f==gRail.cGDSName_Amtrak?d:b;if(g)a.value=e});$$("#railTabDiv span.railstationamtrak").each(function(a){a.style.display=f==gRail.cAmtrakViaPrimaryGDS?d:b;if(g)a.value=e});$$("#railTabDiv input.railstation_deutschebahn_picker").each(function(a){a.style.display=f==gRail.cGDSName_DeutscheBahn?d:b;if(g)a.value=e});$$("#railTabDiv span.railstation_deutschebahn_picker").each(function(a){a.style.display=f==gRail.cGDSName_DeutscheBahn?d:b;if(g)a.value=e});$$("#railTabDiv input.railstation_sncf_picker").each(function(a){a.style.display=f==gRail.cGDSName_SNCF?d:b;if(g)a.value=e});$$("#railTabDiv span.railstation_sncf_picker").each(function(a){a.style.display=f==gRail.cGDSName_SNCF?d:b;if(g)a.value=e});$$("#railTabDiv div.railstation_sncf_picker").each(function(a){a.style.display=f==gRail.cGDSName_SNCF?"inline":b});$$("#railTabDiv input.railstation_trainline_picker").each(function(a){a.style.display=f==gRail.cGDSName_Trainline?d:b;if(g)a.value=e});$$("#railTabDiv span.railstation_trainline_picker").each(function(a){a.style.display=f==gRail.cGDSName_Trainline?d:b;if(g)a.value=e});$$("#railTabDiv input.railstation_silverrail_picker").each(function(a){a.style.display=f==gRail.cGDSName_SilverRail?d:b;if(g)a.value=e});$$("#railTabDiv span.railstation_silverrail_picker").each(function(a){a.style.display=f==gRail.cGDSName_SilverRail?d:b;if(g)a.value=e});if($(N))if(F)$(N).style.display=d;else $(N).style.display=b;if($(O))if(w)$(O).style.display=d;else $(O).style.display=b;if($("railTimeSideSet0"))for(var l=0;l<=gRail.maxSegs;l++){$(u+l).disabled=!(o||y);$(u+l).value="D";$("railTimeSideSpan"+l).style.display=o||y?d:b;if(y){$(u+l).options[0].text=OTGetUserMessage(D,"ArriveBefore");$(u+l).options[1].text=OTGetUserMessage(D,"LeaveAfter")}if(o){$(u+l).options[0].text=OTGetUserMessage(D,"ArriveBy");$(u+l).options[1].text=OTGetUserMessage(D,"DepartAfterRail")}}if(document.frmMain._railClass&&document.frmMain._railClass.options[2]){if(!Q&&document.frmMain._railClass.options[2]===null)document.frmMain._railClass.options[2]=new Option(OTGetUserMessage("SharedXsl","Any"),e);if(Q&&document.frmMain._railClass.options[2]!==null)document.frmMain._railClass.options[2]=null}var gb=gRail.tc2.SearchParams.ShowRefundableOnly;if($(U))$(U).style.display=r&&gb?d:b;if($(V))$(V).style.display=v?d:b;if($(W))$(W).style.display=m?d:b;if($(X))$(X).style.display=j?d:b;if($(Y))$(Y).style.display=S?d:b;if($(Z))$(Z).style.display=!h?d:b;if($(ab))$(ab).style.display=z?d:b;if($(bb))$(bb).style.display=H?d:b;if($(cb))$(cb).style.display=H?d:b;if($(db))$(db).style.display=P?d:b;if(!m&&!j&&(!w||!F)){$(eb).hide();$(fb).hide()}else{$(eb).show();$(fb).show()}document.frmMain.railType.value=x}function updateAirShopTypeFromRail(){var c="shopType",b="railShopType1";if($(b)){var a=$(b).checked==true?1:0;if($(c+a)){var d=$(c+a);$("fltSearchBySet").value=$("railSearchBySet").value;d.checked!=true&&d.click()}}}function validate_credit(a,q,m){var p="CreditCardValidateJs",o="FailedAidaGeneration",d="Travel",f=true,c=false,g="";if(exists(a.paymentType)){for(var k=c,l=document.getElementsByName("paymentType"),j=0;j<l.length;j++){var s=l[j];if(s.checked==f){g=s.value;k=f}}if(k===c){alert(OTGetUserMessage(d,"MustSelectPaymentType"));return c}}var b;if(g=="forcedMeetingCard")return f;if(g=="ddCard"||!q){if(a.frmCardNumber)if(a.frmCardNumber.options[a.frmCardNumber.selectedIndex].value=="None"){b=OTGetUserMessage("TravelAvailabilityJs","SelectCardMsg");alert(b);tryFocus(a.frmCardNumber);return c}var u=document.frmMain.frmCardNumber.options[document.frmMain.frmCardNumber.selectedIndex].getAttribute("status");switch(u){case"expired":b=OTGetUserMessage("TravelAvailabilityJS","SelectedCardIsExpired");break;case"willexpire_ticketing":b=OTGetUserMessage(d,"SelectedCardWillExpire2");break;case"willexpire":b=OTGetUserMessage(d,"SelectedCardWillExpire");break;case"notSupportedForDirectConnect":b=OTGetUserMessage(d,"SelectedCardIsNotDirectConnect");break;case"incompleteBillingInfo":b=OTGetUserMessage(d,"SelectedCardHasBadBillingInfo");break;case o:b=OTGetUserMessage(d,o)}if(b){alert(b);return c}}else if(exists(a.paymentType)&&g=="tempCard"){var t,e;if(a.creditCardType.selectedIndex>=1){t=a.creditCardType[a.creditCardType.selectedIndex].value;e=a.creditCardNumber.value;e=e.replace(/\D/g,"");if(e.length==0){alert(OTGetUserMessage(p,"CardNotValid"));tryFocus(a.creditCardNumber);return c}else e=a.frmCardNumber.value}else{alert(OTGetUserMessage(p,"InvalidCardType"));return c}if(q)if(m!=""){for(var r=c,n=m.split(","),h,i=0;i<n.length;i++){h=n[i];if(h==e.substring(0,h.length)){r=f;break}}if(!r){b=document.frmMain.binErrorMsg.value;alert(b);return c}}}return f}function db_submit(a,c,b){if(!validate_credit(a,c,b))return false;rail_submit(a)}function via_rail_submit(a,c,b){if(!validate_credit(a,c,b))return false;portalTravelSearch(a,"R")}function rail_submit(a){var w="_trainlineCompanions",v="_sncfCompanions",u="railTime",t="BeSureDatesAreSequential",s="TripSegmentJs",r="tripSegmentJS",f="railDate",c=false,j=parseInt(a.railTripType.value,10);gIsQuickTravel=true;var d=getMaxRailSegs(maxRailSegs);if(CNQR.IsGovtSite){var l="rail_submit";if(!checkForSelectedAuthorization())return c;if(CNQR.cgeUIVersion>=2){if(!CNQR.TDYLocationValidation.skipTDYLocationValidation&&$$(".dutystation").length>0){TDYLocationValidation(l,[a]);return c}CNQR.TDYLocationValidation.skipTDYLocationValidation=c}if($("crossFundOrgSelect")&&CNQR.crossFundOrg&&!CNQR.crossFundOrg.skipCrossFundOrgConfirm){crossFundOrgConfirm(l,[a]);return c}if(window.CNQR.SurgeTravelDateValidation&&window.CNQR.SurgeTravelDateValidation.isSurgeTravel&&!window.CNQR.SurgeTravelDateValidation.skipSurgeTravelDateValidation){for(var q,g=0;g<=d;g++)if(g+1<=d){var n=a[f+g],k=a[f+(g+1)];i=JSUnformatDate(n.value);h=JSUnformatDate(k.value);q=validateSurgeTravelDates(l,[a],i,h,n,k)}if(q)return c}}for(var p,b=0;b<=maxRailSegs;b++){p=$F("railTimeSideSet"+b);$("timeSide"+b).value=p}var a=document.frmMain;if(a.railType.value==gRail.cRailTypeDeutscheBahn){if(!CheckOneCityInGermany())return;if(!CheckBahnCard100AndCrossBorder())return}for(var o=0;o<=d;o++)if(!validateRailFields(a,o,j))return c;if(a.railType.value==gRail.cRailTypeDeutscheBahn||a.railType.value==gRail.cRailTypeSNCF||a.railType.value==gRail.cRailTypeAmtrak||a.railType.value==gRail.cRailTypeEvolvi){var e;if(a.railType.value==gRail.cRailTypeDeutscheBahn)e=gRail.cDeutscheBahnDateRange;else if(a.railType.value==gRail.cRailTypeSNCF)e=gRail.cSNCFDateRange;else if(a.railType.value==gRail.cRailTypeTrainline)e=gRail.cTrainlineDateRange;else e=gRail.cAmtrakDateRange;var m=new Date;m.setDate(m.getDate()+e);var C=JSUnformatDate(a[f+d].value);if(C>m){var E=OTFormatUserMessage(r,"ScheduleNotAvailableMsg",e);if(!confirm(E))return}for(var b=0;b<=d;b++)if(b+1<=d){var n=a[f+b],k=a[f+(b+1)],i=JSUnformatDate(n.value),h=JSUnformatDate(k.value);if(i.valueOf()>h.valueOf()){k.focus();alert(OTFormatUserMessage(s,t));return c}if(i.valueOf()==h.valueOf()){var D=a[u+b],x=a[u+(b+1)];if(parseInt(x.value,10)<=parseInt(D.value,10)){alert(OTFormatUserMessage(s,t));x.focus();return c}}}}var B=a["railArrCity"+d].value;if(j==cTripMultiSeg&&d<maxRailSegs){var A=OTFormatUserMessage(r,"TripEndsAt",B,"\n");if(!confirm(A))return}a.NumRailSegs.value=d;a.RailHighestCity.value=getRailHighestCity();document.frmMain.railOnlySearch.value="Y";if(a.railType.value==gRail.cRailTypeDeutscheBahn||a.railType.value==gRail.cRailTypeSNCF||a.railType.value==gRail.cRailTypeAmtrak||a.railType.value==gRail.cRailTypeEvolvi||a.railType.value==gRail.cRailTypeTrainline)a.tripType.value=j;$("railClass").value=$("_railClass").value;if(a.railType.value===cRailTypeSNCF){var y=a.railrailArrCity0_sncf.value||"",z=a.railrailDepCity0_sncf.value||"";if(makeAdvantageCardCheck(y,z,j)){checkSNCFAdvantageCard(whichButtonWasClicked.id,y,z);return}if($(v))$("sncfCompanions").value=parseInt($(v).value,10)-1}if(a.railType.value===cRailTypeTrainline)if($(w))$("trainlineCompanions").value=parseInt($(w).value,10)-1;if(typeof BookingSwitch==="function")if(typeof window.checkCteBookingSwitchRan==="undefined"){var F=BookingSwitch.InitializeConcurTravelRailTab().Send(function(a){window.checkCteBookingSwitchRan=true;a==="online"&&$("btnRailLaunchWizard_"+whichButtonWasClicked.value).click()});return c}portalTravelSearch(a,"R")}function compareTime(){}function validateRailFields(b,a,i){var h="WizardMapJs",c=false,g="railArrCity",f="railDepCity";if(!(i==cTripRoundTrip&&a==1)){var d=b[f+a],e=b[g+a];if(isBlank(d.value)||d.value=="-"){alert(OTGetUserMessage("Geocode","PleaseEnterDepartureRailStation"));tryFocus(b[f+a]);return c}if(isBlank(e.value)||e.value=="-"){alert(OTGetUserMessage("Geocode","PleaseEnterArrivalRailStation"));tryFocus(b[g+a]);return c}if(e.value==d.value){alert(OTGetUserMessage(h,"ToFromSameStation"));tryFocus(d);return c}if(a>1){var j=b.railDepCity0;if(d.value==j.value){alert(OTGetUserMessage(h,"AlreadyHome"));return c}}}return!validateDates(b,a,i)?c:true}function validateDates(e,c,d){var b="TravelAvailabilityJS",a;if(d!=cTripMultiSeg&&c%2==1)a=OTGetUserMessage(b,"ReturnDate");else a=OTGetUserMessage(b,"DepartureDate");return!check_ff_Date(e["railDate"+c],a)?false:true}function getMaxRailSegs(f){var c="undefined",a=0,g=parseInt(document.frmMain.railTripType.value,10);switch(g){case cTripOpenReturn:case cTripOneWay:a=0;break;case cTripRoundTrip:a=1;break;default:for(var b=0;b<=f;b++){var e=document.frmMain["railDepCity"+b],d=document.frmMain["railArrCity"+b];if(typeof e==c||typeof d==c)var h=document.frmMain.multiSegSuffix.value,d=document.frmMain["railfltArrCityActual"+b+"_"+h];if(typeof e==c||typeof d==c)break;if(e.value==""||d.value==""){a=b-1;break}else a=b}}if(a<0)a=0;return a}function getRailHighestCity(){var c="railArrCity",b=2,e=document.frmMain.railTripType.value;if(e==cTripMultiSeg)for(var a=1;a<=maxRailSegs;a++){var d=document.frmMain["railDepCity"+a],g=document.frmMain[c+a];if(d.value!=""&&g.value!=""){b++;var f=document.frmMain[c+(a-1)];d.value==f.value}}else b=2;return b}function railSegsDisplay(e){var c="railseg_";for(var b=e=="show"?"block":"none",a=0;a<=maxRailSegs;a++){document.getElementById(c+a).style.display=b;document.getElementById("railseg_railStations_"+a).style.display=b;document.getElementById("div_datetime_"+a).style.display=b;document.getElementById(c+a).style.marginBottom="8px";var d=$$("#raildatelabel_"+a+" [data-id=railDateText]");if(d.length)d[0].innerHTML=OTGetUserMessage("TravelAvailabilityJS","Depart")}}function changeRailTripType(d){var g="railsearchdiv",c="railTabDiv",f="div_datetime_0",e="railseg_railStations_",a="block",b="railseg_",i=$$("[data-id=railDateText]");switch(parseInt(d,10)){case cTripRoundTrip:unHighlightAllRailSegs();railSegsDisplay("hide");document.getElementById(b+0).style.display=a;document.getElementById(b+0).style.marginBottom="0px";document.getElementById(e+0).style.display=a;document.getElementById(f).style.display=a;document.getElementById(b+1).style.display=a;document.getElementById(b+1).style.marginBottom="0px";document.getElementById("div_datetime_1").style.display=a;document.getElementById(c).className=g;var h=$$("#raildatelabel_1 [data-id=railDateText]");if(h.length)h[0].innerHTML=cLangReturn;break;case cTripOpenReturn:case cTripOneWay:unHighlightAllRailSegs();railSegsDisplay("hide");document.getElementById(b+0).style.display=a;document.getElementById(e+0).style.display=a;document.getElementById(f).style.display=a;document.getElementById(c).className=g;break;case cTripMultiSeg:railSegsDisplay("show");document.getElementById(c).className="multisegsearch"}document.frmMain.railTripType.value=d;typeof setMapTripType==="function"&&setMapTripType(d)}function unHighlightAllRailSegs(){for(var a=0;a<=maxRailSegs;a++){currSeg=document.getElementById("railseg_"+a);currSeg.className="railseg"}}function advanceNextRailDates(a){var b="railDate",d=document.getElementById(b+a),c=document.getElementById(b+(parseInt(a,10)+1));if(c!=null){compareDateFieldsAndAdd("d",1,d,c);advanceNextRailDates(parseInt(a,10)+1)}}function railCityIataSet(a){var b=getEventTarget(a);b.myPopup.onsetiata=RailAutoCompleteIataCodeChanged}function railCityReallyBlur(a){var b=getEventTarget(a);b.myPopup.onreallyblur=updateNextRailDepart}function railAutoCompleteIataCodeChanged(b){var a="",f=this.edit.name,j=f.indexOf("Arr")>0,l=f.substring(f.length-1);if(b.length<3)return;b!=a&&populateRailStationDataCache(this,b);if(exists(window.frames.mapframe.currMap)){var e=window.frames.mapframe.currMap,k=j?1:0,d=l*2+k;if(b!=a){var c=this.getCurrentRailStationStruct();if(c){var h=c.xPos,i=c.yPos,g=c.mapNum;b=c.railStationKey}if(exists(e.arrSelectedCities[d]))if(exists(e.arrCities[b]))window.frames.mapframe.currMap.addOrUpdateCityFromForm(d,b,a,a,a,a,a);else window.frames.mapframe.currMap.addOrUpdateCityFromForm(d,b,a,a,h,i,g);else if(exists(e.arrCities[b]))window.frames.mapframe.currMap.addOrUpdateCityFromForm(a,b,a,a,a,a,a);else window.frames.mapframe.currMap.addOrUpdateCityFromForm(a,b,a,a,h,i,g)}window.frames.mapframe.gMapLoaded=true}}function updateNextRailDepart(){if(document.getElementById("railTripTypeMulti").checked==true){var a=this.edit,d=a.name.charAt(a.name.length-8),b=document.frmMain["railrailDepCity"+(parseInt(d,10)+1)+"_amtrak"];if(exists(b)&&b!=null){var e=document.frmMain["railArrCity"+d].value,c=this.getCurrentRailStationStruct();if(c){e=c.cityCode;copyArrToNextRailDepart(a,e)}}}}function copyArrToNextRailDepart(b,c){var e=b.name.charAt(b.name.length-8),d=parseInt(e,10)+1,a=document.getElementById("railrailDepCity"+d+"_amtrak");if(a!=null&&c.length>=3)a.value==""&&kickstartDynamicAutoComplete(a,c)}function initializeRailEvents(){var e="railrailArrCity",d="railArrCity",b="change",c="railDepCity";for(var a=0;a<=maxRailSegs;a++){addEvent(document.getElementById(c+a),b,checkForRemovedCity,false);addEvent(document.getElementById(d+a),b,checkForRemovedCity,false);$(e+a+"_amtrak")&&addEvent($(e+a+"_amtrak"),"focus",railCityReallyBlur,false);document.getElementById(c+a).setAttribute("prefix",a);document.getElementById(d+a).setAttribute("prefix",a);flip_search_type("",a);$("TMRAIL_div_TM_refpoint"+a)&&flip_search_type_tdy("TMRAIL_RefPoint",a);var f=$("railTime"+a);f&&f.observe(b,adjustTheTimeWindow)}}function adjustTheTimeWindow(d){var b,c,a;b=d.element();c=b.readAttribute("data-segment-number");a=$("windowBeforeSet"+c);if(a)if(getSelectedVal(b)==" 12")a.value="12";else{setDDIndexToDefault(a);updateSettingForAirShopType(-1)}}function checkForExpiredCard(){var a=document.frmMain.frmCardNumber.options[document.frmMain.frmCardNumber.selectedIndex].getAttribute("status");if(a=="expired"){msg=OTGetUserMessage("TravelAvailabilityJS","SelectedCardIsExpired");alert(msg);return true}else return false}function checkForBadBillingInfo(){var a=document.frmMain.frmCardNumber.options[document.frmMain.frmCardNumber.selectedIndex].getAttribute("status");if(a=="incompleteBillingInfo"){msg=OTGetUserMessage("TravelAvailabilityJS","SelectedCardHasBadBillingInfo");alert(msg);return true}else return false}function evolviCheckedOK(){var a="TravelAvailabilityJS";if(document.frmMain.isGuest.value==1)alert(OTGetUserMessage(a,"GuestBookingNotSupported"));else if(!hasSomeCardEligibleForRail)alert(OTGetUserMessage(a,"NoEligibleCardDefinedForRail"));else portalTravelSearch(document.frmMain)}function CheckOneCityInGermany(){var b=document.frmMain,a=b.railrailDepCity0_db.value+"|"+b.railrailArrCity0_db.value;if(a.indexOf(", Germany")<0&&a.indexOf(", Deutschland")<0&&a.indexOf(", Allemagne")<0){alert(OTGetUserMessage("TravelAvailabilityJS","AtLeastOneGermanStation"));return false}return true}function CheckBahnCard100AndCrossBorder(){for(var d=document.frmMain,e=d.railrailDepCity0_db.value+"|"+d.railrailArrCity0_db.value,b=e.split("|"),c=0,a=0;a<2;a++)if(b[a].indexOf(", Germany")>=0||b[a].indexOf(", Deutschland")>=0||b[a].indexOf(", Allemagne")>=0)c++;if(typeof bahnCardType!="undefined"&&bahnCardType=="3"&&c==1){alert(OTGetUserMessage("TravelAvailabilityJS","CannotBookCrossBorderWithBahnCard100"));return false}return true}function popupNearestRailStations(a){popupWindow("/twPopup/nearest_airport_search.asp?kickstartFormField="+escape(a)+"&locationType=rail&gdsName=SNCF","nearestairport",785,555,"status=1,scrollbars=1,resizable=1,modal=yes,dialog=yes,dependent=yes,");otHidePopupHelp()};

//FileName: /javascript/travel/travelhome_limo.js
function copyAddressToSubFields(a){var j="Airport",i="Country",h="PostalCode",g="State",f="City",d="",e="Address",c="limo",b=document.frmMain;if(b[c+a+e]&&b[a+e])if(b[c+a+e].value==d||b[a+e].value!=d)b[c+a+e].value=b[a+e].value;if(b[c+a+f]&&b[a+f])if(b[c+a+f].value==d||b[a+f].value!=d)b[c+a+f].value=b[a+f].value;if(b[c+a+g]&&b[a+g])if(b[c+a+g].value==d||b[a+g].value!=d)b[c+a+g].value=b[a+g].value;if(b[c+a+h]&&b[a+h])if(b[c+a+h].value==d||b[a+h].value!=d)b[c+a+h].value=b[a+h].value;if(b[c+a+i]&&b[a+i])if(b[c+a+i].value==d||b[a+i].value!=d)b[c+a+i].value=b[a+i].value;if(b[c+a+j]&&b[a+j])if(b[c+a+j].value==d||b[a+j].value!=d)b[c+a+j].value=b[a+j].value}function limo_submit(a){var b=false;if(a.RuleClassOverride&&a.RuleClassOverride.options&&a.RuleClassOverride.options[a.RuleClassOverride.selectedIndex].value==""){alert(a.NoRuleClassWarning.value);a.RuleClassOverride.focus();return b}if(a.step!=undefined)if(a.step.value=="limochoose")a.action="/travelwizard/wizard_processing.asp?nextpage=twLimoChoose.asp";if(a.limoTimeType!=null)a.limoTimeType.value="0";var d=Array();d.pickupDate=Array("Pickup Date","date");if(!validate_page(d))return b;var e=JSUnformatDate(a.pickupDate.value),c=new Date,f=new Date(c.getFullYear(),c.getMonth(),c.getDate()),g=getDateDiffArray(e,c),h=g[0];if(h>330||e.getTime()<f.getTime()){alert(OTGetUserMessage("TravelPortal","PickupDateTomorrow"));a.pickupDate.focus();a.pickupDate.select();return b}if(!limoLocationFieldsOK("Pickup"))return b;if(!limoLocationFieldsOK("Dropoff"))return b;if(getRadioVal(a.limoPickupType)=="address"){validateLimoAddress("Pickup");return b}else if(getRadioVal(a.limoDropoffType)=="address"){validateLimoAddress("Dropoff");return b}portalTravelSearch(a,"L");return true}var gAddressVerified="";function validateLimoAddress(a){var b=document.frmMain;gAddressVerified=a;var c=b[a+"Address"],d=b[a+"City"],f=b[a+"State"],e=b[a+"Country"],g=b[a+"PostalCode"];if(isBlank(c.value)||isBlank(d.value)){if(isBlank(c.value)){alert(OTGetUserMessage("Geocode","PleaseEnterAddress"));c.focus()}else if(isBlank(d.value)){alert(OTGetUserMessage("Geocode","PleaseEnterCity"));d.focus()}return false}GeocodeLimoAddress(a,c,d,f,g,e)}function GeocodeLimoAddress(c,d,f,e,b,a){var g=document.getElementById("div_Dropoff");GeocoderObj=GetGeocoderObject();GeocoderObj.onchoose=function(){var a=this;if(a.result)geocode_updateLatLong_Limo(a.result.latitude,a.result.longitude,a.result.displayname,a.prefix,a.result.geocodelevel,a.result.street,a.result.city,a.result.state,a.result.zipcode,a.result.country,a.result.district);else geocode_no_results(a.prefix)};GeocoderObj.sendPrefix=false;GeocoderObj.attachSize=300;GeocoderObj.divposition="positionTop";GeocoderObj.divpositionObj=g;GeocoderObj.addressSearch(c,d.value,f.value,e.value,b.value,a.options[a.selectedIndex].value,true)}function geocode_updateLatLong_Limo(o,n,m,a,l,h,j,i,f,c,g){var e="PostalCode",b=document.frmMain;if(h!=""){b[a+"Address"].value=h;if(g!=""&&(c.toUpperCase()=="AR"||c.toUpperCase()=="CL"))b[a+"Address"].value+=", "+g}if(j!="")b[a+"City"].value=j;var k=/[A-Z]{1,2}[0-9]{1,2}[A-Z]{0,1} ?[0-9][A-Z]{2}/i;if(f!="")if(!(c=="GB"&&f.length<b[a+e].value.length&&k.test(b[a+e].value)))b[a+e].value=f;if(i!="")if(c!="GB")b[a+"State"].value=i;if(a=="Pickup"&&getRadioVal(b.limoDropoffType)=="address"){document.location.href.indexOf("twLimoStart")>=0&&copyAddressToSubFields(a);validateLimoAddress("Dropoff")}else{var d=document.location.href;if(d.indexOf("travelhome")>=0||d.indexOf("portal")>=0||d.indexOf("arrangerhome")>=0||d.indexOf("/home")>=0)portalTravelSearch(b,"L");else{copyAddressToSubFields(a);b.submit()}}}function geocode_no_results(a){alert(OTGetUserMessage("Geocode","CouldNotFindLocation")+"\n"+OTGetUserMessage("Geocode","PleaseCheckSpelling"));document.frmMain[a+"Address"].focus();document.frmMain[a+"Address"].select()}function limoLocationFieldsOK(a){var o="Please provide a ",l="Pickup",d="TravelPortal",k="Dropoff",e=false,f="Country",j="Address",i="State",h="City",c="",g="Airport",b=document.frmMain,u=getRadioVal(b["limo"+a+"Type"]);switch(u){case"address":var n=true;b[a+g].value=c;var t=b[a+h],r=b[a+i],s=b[a+j],q=b[a+f];cnt=q.options[q.selectedIndex].value;if(isBlank(r.value)&&(cnt=="CA"||cnt=="US")){r.focus();n=e}if(isBlank(t.value)){t.focus();n=e}if(isBlank(s.value)){s.focus();n=e}if(!n){if(a==k)alert(OTGetUserMessage(d,"LimoEmptyDropoffAddress"));else if(a==l)alert(OTGetUserMessage(d,"LimoEmptyPickupAddress"));else alert("Please enter a complete "+a+" address.");return e}break;case"airport":b[a+j].value=c;b[a+h].value=c;b[a+i].value=c;b[a+"PostalCode"].value=c;var p=b[a+g];if(isBlank(p.value)){if(a==k)alert(OTGetUserMessage(d,"LimoEmptyDropoffAirport"));else if(a==l)alert(OTGetUserMessage(d,"LimoEmptyPickupAirport"));else alert(o+a+" airport");p=b[a+"AirportDisplay"];p.focus();return e}break;case"location":b[a+g].value=c;var m=b["searchCompanyLocation"+a];if(m.selectedIndex<=0){if(a==k)alert(OTGetUserMessage(d,"LimoEmptyDropoffCompanyLocation"));else if(a==l)alert(OTGetUserMessage(d,"LimoEmptyPickupCompanyLocation"));else alert(o+a+" company location");m.focus();return e}if((b[a+f]=="CA"||b[a+f]=="US")&&(isBlank(b[a+j])||isBlank(b[a+h])||isBlank(b[a+i]))){alert(OTGetUserMessage(d,"LimoLocationAddressNotValid"));return e}break;case"hotel":b[a+g].value=c;var m=b["searchPreferredHotels"+a];if(m.selectedIndex<=0){if(a==k)alert(OTGetUserMessage(d,"LimoEmptyDropoffHotel"));else if(a==l)alert(OTGetUserMessage(d,"LimoEmptyPickupHotel"));else alert(o+a+" preferred hotel");m.focus();return e}if((b[a+f]=="CA"||b[a+f]=="US")&&(isBlank(b[a+j])||isBlank(b[a+h])||isBlank(b[a+i]))){alert(OTGetUserMessage(d,"LimoHotelAddressNotValid"));return e}break;case"home":limoSetAddressFields(a,homeAddr,homeCity,homeState,homePostal,homeCountry);break;case"asdirected":limoSetAddressFields(a,c,c,c,c,c)}return true}function limoSetAddressFields(a,e,f,d,g,c){var b=document.frmMain;b[a+"Address"].value=e;b[a+"City"].value=f;b[a+"State"].value=d;b[a+"PostalCode"].value=g;if(c=="  "||c=="")c="US";b[a+"Country"].value=c}function limoLocationType_click(a){var d="none",c="block",g="location",b="_div",m=document.frmMain,e=getRadioVal(document.frmMain["limo"+a+"Type"]),h=document.getElementById("airport"+a+b),i=document.getElementById("address"+a+b),l=document.getElementById(g+a+b),k=document.getElementById("hotel"+a+b),j=document.getElementById("home"+a+b);if(e=="airport"){h.style.display=c;var f=m[a+"AirportDisplay"];if(f.value!="")kickstartDynamicAutoComplete(f,f.value);else f.className="autocomplete"}else h.style.display=d;i.style.display=e=="address"?c:d;l.style.display=e==g?c:d;k.style.display=e=="hotel"?c:d;j.style.display=e=="home"?c:d}var _preferredHotelsCache=[];function preferredHotelsChanged(g,c){var d=this;if(d.items===undefined){var h=g[g.selectedIndex].value,b="propertyid="+escape(h);b+="&tc="+gLimo.tcid;b+="&gds="+gLimo.gdstype;if(_preferredHotelsCache[b]){data=_preferredHotelsCache[b];var a=data[0];limoSetAddressFields(c,a[5],a[6],a[7],a[8],a[9])}else{var e=new HttpRequest;e.timeout=1e4;e.oncomplete=function(status,data){if(status==200)_preferredHotelsCache[b]=eval(data);else _preferredHotelsCache[b]=[["","","","Error",'" + escape(OTGetUserMessage("Geocode", "NoCompanyLocationsGeocoded")) + "',"","","","",""]];var arrayL=_preferredHotelsCache[b][0];limoSetAddressFields(c,arrayL[5],arrayL[6],arrayL[7],arrayL[8],arrayL[9])};e.makeRequest("/javascript/service/hotels.asp?"+b)}}else{var f=d.selectedIndex;if(f>=0){var a=d.items[f],c=d.idEdit.getAttribute("id");c=c.substring("searchPreferredHotels".length);limoSetAddressFields(c,a[5],a[6],a[7],a[8],a[9])}}}function limoCompanyLocationChanged(e,f){var a=this,c,b;if(a.c===undefined){c=e.getAttribute("cid");b=e[e.selectedIndex].getAttribute("locationid");updateLocationAddress(c,b,f)}else if(a.selectedIndex>=0){c=a.c;b=a.items[a.selectedIndex][7];var d=a.idEdit.getAttribute("id");d=d.substring("searchCompanyLocation".length);updateLocationAddress(c,b,d)}}function updateLocationAddress(g,f,d){var e,a="locationid="+escape(f);a+="&companyid="+escape(g);if(_companyLocationsCache[a]){e=_companyLocationsCache[a];var b=e[0];limoSetAddressFields(d,b[9],b[5],b[6],b[7],b[8])}else{var c=new HttpRequest;c.timeout=1e4;c.oncomplete=function(status,data){if(status==200)_companyLocationsCache[a]=eval(data);else _companyLocationsCache[a]=[["","","","Error",'" + escape(OTGetUserMessage("Geocode", "NoCompanyLocationsGeocoded")) + "',"","","","","",""]];var arrayL=_companyLocationsCache[a][0];limoSetAddressFields(d,arrayL[9],arrayL[5],arrayL[6],arrayL[7],arrayL[8])};c.makeRequest("/javascript/service/companyLocations.asp?"+a)}}function updateHotelAddress(e,f){var d=document.getElementById(f+"HotelAddress_div"),a={addr:0,city:1,state:2,zip:3,country:4};if(e.selectedIndex==0){d.innerHTML="";d.style.display="none";return}var b=hotelAddressArray[e.options[e.selectedIndex].value],c="";if(b[a.addr]!="")c+=b[a.addr]+"<br/>";c+=b[a.city];if(b[a.state]!="")c+=", "+b[a.state];c+="<br/>"+b[a.country];d.innerHTML=c;d.style.display="block"}function setLimoHomeAddress(c){var b=document.getElementById("home"+c+"_content"),a=homeAddr+"<br/>"+homeCity;if(homeState!="")a+=", "+homeState;a+="<br/>"+homeCountry;b.innerHTML=a}function limoDiv_init(){var b="limoSearchType",a="disabled";if(homeCity!=""&&homeAddr!=""&&homeCountry!=""&&homeState!=""){document.getElementById("homePickup_radio_div").style.display="block";document.getElementById("homeDropoff_radio_div").style.display="block";setLimoHomeAddress("Dropoff");setLimoHomeAddress("Pickup")}else{$("limoPickupType_home").disabled=a;$("limoDropoffType_home").disabled=a}limoLocationType_click("Dropoff");limoLocationType_click("Pickup");var c=$(b)?$(b).value:"";if(document.frmMain.limoSearchTypeSet)c=getRadioVal(document.frmMain.limoSearchTypeSet)};

//FileName: /javascript/bcal.js
if(!window.OTGetUserMessage&&top.window.OTGetUserMessage)window.OTGetUserMessage=top.window.OTGetUserMessage;var bCalManagers={};function closeCal(){for(i=0;i<this.hiddenSelect.length;i++)this.hiddenSelect[i].style.visibility="visible";nd()}function getInitialDate(a){return a=="today"?new Date:new Date(a)}function changeMonth(e,d){var a=e;if(typeof a=="string")a=window[e];d=parseInt(d,10);var c=0,b=a.calMonth+d;if(b==0){b=12;c=-1}if(b==13){b=1;c=1}a.calMonth=b;a.calYear=a.calYear+c;a.drawCal()}function hideSelects(){if(!document.all)return;var b=this.container,l=b.offsetWidth,j=b.offsetHeight,f=top.cmGetX(b),g=top.cmGetY(b);hiddenSelect=[];for(var k=0,c=0;c<document.all.tags("select").length;++c){var a=document.all.tags("select")[c];if(!a||a.style&&a.style.visibility=="hidden")continue;var d=top.cmGetX(a),e=top.cmGetY(a),i=a.offsetWidth,h=a.offsetHeight;if(d>f+l||d+i<f)continue;if(e>g+j||e+h<g)continue;this.hiddenSelect[k++]=a;a.style.visibility="hidden"}}function getWeekStart(){var a=window.userWeekDayStartPreference||1;return parseInt(a,10)-1}function drawCalendar(l){var i='<span onClick="goToday(',b=this,a="",h,c,n,d=1,k=b.lastDay(),m=b.calMonth==2?7:8,g=new Date,j=(new Date(g.getFullYear(),g.getMonth(),g.getDate())).valueOf(),f=null;if(b.accessibleSelectedDate!=null)f=(new Date(b.accessibleSelectedDate.getFullYear(),b.accessibleSelectedDate.getMonth(),b.accessibleSelectedDate.getDate())).valueOf();if(b.drawTopBar==true)if(b.isOverlib==true){a+='<div style="text-align:right; background-color:2E2E97; height:17px">';a+=i+b.calName+')" style="cursor:pointer;color:white;font-weight:700">Today</span>';a+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";a+='<img alt="" src="images/overlib_close.gif" width="13" height="13" vspace="2" align="absmiddle" onClick="'+b.calName+'.closeCal()"/></span>';a+='<div style="background-color:#9999CC;height:2px; width:134px; margin-right:2px"><img alt="" src="images/dot.gif" height="1"/></div></div>'}else{a+='<div style="text-align:left; background-color:2E2E97; height:17px; padding-top:2px">';a+=i+b.calName+')" class= "cnqr-cursor-pointer">Today</span>';a+='<div style="background-color:#9999CC;height:2px; width:134px"><img alt="" src="images/dot.gif" height="1"/></div></div>'}a+='<div class="bcal_outer" role="application">';a+='<div class="bcalheader">'+b.drawMonthHeader(b.calMonth)+"</div>";a+='<table role="grid" class="bcalmonth" aria-readonly="true" id="'+b.calMainTable+'" class="ui-datepicker-calendar">';a+="<thead>";for(var c=1;c<8;c++){var e=c+b.weekStart;if(e>=8)e=e-7;a+=b.drawDayHeader(c,b.arrDayHeaders[e])}a+="</thead>";a+='<tbody role="presentation">';for(var h=2;h<m;h++){a+='<tr role="row" >';for(var c=1;c<8;c++)switch(h){case 2:if(c<=b.firstDay())a+=b.drawNoDate(c);else{a+=b.drawCurDay(d,j,f);d++}break;default:if(d<=k){a+=b.drawCurDay(d,j,f);d++}else a+=b.drawNoDate(c)}a+="</tr>";if(d>k)break}a+="</tbody>";a+="</table>";a+="</div>";if(CNQR.ConcurAccessible)a+="<span class='calhelp508'>Press Alt+N or down arrow to enter the calendar</span>";b.container.innerHTML=a;!l&&b.ondrawcal()}function accessibleAddDays(i,h){var a=this;if(a.accessibleSelectedDate!=null){var b=a.accessibleSelectedDate.getFullYear(),d=a.accessibleSelectedDate.getMonth(),j=a.accessibleSelectedDate.getDate(),g=new Date(b,d+h,j+i),e=g.valueOf();if(a.linkOutOfRangeDates==false&&(e<a.validStart.valueOf()||e>a.validEnd.getTime()))return;a.accessibleSelectedDate=g;var c=a.accessibleSelectedDate.getFullYear(),f=a.accessibleSelectedDate.getMonth();if(c<b||c==b&&f<d)changeMonth(a,-1);else(c>b||c==b&&f>d)&&changeMonth(a,1)}}function bCal(){var d=true,f=false,e=null,c="",b="DateTime",a=this;a.arrMonths=[OTGetUserMessage(b,"January"),OTGetUserMessage(b,"February"),OTGetUserMessage(b,"March"),OTGetUserMessage(b,"April"),OTGetUserMessage(b,"May"),OTGetUserMessage(b,"June"),OTGetUserMessage(b,"July"),OTGetUserMessage(b,"August"),OTGetUserMessage(b,"September"),OTGetUserMessage(b,"October"),OTGetUserMessage(b,"November"),OTGetUserMessage(b,"December")];a.arrShortMonths=[OTGetUserMessage(b,"Jan"),OTGetUserMessage(b,"Feb"),OTGetUserMessage(b,"Mar"),OTGetUserMessage(b,"Apr"),OTGetUserMessage(b,"May"),OTGetUserMessage(b,"Jun"),OTGetUserMessage(b,"Jul"),OTGetUserMessage(b,"Aug"),OTGetUserMessage(b,"Sep"),OTGetUserMessage(b,"Oct"),OTGetUserMessage(b,"Nov"),OTGetUserMessage(b,"Dec")];a.arrMonthNums=["1","2","3","4","5","6","7","8","9","10","11","12"];a.arrDayHeaders=[c,OTGetUserMessage(b,"SunAbbrev"),OTGetUserMessage(b,"MonAbbrev"),OTGetUserMessage(b,"TueAbbrev"),OTGetUserMessage(b,"WedAbbrev"),OTGetUserMessage(b,"ThuAbbrev"),OTGetUserMessage(b,"FriAbbrev"),OTGetUserMessage(b,"SatAbbrev")];a.calName=c;a.calManager=e;a.isOverlib=f;a.isGraphicCal=f;a.redrawOnClick=f;a.setDateRangeOnClick=f;a.container={};a.arrPairedCalendars=[];a.calDate=c;a.calDay=c;a.calMonth=c;a.calYear=c;a.weekStart=getWeekStart();a.selectedDate=c;a.accessibleSelectedDate=e;a.validStart=c;a.validEnd=c;a.validStartMsg=c;a.validEndMsg=c;a.linkOutOfRangeDates=d;a.dLink=c;a.tBG="#CCCCEE";a.tLink=c;a.noDateBG="white";a.noDateLink=c;a.hideSelects=hideSelects;a.drawTopBar=d;a.drawControls=d;a.drawYearControl=d;a.CalWidth=a.isGraphicCal==d?"110px":"110px";a.CalHeight=a.isGraphicCal==d?"120px":"120px";a.drawCal=drawCalendar;a.closeCal=closeCal;a.accessibleAddDays=accessibleAddDays;a.keyUpLink=e;a.keyDnLink=e;a.ondrawcal=function(){}}function getShiftedDescription(e,d,f){var b=e;if(typeof b=="string")b=window[e];d=parseInt(d,10);var c=b.calYear,a=b.calMonth+d;while(a<1){a+=12;c-=1}while(a>12){a-=12;c+=1}return f?c:b.arrMonths[a-1]+" "+c}function drawMonthHeader(m){var g='" title="',f='<td role="gridcell" aria-selected="false" onclick="updateCalendarOnClick( ',e=": ",d="datetime",c=true,a=this,l=5;a.cancelEvent=false;if(a.drawControls)l=a.drawYearControl?1:3;var b='<table cellspacing="0" cellpadding="0" border="0" width="100%" role="presentation"><tr role="row">';if(a.drawControls==c){if(a.drawYearControl){var k=OTGetUserMessage(d,"PreviousYear")+e+getShiftedDescription(a.calName,-12,c);b+=f+a.calName+', event, changeYear, -1 );return false;" onkeydown="updateCalendarOnKeydown( '+a.calName+", event, '[data-id=prevYear]', changeYear, -1 );\">";b+='<a href="#" data-id="prevYear" role="button" aria-label="'+k+g+k+'"><i class="cnqr-arrow-ee" aria-hidden="true"></i></a></td>'}var i=OTGetUserMessage(d,"PreviousMonth")+e+getShiftedDescription(a.calName,-1);b+=f+a.calName+', event, changeMonth, -1 );return false;" onkeydown="updateCalendarOnKeydown( '+a.calName+", event, '[data-id=prevMonth]', changeMonth, -1 );\">";b+='<a href="#" data-id="prevMonth" role="button" aria-label="'+i+g+i+'"><i class="cnqr-arrow-e" aria-hidden="true"></i></a></td>'}b+='<td role="gridcell" aria-disabled="true" aria-selected="false">';b+='<a href="#" role="button" onclick="return false;">'+OTFormatUserMessage("DateTime","CalHeader",a.arrShortMonths[m-1],a.calYear)+"</a></td>";if(a.drawControls==c){var h=OTGetUserMessage(d,"NextMonth")+e+getShiftedDescription(a.calName,1);b+=f+a.calName+', event, changeMonth, 1 );return false;" onkeydown="updateCalendarOnKeydown( '+a.calName+", event, '[data-id=nextMonth]', changeMonth, 1 );\">";b+='<a href="#" data-id="nextMonth" role="button" aria-label="'+h+g+h+'"><i class="cnqr-arrow-w" aria-hidden="true"></i></a></td>';if(a.drawYearControl){var j=OTGetUserMessage(d,"NextYear")+e+getShiftedDescription(a.calName,12,c);b+=f+a.calName+', event, changeYear, 1 );return false;" onkeydown="updateCalendarOnKeydown( '+a.calName+", event, '[data-id=nextYear]', changeYear, 1 );\">";b+='<a href="#" data-id="nextYear" role="button" aria-label="'+j+g+j+'"><i class="cnqr-arrow-ww" aria-hidden="true"></i></a></td>'}}b+="</tr></table>";return b}function updateCalendarOnClick(b,d,e,c){var a=b;if(typeof a=="string")a=window[b];a.updateCalendarOnClick(a,d,e,c)}function updateCalendarOnKeydown(b,e,c,f,d){var a=b;if(typeof a=="string")a=window[b];a.updateCalendarOnKeydown(a,e,c,f,d)}function drawDayHeader(a,c){var b=a==1||a==7?"ui-datepicker-week-end":"";return'<th role="gridcell" aria-disabled="true" aria-hidden="true" class="'+b+'">'+c+"</th>"}function drawCurDay(i,n,g){var l=';return false;"',h=false,a=this,e,f,q=a.calMonth-1,m=new Date(a.calYear,a.calMonth-1,i),b=m.valueOf(),j=h,o=LookupDayOfWeek(m.getDay(),h),p=" "+LookupMonth(q,h)+" "+a.calYear,c="";e='<td role="gridcell" ';var k=a.calManager?a.calManager.dateRange.join(",")+",":",";if(a.selectedDate)k+=a.selectedDate.valueOf()+",";f=a.dLink.replace("cal_day",i);f=f.replace("cal_month",a.calMonth);f=f.replace("cal_year",a.calYear);var d=a.tLink!="";if(g!=null&&b==g){j=true;c+="focus "}else if(b<a.validStart.valueOf()||b>a.validEnd.getTime()){if(a.linkOutOfRangeDates==h)f="";d=a.dLink!=""&&a.linkOutOfRangeDates==true;if(d)c+="ui-datepicker-unselectable ui-state-disabled "}else if(a.selectedDate&&a.selectedDate.valueOf()==b){if(d)c+="selected "}else if(k.indexOf(b)>=0){if(d)c+="segment "}else if(a.calManager&&a.calManager.startdate&&a.calManager.enddate&&b>a.calManager.startdate.valueOf()&&b<a.calManager.enddate.valueOf()){if(d)c+="range "}else if(d)c+="bCalDay ";if(a.showToday()==true&&n==b)c+="ui-datepicker-today ";if(g!=null&&b==g)c+="focus ";e+=' class="'+c+'" ';e+=(d?"onclick=\"refreshBCal('"+a.calName+"', "+b+");"+f+l:"")+">";e+=d?'<a role="button" aria-label="'+o+" "+i+" "+p+'"'+(j?' id="'+a.calName+'_AccessibleSelectedDay" ':"")+' onkeyup="'+a.keyUpLink+l+' onkeydown="'+a.keyDnLink+';return true;" href="#">':"";e+=i;e+=d?"</a>":"";e+="</td>";return e}function drawNoDate(a){var b=a==1||a==7?"ui-datepicker-week-end ":"",c='<td aria-disabled="true" aria-selected="false" role="gridcell" class="'+b+'ui-datepicker-unselectable ui-state-disabled">&nbsp;</td>';return c}function checkForToday(){var a=new Date;return this.calMonth==a.getMonth()+1&&this.calYear==a.getFullYear()}function getFirstDay(){var a=this,d=new Date(a.calYear,a.calMonth-1,1),c=d.getDay(),b=c-a.weekStart;if(b<0)b=c+7-a.weekStart;return b}function getLastDay(){for(var e=1e3,d=e*60,f=d*60,g=f*24,a=new Date(this.calYear,this.calMonth-1,28),b=0;b<=4;b++){var c=a.getDate();a=new Date(a.getTime()+g);if(a.getMonth()!=this.calMonth-1)return c}}function getToday(){var a=new Date;return a.getDate()}function goToday(c){var a=window[c],b=getInitialDate("today");a.calMonth=b.getMonth()+1;a.calYear=b.getFullYear();a.drawCal()}function setDate(b,c){var a=this,d=c||c==null;if(!a.checkValidDate(b))return false;a.calDate=b;a.setDay(b.getDate());a.setMonth(b.getMonth()+1);a.setYear(b.getFullYear());a.selectedDate=b;d&&a.drawCal();return true}function checkValidDate(b){var a=this;if(a.validStart!=""&&b.getTime()<a.validStart.getTime()){a.validStartMsg!=""&&alert(a.validStartMsg);return false}else if(a.validEnd!=""&&b.getTime()>a.validEnd.getTime()){a.validEndMsg!=""&&alert(a.validEndMsg);return false}return true}function setDay(a){this.calDay=parseInt(a,10)}function setMonth(c){var b=parseInt(c,10);if(isNaN(b))for(var a=0;a<12;a++)if(this.arrShortMonths[a].toLowerCase()==c.toLowerCase())b=parseInt(this.arrMonthNums[a],10);this.calMonth=b}function setYear(a){this.calYear=parseInt(a,10)}function updateExternalControls(a){var f="datetime",c=document.getElementById("idExtPrevMonthArrow"+a);if(c!=null){var h=OTGetUserMessage(f,"PreviousMonth"),i=a+"_l",e=h+": "+getShiftedDescription(i,-1);c.title=e;c.alt=e}var b=document.getElementById("idExtNextMonthArrow"+a);if(b!=null){var g=OTGetUserMessage(f,"NextMonth"),j=a+"_r",d=g+": "+getShiftedDescription(j,1);b.title=d;b.alt=d}}function changeYear(c,b){var a=c;if(typeof a=="string")a=window[c];b=parseInt(b,10);a.calYear=a.calYear+b;a.drawCal()}var userDatePreference=top.userDatePreference,OT_DateFormat_MDY_slash=top.OT_DateFormat_MDY_slash,OT_DateFormat_MDY_hyphen=top.OT_DateFormat_MDY_hyphen,OT_DateFormat_MDY_dot=top.OT_DateFormat_MDY_dot,OT_DateFormat_DMY_slash=top.OT_DateFormat_DMY_slash,OT_DateFormat_DMY_hyphen=top.OT_DateFormat_DMY_hyphen,OT_DateFormat_DMY_dot=top.OT_DateFormat_DMY_dot,OT_DateFormat_YMD_slash=top.OT_DateFormat_YMD_slash,OT_DateFormat_YMD_hyphen=top.OT_DateFormat_YMD_hyphen,OT_DateFormat_YMD_dot=top.OT_DateFormat_YMD_dot,newCal_ol=new bCal;function changeMonthFromControl(a,b){var c=a+"_l",d=a+"_r";changeMonth(c,b);changeMonth(d,b);updateExternalControls(a)}function drawControls(b){var e='" title="',d='<td role="gridcell" width="10"><a href=\'javascript:changeMonthFromControl("',c="datetime",h=OTGetUserMessage("DateTime","ChangeMonth"),a="",i=bUtil.getNamedObj(b+"_control"),g=OTGetUserMessage(c,"PreviousMonth"),f=OTGetUserMessage(c,"NextMonth");a+="<TABLE width='230' align='center' border=\"0\"><tr role='row' ><TD role=\"gridcell\" align='middle' colSpan='2' height='15' valign='middle'>";a+='<table width="100%" cellspacing="0" cellpadding="0" border="0"><tr role=\'row\' >';a+=d+b+'", "-1")\'><img id="idExtPrevMonthArrow'+b+'" src="/images/arrow_left.gif" width="10" height="9" alt="'+g+e+g+'"  border="0"></a></td>';a+='<td role="gridcell" width="40" valign="middle" align="left" style="cursor:pointer;cursor:hand" onClick=\'changeMonthFromControl("'+b+'", "-1");return false\'><img alt="" src="/images/dot_navy.gif" width="40" height="1"></td>';a+='<td role="gridcell" width="130" align="center" valign="middle" class="small-black;color:navy">'+h+"</td>";a+='<td role="gridcell" width="40" valign="middle" align="right" style="cursor:pointer;cursor:hand" onClick=\'changeMonthFromControl("'+b+'", "+1");return false\'><img alt="" src="/images/dot_navy.gif" width="40" height="1"></td>';a+=d+b+'", "+1")\'><img id="idExtNextMonthArrow'+b+'" src="/images/arrow_right.gif" width="10" height="9" alt="'+f+e+f+'" border="0"></a></td>';a+="</tr></table>";a+="</TD></TR>";a+="</TR><table>";i.innerHTML=a}function setCurrentTextBox(a){this.calManager&&this.calManager.setCurrentDateField(a)}function setDateRangeAndFormField(b,e,c,d){var a=this;c&&a.setCurrentTextBox(b);a.calManager&&b&&a.calManager.addSelectedRange(e,b);d&&a.calManager.redrawCals()}function bCalManager(){var a=this;a.mNumFormFields=0;a.arrDateformfields=[];a.supportsDateRange=true;a.calendarList=[];a.dateRange=[];a.currentTextBox=null;a.startdate=null;a.enddate=null;a.linkSelectedDates=false}function setCurrentDateField(a){if(!a)return;if(CNQR.ProdStatus=="dev"&&!a.id){alert('Please add an "ID" attribute to: '+a.name);a.id=a.name}this.currentTextBox=a;this.addDateFormfield(a)}function addDateFormfield(a){var b=this;if(a&&a.id&&b.arrDateformfields[a.id]==null){b.arrDateformfields[a.id]=b.mNumFormFields;b.mNumFormFields++}}function updateCalendarPairs(c){if(this.linkSelectedDates)for(var b=0;b<this.calendarList.length;b++){var a=this.calendarList[b];if(a){a.selectedDate=c.selectedDate;a.redrawOnClick&&a.drawCal()}}}function redrawCals(){for(var a=0;a<this.calendarList.length;a++){var b=this.calendarList[a];b&&b.drawCal()}}function addSelectedRange(h,d){var a=this;d&&!a.addDateFormfield[d.id]&&a.addDateFormfield(d);if(a.supportsDateRange){var f=d?d:a.currentTextBox;if(h&&f&&f.id){var i=a.arrDateformfields[f.id];a.dateRange[i]=h.valueOf();for(var c=0,e=c,g=0;g<a.dateRange.length;g++){var b=a.dateRange[g];if(b&&!isNaN(new Date(b))){if(b>e||e==0)e=b;if(b<c||c==0)c=b}}if(c>0){a.startdate=new Date(c);a.enddate=new Date(e)}}}}function setCalManager(b){if(!b)return;var a=bCalManagers[b];if(!a){a=new bCalManager;bCalManagers[b]=a}this.calManager=a;a.calendarList[a.calendarList.length]=this}function refreshBCal(c,d){var a=window[c],b=new Date(d);a.selectedDate=b;if(a.calManager){a.setDateRangeOnClick&&a.calManager.addSelectedRange(b);a.calManager.updateCalendarPairs(a)}else a.redrawOnClick&&a.drawCal()}bCalManager.prototype.updateCalendarPairs=updateCalendarPairs;bCalManager.prototype.addSelectedRange=addSelectedRange;bCalManager.prototype.addDateFormfield=addDateFormfield;bCalManager.prototype.setCurrentDateField=setCurrentDateField;bCalManager.prototype.redrawCals=redrawCals;bCal.prototype.setDate=setDate;bCal.prototype.setDay=setDay;bCal.prototype.setMonth=setMonth;bCal.prototype.setYear=setYear;bCal.prototype.showToday=checkForToday;bCal.prototype.firstDay=getFirstDay;bCal.prototype.lastDay=getLastDay;bCal.prototype.drawCurDay=drawCurDay;bCal.prototype.drawNoDate=drawNoDate;bCal.prototype.drawMonthHeader=drawMonthHeader;bCal.prototype.drawDayHeader=drawDayHeader;bCal.prototype.checkValidDate=checkValidDate;bCal.prototype.setCalManager=setCalManager;bCal.prototype.setCurrentTextBox=setCurrentTextBox;bCal.prototype.setDateRangeAndFormField=setDateRangeAndFormField;bCal.prototype.cancelEvent=false;bCal.prototype.updateCalendarOnClick=function(c,a,d,b){a.preventDefault&&a.preventDefault();!this.cancelEvent&&d(c,b);this.cancelEvent=false};bCal.prototype.updateCalendarOnKeydown=function(c,a,d,g,e){a=a||{};switch(a.keyCode){case 13:case 32:a.preventDefault&&a.preventDefault();g(c,e);var f=c.container.id,b=$$("#"+f+" "+d)[0];b&&b.focus();this.cancelEvent=true}};

//FileName: /javascript/dateedit.js
if(!window.tryFocus)window.tryFocus=function(a){try{a.focus()}catch(b){}};function DateEdit_keyupCommon(a,e){var c=false,d,k;if(window.event)d=window.event.keyCode;else if(e)d=e.which;var i=e||window.event;function h(e){var d=e||{},a="autocomplete-aria-live",b=d.a||"Press Insert + Z in order to turn off your Virtual PC Cursor. Use the arrow keys to navigate the calendar and Page Up and Page Down to change the Months.";if($(a))$(a).update(b);else{var c=(new Element("span",{"class":"screen-reader-only",id:a,"aria-live":"assertive"})).update(b);$(document.body).insert(c)}}function f(){h();if(i.altKey||d==40){a.accessibleMode=true;if(a.myPopup.popCal.selectedDate)a.myPopup.popCal.accessibleSelectedDate=a.myPopup.popCal.selectedDate;else a.myPopup.popCal.accessibleSelectedDate=new Date;a.myPopup.popCal.drawCal();b()}}function g(){var b=a.myPopup.parseDate(a.myPopup.edit.value);if(b!=null){a.myPopup.popCal.setMonth(b.getMonth()+1);a.myPopup.popCal.setYear(b.getFullYear());a.myPopup.popCal.selectedDate=b;a.myPopup.disableUpdate=true;a.myPopup.popCal.drawCal();a.myPopup.disableUpdate=c}}var j=function(){return document.activeElement};function b(){var c="bCal"+a.myPopup.identifier+"_AccessibleSelectedDay",b=document.getElementById(c);b&&b.focus()}switch(d){case 65:case 78:f();break;case 77:f();break;case 38:if(a.accessibleMode){a.myPopup.popCal.accessibleAddDays(-7,0);a.myPopup.popCal.drawCal();b()}break;case 40:if(a.accessibleMode){a.myPopup.popCal.accessibleAddDays(7,0);a.myPopup.popCal.drawCal();b()}else if(!a.myPopup.isVisible())a.myPopup.show();else f();break;case 33:if(a.accessibleMode){a.myPopup.popCal.accessibleAddDays(0,-1);a.myPopup.popCal.drawCal();b()}else a.myPopup.isVisible()&&changeMonth(a.myPopup.popCal,-1);break;case 34:if(a.accessibleMode){a.myPopup.popCal.accessibleAddDays(0,1);a.myPopup.popCal.drawCal();b()}else a.myPopup.isVisible()&&changeMonth(a.myPopup.popCal,1);break;case 27:if(CNQR.gCalendarActive==true){a.accessibleMode=c;a.myPopup.accessibleSelectedDate=null;a.myPopup.popCal.drawCal();a.myPopup.hide();CNQR.gCalendarActive=c;e.stop();return}case 37:if(a.accessibleMode){a.myPopup.popCal.accessibleAddDays(-1,0);a.myPopup.popCal.drawCal();b()}break;case 39:if(a.accessibleMode){a.myPopup.popCal.accessibleAddDays(1,0);a.myPopup.popCal.drawCal();b()}break;case 13:a.accessibleMode=c;a.myPopup.popCal.accessibleSelectedDate=null;a.myPopup.popCal.drawCal();a.myPopup.edit.stupidIeTimer=setTimeout(function(){a.myPopup&&a.myPopup.edit&&a.myPopup.edit.focus&&a.myPopup.edit.focus()},350);a.myPopup.isVisible()&&h({a:"Press Insert + Z in order to go back to virtual PC cursor Mode"});break;case 9:case 36:case 35:case 16:case 17:case 18:case 20:case 46:case 45:g();break;default:g()}}function DateEdit_handleDate(b,f,e,c){var a=document.getElementById(b).myPopup,d=new Date(f,e-1,c);a.edit.value=a.formatDate(d);setTimeout(function(){if(a&&a.hide){a.hide();a.oneditblur()}},250)}function DateEdit_imgin(){if(this.myPopup.imageEl!=null)this.myPopup.imageEl.src=this.myPopup.imageOver}function DateEdit_imgout(){if(this.myPopup.imageEl!=null)this.myPopup.imageEl.src=this.myPopup.image}function DateEdit_imgclick(b){var a=this;if(a.myPopup.isVisible()){a.myPopup.hide();tryFocus(a.myPopup.edit)}else a.myPopup.clickHandler(b)}function DateEdit_keyUpExt(b,c){var a=document.getElementById(b).myPopup.edit;return DateEdit_keyupCommon(a,c)}function DateEdit_keyDnExt(d,c){var e=document.getElementById(d).myPopup.edit,a;if(window.event)a=window.event.keyCode;else if(c)a=c.which;if(a==33||a==34||a==38||a==40){var b=c||window.event;if(typeof b.stopPropagation!="undefined")b.stopPropagation();else b.cancelBubble=true;return false}return true}function DateEdit_keyup(a){return DateEdit_keyupCommon(this,a)}function DateEdit(){var d=true,c=false,b=null,a=this;a.edit=b;a.disableUpdate=c;a.accessibleMode=c;a.image=b;a.imageOver=b;a.imageAlign="top";a.openOnClick=d;a.openOnFocus=d;a.updateEditOnCalClickOnly=d;a.popCal=b;a.popCalManager=b;a.dateFormat=0;if(window.userDatePreference!=b)a.dateFormat=userDatePreference;a.checkValidDates=c;a.checkNotEmpty=d;a.validateOnBlur=c;a.isTravelCal=c;a.calValidStart=new Date(1900,0,1,0,0,0,0);a.calValidEnd=new Date(2079,11,31,23,59,59,0);a.className="bcal";a.isStrictDocType=window.otUseStrict?window.otUseStrict:c}DateEdit.prototype=new otPopupDiv;DateEdit.prototype.constructor=DateEdit;DateEdit.prototype.is508Popup=false;DateEdit.prototype.trapFocus=true;DateEdit.prototype.dateFormatChoices=["mm/dd/yyyy","mm.dd.yyyy","mm-dd-yyyy","dd/mm/yyyy","dd.mm.yyyy","dd-mm-yyyy","yyyy/mm/dd","yyyy.mm.dd","yyyy-mm-dd"];DateEdit.prototype.unload=function(){this.unloadDateEdit();this.unloadPopupDiv()};DateEdit.prototype.unloadDateEdit=function(){var b=null,a=this;if(a.edit!=b)a.edit.myPopup=b;if(a.imageEl!=b)a.imageEl.myPopup=b;a.edit=b;a.image=b;a.imageOver=b;if(a.popCal){a.popCal.myPopup=b;a.popCal=b}};DateEdit.prototype.validate=function(){var c="DateTime",a=this,b=a.edit.value;if(a.checkNotEmpty&&/^\s*$/i.test(b)==true){alert(OTGetUserMessage(c,"DateEmpty"));return false}if(b!=""){var d=a.parseDate(b);if(d==null){alert(OTFormatUserMessage(c,"ParseError",a.dateFormatChoices[a.dateFormat]));return false}if(a.checkValidDates)return a.popCal.checkValidDate(d)}return true};function DateEdit_blur(){var b=this,a=b.myPopup;!b.accessibleMode&&a&&a.tryFormatDate();if(!b.accessibleMode)b.stupidIeTimer=setTimeout(function(){if(a){a.hide();a.oneditblur()}},750)}function DateEdit_focus(b){var a=this;if(a.stupidIeTimer!=null){clearTimeout(a.stupidIeTimer);a.stupidIeTimer=null}a.myPopup.openOnFocus&&a.myPopup.clickHandler(b);a.myPopup.oneditfocus(b)}DateEdit.prototype.oneditblur=function(){var a=this;if(a.validateOnBlur&&a.validate()!=true){a.edit.select();tryFocus(a.edit)}else if(a.edit&&a.edit.onchange){a.edit.onchange();typeof triggerEvent=="function"&&triggerEvent(document.getElementById(a.edit.id),"keypress")}};DateEdit.prototype.oneditfocus=function(){};function DateEdit_click(a){this.myPopup.openOnClick&&this.myPopup.clickHandler(a)}DateEdit.prototype.clickHandler=function(){var a=this;if(!a.isVisible()){a.edit.select();a.show()}tryFocus(a.edit)};function DateEdit_divclick(d){var c=null;if(window.event)d=window.event;var a=d.target;if(a==c)a=d.srcElement;var b=a.parentNode&&a.parentNode.myPopup?a.parentNode.myPopup:c;while(b==c&&a.parentNode!=c){a=a.parentNode;if(a&&a.parentNode)b=a.parentNode.myPopup}b&&b.edit&&tryFocus(b.edit)}function DateEdit_mousedown(c){if(window.event)c=window.event;var a=c.target;if(a==null)a=c.srcElement;var b=a.parentNode.myPopup;while(b==null&&a.parentNode!=null){a=a.parentNode;if(a&&a.parentNode)b=a.parentNode.myPopup}if(b&&b.edit){this.mouseDownInterval&&window.clearInterval(this.mouseDownInterval);this.mouseDownInterval=window.setInterval(function(){tryFocus(b.edit)},100)}}function DateEdit_sbfocus(){if(window.event){window.event.cancelBubble=true;tryFocus(this.myPopup.edit)}}DateEdit.prototype.attachTo=function(b,f,e){var c=null,a=this;if(typeof b=="string")b=document.getElementById(b);a.positionBelow(b,f);if(e==c)a.setHeight(Math.ceil(a.parseSize(a.div.offsetWidth)*.8)+"px");else a.setHeight(e);b.myPopup=a;b.onblur=DateEdit_blur;b.onfocus=DateEdit_focus;b.onclick=DateEdit_click;b.onkeyup=DateEdit_keyup;b.setAttribute("AUTOCOMPLETE","OFF");a.edit=b;a.div.onfocus=DateEdit_sbfocus;a.div.onclick=DateEdit_divclick;if(a.image!=c&&a.edit.parentNode!=c){if(a.imageEl==c){var d=document.createElement("img");d.setAttribute("id","image"+a.identifier);d.setAttribute("src",a.image);d.style.border="0px";d.style.verticalAlign=a.imageAlign;if(a.edit.nextSibling!=c)a.imageEl=a.edit.parentNode.insertBefore(d,a.edit.nextSibling);else a.imageEl=a.edit.parentNode.appentChild(d)}if(a.imageOver!=c){a.imageEl.onmouseover=DateEdit_imgin;a.imageEl.onmouseout=DateEdit_imgout}a.imageEl.onclick=DateEdit_imgclick;a.imageEl.myPopup=a;if(f==c){a.positionBelow(a.edit,a.parseSize(a.div.offsetWidth)+a.parseSize(a.imageEl.offsetWidth));e==c&&a.setHeight(Math.ceil((a.parseSize(a.div.offsetWidth)+a.parseSize(a.imageEl.offsetWidth))*.8)+"px")}}a.addbCal()};DateEdit.prototype.transformFullWidth=function(){this.edit.value=CNQR.FullWidth.transform(this.edit.value)};DateEdit.prototype.getSeparator=function(){var a;switch(this.dateFormat){case 1:case 4:case 7:a=".";break;case 2:case 5:case 8:a="-";break;default:a="/"}return a};DateEdit.prototype.completeSmallYear=function(a){return(parseInt(a)>70?"19":"20")+a};DateEdit.prototype.tryFormatDate=function(){var c=this;c.transformFullWidth();var b=c.edit.value,j=b.length;if(!/^\s*$/i.test(b)){var d,e,a,g,h=c.getSeparator();if(!isNaN(parseInt(b))&&(j===6||j===8)&&!/\/|\.|\-/i.test(b))switch(c.dateFormat){case 0:case 1:case 2:d=b.substring(2,4);e=b.substring(0,2);a=b.substring(4);if(j===6)a=c.completeSmallYear(a);g=[e,d,a].join(h);break;case 3:case 4:case 5:d=b.substring(0,2);e=b.substring(2,4);a=b.substring(4);if(j===6)a=c.completeSmallYear(a);g=[d,e,a].join(h);break;default:if(j===6){d=b.substring(4);e=b.substring(2,4);a=b.substring(0,2);a=c.completeSmallYear(a)}else{d=b.substring(6);e=b.substring(4,6);a=b.substring(0,4)}g=[a,e,d].join(h)}else{var f=b.split(h),i=function(a){a=a+"";return a.length===1?"0"+a:a};if(f.length!=3)return;switch(c.dateFormat){case 0:case 1:case 2:d=i(f[1]);e=i(f[0]);a=f[2];if(a&&a.length===2)a=c.completeSmallYear(a);g=[e,d,a].join(h);break;case 3:case 4:case 5:d=i(f[0]);e=i(f[1]);a=f[2];if(a&&a.length===2)a=c.completeSmallYear(a);g=[d,e,a].join(h);break;default:d=i(f[2]);e=i(f[1]);a=f[0];if(a&&a.length===2)a=c.completeSmallYear(a);g=[a,e,d].join(h)}}if(g){var k=c.parseDate(g);if(k instanceof Date)c.edit.value=g}}};DateEdit.prototype.parseDate=function(i){var g="([0-9]+)",c=null,a=this.getDateFormat(),k=a.replace(/[^mdy]/gi,"").replace(/m+/gi,"m").replace(/d+/gi,"d").replace(/y+/gi,"y");a=a.replace(/\./gi,"\\.");a=a.replace(/\//gi,"\\/");a=a.replace(/\-/gi,"\\-");a=a.replace(/y+/gi,g);a=a.replace(/m+/gi,g);a=a.replace(/d+/gi,g);var j=new RegExp("^\\s*"+a+"\\s*$","i");if(j.test(i)){for(var d=0,f=0,e=0,h=i.replace(j,"$1,$2,$3").split(","),b=0;b<3;b++)switch(k.substring(b,b+1)){case"m":d=parseInt(h[b],10);break;case"d":f=parseInt(h[b],10);break;case"y":e=parseInt(h[b],10)}if(f>=0&&d>=1&&e>=1900&&f<=31&&d<=12&&e<=2079){c=new Date(e,d-1,f);if(isNaN(c)||c==null)c=null}}return c};DateEdit.prototype.formatDate=function(d){var a=this.getDateFormat(),c=d.getMonth()+1,b=d.getDate(),e=d.getFullYear();a=a.replace(/yyyy/i,e);a=a.replace(/yy/i,e.toString().substring(2));a=a.replace(/mm/i,c<10?"0"+c:c);a=a.replace(/m/i,c);a=a.replace(/dd/i,b<10?"0"+b:b);a=a.replace(/d/i,b);return a};DateEdit.prototype.getDateFormat=function(){var a=this,b;if(typeof a.dateFormat=="number")b=a.dateFormatChoices[a.dateFormat];else b=a.dateFormat.toString();return b};DateEdit.prototype.onshow=function(){var a=this,b=a.parseDate(a.edit.value);if(b==null)b=new Date;a.popCal.setMonth(b.getMonth()+1);a.popCal.setYear(b.getFullYear());a.popCal.selectedDate=b;a.popCal.setCurrentTextBox(a.edit);a.popCal.drawCal();var c=a.div.childNodes[0];if(c&&c.offsetHeight&&c.offsetWidth){a.setWidth(c.offsetWidth);a.resetHeight()}};DateEdit.prototype.addbCal=function(){var d="', event)",c="DateEdit_handleDate('",a=this,b=new bCal;b.container=a.div;b.calName="bCal"+a.identifier;b.calMainTable=b.calName+"_table";window["bCal"+a.identifier]=b;b.tLink=c+a.identifier+"', cal_year, cal_month, cal_day, 'tLink')";b.dLink=c+a.identifier+"', cal_year, cal_month, cal_day, 'dLink')";b.keyUpLink="DateEdit_keyUpExt('"+a.identifier+d;b.keyDnLink="return DateEdit_keyDnExt('"+a.identifier+d;b.drawTopBar=false;b.drawControls=true;b.tableCellPadding="0";b.tableCellSpacing="0";b.tableLeftMargin="0px";b.calBG="white";b.redrawOnClick=true;b.setDateRangeOnClick=true;b.setCalManager(a.popCalManager);b.calBorder="none";b.calPadding="0px";if(a.isTravelCal){a.calValidStart=new Date;a.calValidStart.setHours(0,0,0,0);a.calValidEnd=new Date(a.calValidStart.getFullYear()+1,a.calValidStart.getMonth(),1);a.calValidEnd.setHours(23,59,59,0)}b.validStart=a.calValidStart;b.validEnd=a.calValidEnd;b.linkOutOfRangeDates=false;b.dHeadFontSize="8";b.dFontSize="9";var f=0,e=0;if(!document.all||a.isStrictDocType){f=a.parseSize(a.div.style.borderLeftWidth)+a.parseSize(a.div.style.borderRightWidth)+a.parseSize(a.div.style.paddingLeft)+a.parseSize(a.div.style.paddingRight);e=a.parseSize(a.div.style.borderTopWidth)+a.parseSize(a.div.style.borderBottomWidth)+a.parseSize(a.div.style.paddingTop)+a.parseSize(a.div.style.paddingBottom)}b.CalWidth=a.parseSize(a.div.offsetWidth)-f+"px";b.CalHeight=a.parseSize(a.div.offsetHeight)-e+"px";b.myPopup=a;b.ondrawcal=function(){var a=this;if(!a.myPopup.updateEditOnCalClickOnly&&!a.myPopup.disableUpdate){var b=a.myPopup.parseDate(a.myPopup.edit.value);if(b==null)b=new Date;var c=a.lastDay();b.getDate()>c&&b.setDate(c);b.setMonth(a.calMonth-1);b.setYear(a.calYear);a.myPopup.edit.value=a.myPopup.formatDate(b)}tryFocus(a.myPopup.edit)};a.popCal=b};function otShowCal(a,g,b){if(b==null)b={};if(!a.myPopup){if(CNQR.ProdStatus=="dev"){a.getAttribute("autocomplete")==null&&alert('Please add an attribute called autocomplete = "off" to the form field: '+a.name);!a.id&&alert('Please add an "ID" attribute to: '+a.name)}if(g)b.popCalManager=g;var c=new DateEdit;for(var f in b)if(b[f]!=null)c[f]=b[f];var d=$(a.id+"_bcal");if(d&&d.myPopup){var e=d.myPopup.outerDiv;d.myPopup.unload();e.parentNode&&e.parentNode.removeChild(e)}c.create(a.id+"_bcal");c.attachTo(a.id,140,123);c.openOnFocus&&c.show()}}function ShowCal(e,d,a){var b="autocomplete-aria-live",c="Press Alt + N or down arrow to enter the calendar";if($(b))$(b).update(c);else{var f=(new Element("span",{"class":"screen-reader-only",id:b,"aria-live":"assertive"})).update(c);$(document.body).insert(f)}if(a!=null)a=true;otShowCal(e,d,{checkValidDates:a,isTravelCal:true})}function otDisableCal(a){var b=null;if(a.myPopup){a.onblur=b;a.onfocus=b;a.onclick=b;a.onkeyup=b;if(a.imageEl){a.imageEl.onmouseover=b;a.imageEl.onmouseout=b;a.imageEl.onclick=b}}}function otReEnableCal(a){if(a.myPopup){a.onblur=DateEdit_blur;a.onfocus=DateEdit_focus;a.onclick=DateEdit_click;a.onkeyup=DateEdit_keyup;if(a.imageEl){a.imageEl.onmouseover=DateEdit_imgin;a.imageEl.onmouseout=DateEdit_imgout;a.imageEl.onclick=DateEdit_imgclick}}};

//FileName: /javascript/geocoder.js
function geocodeStruct(b){var a=this;a.displayname=b[1];a.locationname=a.displayname;a.latitude=b[2];a.longitude=b[3];a.street=b[4];a.city=b[5];a.state=b[6];a.zipcode=b[7];a.country=b[8];a.geocodelevel=b[9];a.district=b[10]}var _GeocoderObj=null;function Geocoder(){var b=null,a=this;a.httpTimeout=3e4;a.httpIframe=b;a.http=b;a.baseurl="/javascript/service/geocode.asp";a.setupHttpRequest();a.currentQS=b;a.prefix=b;a.divposition=b;a.divpositionObj=b;a.autoSelectSingleResult=false;a.listbox=b;a.listboxdiv=b;a.waitdiv=b;a.result=b;a.isDrawn=false;a.selectedIndex=b;a.refpointname="";a.datasource=b;a.searchtype=b;a.sendPrefix=true;a.draggable=true;a.className="popupdialog";a.dragHandle="geocodetitlebardiv";a.minWidth="400";a.callingElement=b}Geocoder.prototype=new otPopupDiv;Geocoder.prototype.is508Popup=true;Geocoder.prototype.constructor=Geocoder;Geocoder.prototype.refpointSearch=function(e,b,d){var a=this,c="?refpoint="+encodeURIComponent(b);c+="&userSpecificCountry="+encodeURIComponent(d);a.prefix=e;a.refpointname=b;a.searchtype="refpoint";a.findGeocode(c)};Geocoder.prototype.addressSearch=function(k,h,i,e,g,f,j){var d=", ",a="",b=this,c="?streetaddress="+encodeURIComponent(h);c+="&city="+encodeURIComponent(i);c+="&state="+encodeURIComponent(e);c+="&zipcode="+encodeURIComponent(g);c+="&country="+encodeURIComponent(f);if(j)c+="&lang=en";b.refpointname=a;if(h!=a)b.refpointname+=h;if(i!=a)b.refpointname+=(b.refpointname==a?a:d)+i;else if(g!=a)b.refpointname+=(b.refpointname==a?a:d)+g;if(e!=a)b.refpointname+=(b.refpointname==a?a:d)+e;if(e==a&&f!=a)b.refpointname+=d+f;b.prefix=k;b.datasource=null;b.searchtype="address";b.findGeocode(c)};Geocoder.prototype.onshow=function(){this.clickedElement=document.activeElement};Geocoder.prototype.onchoose=function(){};Geocoder.prototype.unload=function(){this.unloadGeocoder();this.unloadPopupDiv()};Geocoder.prototype.unloadGeocoder=function(){var a=null,b=this;b.http=a;b.divpositionObj=a;b.cache=a;b.result=a;b.listbox=a;b.listboxdiv=a;b.waitdiv=a;b.messagediv=a;b.refpointnamediv=a;b.choosebutton=a};Geocoder.prototype.chooseselection=function(){var a=this;a.selectedIndex=a.listbox.selectedIndex;if(a.selectedIndex!=-1){var b=a.items[a.selectedIndex];a.result=new geocodeStruct(b)}a.close();a.onchoose()};Geocoder.prototype.changeselection=function(a){if($("googlemapsdiv").style.display!=="none"){var c=ConcurMaps.locations[a].latitude,d=ConcurMaps.locations[a].longitude,b=ConcurMaps.locations[a].displayName;ConcurMaps.showOnMap(a,"",c,d,17,b)}};Geocoder.prototype.findGeocode=function(b){var a=this;a.result=null;a.selectedIndex=-1;a.items=null;if(a.messagediv)a.messagediv.innerHTML="";a.currentQS=b.toLowerCase();a.draw();a.setProcessing(true);if(a.cache[a.currentQS])a.updatelist(a.cache[a.currentQS]);else a.http.makeRequest(a.baseurl+b)};Geocoder.prototype.setupHttpRequest=function(){var a=this;a.cache=[];a.cache[""]=[];a.http=new HttpRequest(a.httpIframe);a.http.timeout=a.httpTimeout;a.http.myGeocode=a;a.http.ontimeout=function(){this.myGeocode.showError()};a.http.oncomplete=function(status,data){var a=this;if(status==200){var sarr=eval(data);a.myGeocode.cache[a.myGeocode.currentQS]=sarr;a.myGeocode.updatelist(sarr)}else a.myGeocode.showError()}};Geocoder.prototype.updatelist=function(b){var c=false,a=this;a.items=b;a.clearlist();for(var d=0;d<b.length;d++){var f=b[d],e=new Option;e.text=f[1];e.value=f[0];a.listbox.options[d]=e}if(a.autoSelectSingleResult&&b.length==1){a.setProcessing(c);a.chooseselection()}switch(b.length){case 0:a.messagediv.innerHTML=OTGetUserMessage("Geocode","SorryNoResults");a.setProcessing(c,true);a.resizeHeight();a.resizeWidth();break;case 1:a.messagediv.innerHTML="";a.setProcessing(c);a.resizeWidth();a.resizeHeight();break;default:a.messagediv.innerHTML=OTFormatUserMessage("Geocode","NumLocationsFound",b.length);a.setProcessing(c);a.resizeWidth();a.resizeHeight()}$("geocodelistbox").focus()};Geocoder.prototype.resizeHeight=function(){var a=this.listbox.offsetHeight;a+=this.choosebutton.offsetHeight;a+=$("googlemapsdiv").offsetHeight;a+=$("geocodetitlebardiv").offsetHeight;a+=$("geocodemessage").offsetHeight;a+=$(CNQR).IsGateway?96:72;document.getElementById("geocodermessagecontent").style.height=a;this.setHeight(a)};Geocoder.prototype.resizeWidth=function(){var a=this;if(a.listbox){var f=a.parseSize(a.listbox.offsetWidth),e=a.parseSize(a.choosebutton.offsetWidth),c=false,b=f+e+40;if(b<500)b=540;var d=a.currentWidth?a.currentWidth:a.parseSize(a.outerDiv.style.width);if(b>d||c){if(a.divposition.toLowerCase()=="positioncenter")a.showPopup(null,a.divposition,b);else a.setWidth(b);a.attachSize=b}}};Geocoder.prototype.displayOnMap=function(b){var a=this;if(a.items){if(ConcurMaps.locations!=null){a.savedLocations=ConcurMaps.locations;a.savedMapDiv=ConcurMaps.getMapDiv()}ConcurMaps.locations=null;ConcurMaps.locations=a.getMapLocationsFromItems();ConcurMaps.setMapDiv(b);ConcurMaps.setLanguage(window.OTLangID);ConcurMaps.setProvider(window.gMapsProvider);ConcurMaps.loadScript(true);$("googlemapsdiv").style.display="block";a.resizeHeight()}};Geocoder.prototype.showError=function(){var a=OTGetUserMessage("Geocode","CouldNotFindLocation");a+="<br />"+OTGetUserMessage("Geocode","PleaseCheckSpelling");this.waitdiv.style.display="none";this.messagediv.innerHTML=a};Geocoder.prototype.clearlist=function(){if(this.listbox)this.listbox.options.length=0;this.selectedIndex=-1};Geocoder.prototype.setProcessing=function(a,b){if(this.isDrawn){this.waitdiv.style.display=a?"block":"none";this.listboxdiv.style.display=a||b?"none":"block"}};Geocoder.prototype.draw=function(){var o="ShowAllOnMap",m="</table>",l="<td>",i="</tr>",e="</td>",h="<tr>",d="</div>",k="</span>",g="Common",f="') != null) document.getElementById('",c="id",n="\t</div>",j="Geocode",b=this,a="";a+='<div id="geocodeiframediv"  aria-describedby="geocodermessagecontent" aria-labelledby="geocodetitlediv geocoderefpointname" role="dialog" tabindex="-1">';a+='<div id="geocodetitlebardiv" class="popupdialogtitlebar">';a+='\t<div class="popupdialogtitle heading4">';a+='\t\t<h3 id="geocodetitlediv">'+OTGetUserMessage(j,"SearchingForLocation")+"</h3>";a+=n;a+='\t<div class="popupdialogclose">';a+='\t\t<a role="button" id="hrefCloseLink" href="#" onclick="javascript:if (document.getElementById(\''+b.div.getAttribute(c)+f+b.div.getAttribute(c)+"').myPopup.close(); closeGeoCodeSetFocus();\">";if(CNQR.ConcurAccessible)a+="\t<span>"+OTGetUserMessage(g,"Close")+k;else{a+='\t<i class="icon-close"></i>';a+='\t<span class="screen-reader-only">'+OTGetUserMessage(g,"Close")+k}a+="\t\t</a>";a+=n;a+=d;a+='<div id="geocodermessagecontent" class="otPopupDialogContents">';a+='<div id="geocoderefpointname"></div>';a+='<div id="geocodemessage" class="text-center"></div>';a+='<div id="geocodewaiting">';a+='<span class="screen-reader-only">'+OTGetUserMessage(g,"ProcessingPleaseWait")+k;a+=d;a+='<div id="geocodelistboxdiv">';a+='<table style="margin:0px auto;">';a+=h;a+='<td colspan="2">';a+='<label for="geocodelistbox">Location:</label>';a+=e;a+=i;a+=h;a+=l;a+='<select id="geocodelistbox" name="geocodelistbox" onchange="javascript:if (document.getElementById(\''+b.div.getAttribute(c)+f+b.div.getAttribute(c)+"').myPopup.changeselection(this.selectedIndex);\"></select>";a+=e;a+=l;a+='<button type="button" onkeypress="GeoCoderButtonTabPress(event)" id="geocodechoosebutton" name="geocodechoosebutton" onclick="javascript:if (document.getElementById(\''+b.div.getAttribute(c)+f+b.div.getAttribute(c)+"').myPopup.chooseselection();closeGeoCodeSetFocus("+b.prefix+');">'+OTGetUserMessage(g,"Choose")+"</button>";a+=e;a+=i;a+=m;a+=d;a+="<br />";a+='<table id="showonmapdiv" style="display:none; width:100%; border:0px;">';a+=h;a+='<td style="width:540px; align:center; text-align:center;">';a+='<div style="width:100px;margin-left:auto;margin-right:auto;">';a+='<a href="javascript:void(0)" onclick="if (document.getElementById(\''+b.div.getAttribute(c)+f+b.div.getAttribute(c)+"').myPopup.showonmap()\">"+OTGetUserMessage(j,o)+"</a>";a+=d;a+=e;a+=i;a+=m;a+='<table id="googlemapsdiv" style="display:none; width:100%; border:0px;"><tr><td style="width:540px; align:center; text-align:center;">';a+=h;a+=l;a+='<div id="showAllDiv" style="width:100px;margin-left:auto;margin-right:auto;">';a+='<a href="javascript:void(0)" onclick="ConcurMaps.showAllOnMap();">'+OTGetUserMessage(j,o)+"</a>";a+=d;a+="<br />";a+='<div id="geocodeshowonmapdiv" style="width:500px; height:400px; border:3px solid black; margin-left:auto; margin-right:auto;"></div>';a+=e;a+=i;a+=m;a+=d;a+=d;b.setHTML(a);b.listbox=document.getElementById("geocodelistbox");b.listboxdiv=document.getElementById("geocodelistboxdiv");b.waitdiv=document.getElementById("geocodewaiting");b.messagediv=document.getElementById("geocodemessage");b.refpointnamediv=document.getElementById("geocoderefpointname");b.choosebutton=document.getElementById("geocodechoosebutton");b.showonmapdiv=document.getElementById("showonmapdiv");b.isDrawn=true;if(b.refpointname!="")b.refpointnamediv.innerHTML=b.refpointname;if(b.divposition)b.showPopup(null,b.divposition,b.divpositionObj);else b.show()};function GeoCoderButtonTabPress(b){var a;if(window.event)a=window.event.keyCode;else if(b)a=b.which;a==9&&$("hrefCloseLink").focus()}function closeGeoCodeSetFocus(b){var f="TMHOTEL_TM_Findlocation",e="TMCAR_TM_Findlocation",d="TMRAIL_TM_Findlocation",a=null,c="TMAIR_TM_Findlocation";$(c+b)!=a&&$(c+b).focus();if($(d+b)!=a)$(d+b).focus();else if($(e)!=a)$(e).focus();else $(f)!=a&&$(f).focus()}Geocoder.prototype.close=function(){var a=this;$("googlemapsdiv").style.display="none";a.hidePopup();a.clickedElement&&$(a.clickedElement).focus();if(a.savedLocations){ConcurMaps.locations=null;ConcurMaps.locations=a.savedLocations;ConcurMaps.setMapDiv(a.savedMapDiv);ConcurMaps.initMaps();delete a.savedLocations;delete a.savedMapDiv}};Geocoder.prototype.getMapLocationsFromItems=function(){var a=this;for(var c=[],b=0;b<a.items.length;b++)c[b]={position:a.items[b][0],latitude:a.items[b][2],longitude:a.items[b][3],displayName:a.items[b][1]+'<br /><br /><button type="button" id="geocodechoosebutton" name="geocodechoosebutton" onclick="javascript:if (document.getElementById(\''+a.div.getAttribute("id")+"') != null) document.getElementById('"+a.div.getAttribute("id")+"').myPopup.chooseselection();\">"+OTGetUserMessage("Common","Choose")+"</button>",vendorType:"referencepoint"};return c};Geocoder.prototype.showonmap=function(){this.displayOnMap("geocodeshowonmapdiv");this.showonmapdiv.style.display="none"};function GetGeocoderObject(b){var a="undefined";typeof window.otPopupDiv==a&&alert("Please include /javascript/popupdiv.js");typeof window.HttpRequest==a&&alert("Please include /javascript/http.js");if(_GeocoderObj==null){_GeocoderObj=new Geocoder;_GeocoderObj.create("GeocoderDiv",b)}return _GeocoderObj};

//FileName: /javascript/travel/hotelsearch_geocode.js
var gEvalNextAction="NextStep();",gCurrSuffix="",gIsQuickTravel=0,gArrGeocodeHotelOK=[];gArrGeocodeHotelOK[""]=false;for(var x=6;x<10;x++)gArrGeocodeHotelOK[x]=false;function flip_search_type(b,a){var m="refpoint",l="location",d="none",c="block",k="hotelSearchtype",j="undefined";if(typeof a==j)a="";if(typeof b==j||b==""){var p=document.frmMain["hotelSearchtypeDisplay"+a];if(p){b=getRadioVal(p);var i=document.frmMain[k+a];if(i)i.value=b}else b=getRadioVal(document.frmMain[k+a])}gArrGeocodeHotelOK[a]=false;var h=$("div_loc"+a),n=$("div_address"+a),o=$("div_refpoint"+a),g=$("div_airport"+a);if(!g)return;g.style.display=b=="airport"?c:d;if(h)h.style.display=b==l?c:d;n.style.display=b=="address"?c:d;o.style.display=b==m?c:d;var e;switch(b){case"address":e=n;flip_state(a);break;case m:e=o;break;case l:e=h;break;default:e=g;if(window.kickstartDynamicAutoComplete){var f=$("searchAirportDisplay"+a);f&&f.value!=""&&kickstartDynamicAutoComplete(f.id,f.value)}}}function flip_search_type_tdy(n,a){var m="TMPER_div_TM_loc",l="TMPER_div_TM_refpoint",k="TMRAIL_div_TM_loc",j="TMRAIL_div_TM_refpoint",i="TMCAR_div_TM_loc",h="TMCAR_div_TM_refpoint",g="TMHOTEL_div_TM_loc",f="TMHOTEL_div_TM_refpoint",c="none",e="TMAIR_div_TM_loc",b="block",d="TMAIR_div_TM_refpoint";switch(n){case"TMAIR_RefPoint":$(d+a).style.display=b;$(e+a).style.display=c;break;case"TMAIR_AgencyLocation":$(e+a).style.display=b;$(d+a).style.display=c;break;case"TMHOTEL_RefPoint":$(f+a).style.display=b;$(g+a).style.display=c;break;case"TMHOTEL_AgencyLocation":$(g+a).style.display=b;$(f+a).style.display=c;break;case"TMCAR_RefPoint":$(h+a).style.display=b;$(i+a).style.display=c;break;case"TMCAR_AgencyLocation":$(i+a).style.display=b;$(h+a).style.display=c;break;case"TMRAIL_RefPoint":$(j+a).style.display=b;$(k+a).style.display=c;break;case"TMRAIL_AgencyLocation":$(k+a).style.display=b;$(j+a).style.display=c;break;case"TMPER_RefPoint":$(l+a).style.display=b;$(m+a).style.display=c;break;case"TMPER_AgencyLocation":$(m+a).style.display=b;$(l+a).style.display=c}return true}function flip_state(d){var f=document.frmMain,e=document.getElementById("td_state"+d),a=$("searchCountry"+d),b;if(a)if(a.selectedIndex>=0)b=a.options[a.selectedIndex].value;else if(a.attributes&&a.attributes.defaultCountry)b=a.attributes.defaultCountry.value;var c=$("searchState"+d);if(b=="US"||b=="CA"||b=="United States"||b=="Canada"){e.style.display="";if(c.value=="")c.value=c.defaultValue}else{e.style.display="none";c.value=""}}function SendGeoCode(a,p,q,k,g){var o="PleaseEnterCompanyLocation",n="searchCompanyLocation",h=false,d="Geocode",m="refPointName",l="hotelRefPointName",b=document.frmMain,t=b["hotelSearchtype"+a];g=g==null?getRadioVal(t):g;var w="/common/geocode.asp?mainframe=top";gCurrSuffix=a;var f=p?b[l+a]:b[m+a];if(a>5){gCurrSuffix=a-5;f=p?b[l+(a-5)]:b[m+a]}switch(g){case"address":var i=b["searchAddress"+a],j=b["searchCity"+a],u=b["searchState"+a],s=b["searchCountry"+a],r=b["searchZipCode"+a];if(isBlank(i.value)||isBlank(j.value)){if(!isBlank(r.value))alert(OTGetUserMessage(d,"ZipcodeOnlyChooseRefpoint"));else if(isBlank(i.value)){alert(OTGetUserMessage(d,"PleaseEnterAddress"));tryFocus(i)}else if(isBlank(j.value)){alert(OTGetUserMessage(d,"PleaseEnterCity"));tryFocus(j)}return h}GeocodeHotelAddress(a,i,j,u,r,s,q,k);break;case"refpoint":var e=b["searchRefPoint"+a];if(isBlank(e.value)){tryFocus(e);alert(OTGetUserMessage(d,"pleaseEnterReferencePoint"));return h}if(e.defaultValue==e.value){var v=getLatBox();if(v.value!=""&&(!window.gOriginalSearchType||g==gOriginalSearchType)){f.value=e.value;HotelFinderGoNext(a);return;break}}f.value=e.value;GeocodeHotelRefPoint(a,e,q,k);break;case"location":var c=b[n+a];if(c.options){if(c.options.length==1&&c.options[0].value==""){tryFocus(c);alert(OTGetUserMessage(d,"NoCompanyLocationsForGeocode"));return h}if(c.options[c.selectedIndex].value==""){tryFocus(c);alert(OTGetUserMessage(d,o));return h}}else if(c.value==""){tryFocus($(n));alert(OTGetUserMessage(d,o));return h}updateFromDropDown(c,a,f);return;break;case"airport":VerifyAirport(a,f);return}}function populateAirMap(){var a=document.frmMain,e=a.latitude.value,d=a.longitude.value,b=a.refPointName.value,f=0,g=0,c=0;AddNonAirCity("XXX",b,f,g,c,e,d);document.getElementById("hotelLocationInfoDiv").style.display="none";NextStep()}function HotelFinderGoNext(suffix){gArrGeocodeHotelOK[suffix]=true;eval(gEvalNextAction)}function getLatBox(){return gIsQuickTravel?document.frmMain["hotelLatitude"+gCurrSuffix]:document.frmMain.latitude}function getLongBox(){return gIsQuickTravel?document.frmMain["hotelLongitude"+gCurrSuffix]:document.frmMain.longitude}function getAddressBox(){return gIsQuickTravel?document.frmMain["searchHotelAddress"+gCurrSuffix]:document.frmMain.searchHotelAddress}function getCityBox(){return gIsQuickTravel?document.frmMain["searchHotelCity"+gCurrSuffix]:document.frmMain.searchHotelCity}function getStateBox(){return gIsQuickTravel?document.frmMain["searchHotelState"+gCurrSuffix]:document.frmMain.searchHotelState}function getPostalCodeBox(){return gIsQuickTravel?document.frmMain["searchHotelPostalCode"+gCurrSuffix]:document.frmMain.searchHotelPostalCode}function getCountryBox(){return gIsQuickTravel?document.frmMain["searchHotelCountry"+gCurrSuffix]:document.frmMain.country}function getDisplayNameBox(){return gIsQuickTravel?document.frmMain["hotelRefPointName"+gCurrSuffix]:document.frmMain.refPointName}function geocode_updateLatLong(p,n,l,t,u,g,i,h,f,e,v,j){var a=null,s=getLatBox(),r=getLongBox(),m=getAddressBox(),q=getCityBox(),o=getStateBox(),k=getPostalCodeBox(),d=getCountryBox(),c=$("searchHotelCountry"+gCurrSuffix);if(c)c.value=e;var b=getDisplayNameBox();s.value=p;r.value=n;m.value=g==a?"":g;q.value=i==a?"":i;o.value=h==a?"":h;k.value=f==a?"":f;if(d)d.value=e;if(b)b.value=l;!j&&HotelFinderGoNext(t)}function geocode_no_results(){alert(OTGetUserMessage("Geocode","SorryNoResults"))}function updateFromDropDown(a,k,j){var g="statename",f="cityname",b,i,h,l,e,d;a=$(a);if(a.options){var c=a.options[a.selectedIndex];b=c.value.split("/");displayname=c.text;e=c.getAttribute(f);d=c.getAttribute(g)}else{b=a.value.split("/");displayname=a.previous("input").value;e=a.getAttribute(f);d=a.getAttribute(g)}i=b[0];h=b[1];j.value=displayname;geocode_updateLatLong(i,h,displayname,k,"","",e,d,"",b[2])}function VerifyAirport(b,h){var f="searchAirportDisplay",e=document.frmMain["searchAirport"+b],c=document.frmMain[f+b],i=e.value;if(isBlank(i)){if(c){tryFocus(c);c.select()}else try{tryFocus(e);e.select()}catch(j){}alert(OTGetUserMessage("Geocode","PleaseEnterAirport"));return false}var d=document.frmMain[f+b];if(d&&d.myPopup){var a=d.myPopup.getCurrentAirportStruct();if(a){var g=a.displayName+", "+a.cityName+(a.state?", "+a.state:"");h.value=g+" ("+a.cityCode+")";geocode_updateLatLong(a.latitude,a.longitude,g,b,"","",a.cityName,a.state,"",a.countryCode);return}}wasSubmitted=true;gCurrSuffix=b}function quickLocationSearch(a,b){gCurrSuffix=b;popupWindow("/twPopup/textsearch.asp?openerFunctionMode=hotel&hideRegionCodes=1&searchString="+a,"",450,250)}function returnAirportHotel(c,a){var b=document.frmMain["searchAirport"+gCurrSuffix];if(c.length==3)b.value=c;else{if(a.indexOf(",")>0)a=a.substring(0,a.indexOf(","));b.value=a}}var cAirportOK="0",cAirportNotFound="1",cMultipleAirports="2",cMultipleAirportsWithNumericIATA="3";function checkIATA(d,c){var b="Geocode",a=document.frmMain["searchAirport"+c];if(a.value==""){alert(OTGetUserMessage(b,"PleaseEnterAirport"));tryFocus(a);return false}else switch(d){case cAirportOK:return true;break;case cAirportNotFound:alert(OTGetUserMessage(b,"NoAirportsFoundTryAgain"));tryFocus(a);a.select();return false;break;case cMultipleAirports:var f;alert(OTGetUserMessage(b,"multiAirportResponse"));tryFocus(a);a.select();break;case cMultipleAirportsWithNumericIATA:var e;return true;default:return true}}var _companyLocationsCache=[];function hotelAirportChanged(e,c,a){if(!e)return;var c=c?c:this;a==null&&c.edit.getAttribute("prefix");if(a==null)a="";var b="iata="+escape(e);b+="&tc="+escape(c.travelconfig);if(_companyLocationsCache[b]){data=_companyLocationsCache[b];populateCompanyLocationDropDown(data,a)}else{var d=new HttpRequest;d.timeout=1e4;d.oncomplete=function(d,c){if(d==200)_companyLocationsCache[b]=c;else c="[ ['', '', '', 'Error', '"+escape(OTGetUserMessage("Geocode","NoCompanyLocationsGeocoded"))+"', '', '', ''] ]";populateCompanyLocationDropDown(c,a)};d.makeRequest("/javascript/service/companyLocations.asp?"+b)}}var _currentCompanyLocations,_currentCompanyLocationsPickup,_currentCompanyLocationsDropoff;function populateCompanyLocationDropDown(data,suffix){if(suffix=="Pickup")_currentCompanyLocationsPickup=data;if(suffix=="Dropoff")_currentCompanyLocationsDropoff=data;_currentCompanyLocations=data;var locArray=eval(data),ddLocs=document.getElementById("searchCompanyLocation"+suffix);if(ddLocs){var msgid=locArray&&locArray.length&&locArray.length>0?"PleaseEnterCompanyLocation":"NoCompanyLocationsGeocoded";ddLocs.options.length=0;var opt=new Option;opt.text=OTGetUserMessage("Geocode",msgid);opt.value="";ddLocs.options[0]=opt;for(var i=0;i<locArray.length;i++){var item=locArray[i],opt=new Option;opt.text=item[4];opt.value=item[1]==""?"":item[1]+"/"+item[2]+"/"+item[8];ddLocs.options[i+1]=opt;ddLocs.options[i+1].setAttribute("locationid",item[0]);ddLocs.options[i+1].setAttribute("cityname",item[5]);ddLocs.options[i+1].setAttribute("statename",item[6]);item[10]&&ddLocs.options[i+1].setAttribute("pdlocation",item[10])}}}function GeocodeHotelRefPoint(d,e,b,c){GeocoderObj=GetGeocoderObject();GeocoderObj.onchoose=function(){var a=this;geocode_updateLatLong(a.result.latitude,a.result.longitude,a.result.displayname,a.prefix,a.result.geocodelevel,a.result.street,a.result.city,a.result.state,a.result.zipcode,a.result.country)};if(!b){b="positionTop";c=document.getElementById("geocode_maindiv"+d)}var a;if(document.frmMain.userSpecificCountry[0])a=document.frmMain.userSpecificCountry[0].value;else if(document.frmMain.userSpecificCountry)a=document.frmMain.userSpecificCountry.value;else a="";GeocoderObj.attachSize=300;GeocoderObj.divposition=b;GeocoderObj.divpositionObj=c;GeocoderObj.refpointSearch(d,e.value,a)}function GeocodeHotelAddress(d,f,h,g,e,c,a,b){GeocoderObj=GetGeocoderObject();GeocoderObj.onchoose=function(){var a=this;document.frmMain.refPointName.value=a.result.displayname;geocode_updateLatLong(a.result.latitude,a.result.longitude,a.result.displayname,a.prefix,a.result.geocodelevel,a.result.street,a.result.city,a.result.state,a.result.zipcode,a.result.country)};if(!a){a="positionTop";b=document.getElementById("geocode_maindiv"+d)}GeocoderObj.attachSize=300;GeocoderObj.divposition=a;GeocoderObj.divpositionObj=b;GeocoderObj.addressSearch(d,f.value,h.value,g.value,e.value,c.options[c.selectedIndex].value,false)}function ShowGeoCodeAutoComplete(d,b){var c=null;b=b||{};var e={};e.ci=b.companyid;e.lang=b.lang;delete b.companyid;delete b.lang;b.url="/net2/SearchLookup/GeocoderAirLookupCompanySearch.ashx?"+Object.toQueryString(e)+"&t=";if(b.localArr==c)if(b.url.length>1&&b.url.substr(b.url.length-1,1)!="="){alert('The url must end in "=" ');return c}if(!d.myPopup){if(CNQR.ProdStatus=="dev"){d.getAttribute("autocomplete")==c&&alert('Please add an attribute called autocomplete = "off" to the form field: '+d.name);!d.id&&alert('Please add an "ID" attribute to: '+d.name)}var a=new DynamicAutoComplete;a.width="240px";a.ongettext=function(d,g){if(d>=0&&d<this.items.length)for(var a=this.items[d],f=g.toLowerCase(),e=[a.Name,a.ID+" - "+a.Name,a.City+", "+a.State+" - "+a.Name],b=0;b<e.length;b++)if(e[b].substring(0,f.length).toLowerCase()==f.toLowerCase())return e[b];return c};a.ondrawitem=function(a){var b=this.items[a];this.divs[a].childNodes[0].innerHTML=b.Html};a.onsetid=function(){var b=this;if(b.selectedIndex>=0){var a=b.items[b.selectedIndex],c=b._suffix||"",e=$("hotelSearchtype"+c);if(e){e.value=a.LookupType;if(a.LookupType=="location"){var d=f["searchCompanyLocation"+c];if(d&&!d.options)d.value=a.Latitude+"/"+a.Longitude+"/"+a.Country}}gArrGeocodeHotelOK[c]=true;geocode_updateLatLong(a.Latitude,a.Longitude,a.Name,b._suffix,a.GeocodeLevel,a.Address,a.City,a.State,a.Zip,a.Country,a.ID,true)}};b!=c&&Object.extend(a,b);a.create(d.id+"_DynamicAC");a.attachTo(d,c,a.width);if(a.localArr!=c){a.cache=[];a.intervalHandle=setInterval("DynamicAutoComplete_intervalHandler("+a.myIndex+");",a.interval)}else{a.setupHttpRequest();if(!DynamicAutoComplete.prototype.globalCache[a.url]){DynamicAutoComplete.prototype.globalCache[a.url]={};DynamicAutoComplete.prototype.globalCache[a.url][""]=[]}a.cache=DynamicAutoComplete.prototype.globalCache[a.url]}}};

//FileName: /javascript/autofillcountries.js
function addCountries(c){if(typeof $$=="function"){for(var a=$$("select.autofillcountry"),b=0;b<a.length;b++)if(a[b]==c){a[0]=c;a.length=1}a.length>0&&Object.keys(OTLang.countries).sortBy(function(a){return OTLang.countries[a]}).each(function(c){if(c.length==2){var b=c.toUpperCase();",BP,CQ,CS,EK,EU,JT,PC,PU,RH,YU,".indexOf(b)==-1&&a.each(function(a){a.options[a.options.length]=new Option(OTGetUserMessage("Countries",c),b);if(b==a.attributes.defaultCountry.value)a.selectedIndex=a.options.length-1})}})}}addEvent(window,"load",addCountries);
