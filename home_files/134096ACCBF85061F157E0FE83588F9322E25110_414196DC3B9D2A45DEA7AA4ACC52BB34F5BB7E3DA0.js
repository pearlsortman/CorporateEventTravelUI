//Createdby: Minifier404
//Compiler: MSFT AjaxMin
//Generated: 2016-09-22 08:04:10
//FileList: /javascript/popupdiv.js

//FileName: /javascript/popupdiv.js
if(!window.CNQR)window.CNQR={};var PopupDiv_List=[];function otPopupDiv(){var c=false,b=null,a=this;a.outerDiv=b;a.iframe=b;a.div=b;a.identifier=b;a.attachType="";a.attachElement=document.body;a.clickedElement=b;a.attachSize=b;a.myIndex=b;a.xOffset=0;a.yOffset=0;a.zIndex=1e3;a.showEffect="";a.effectDuration=b;a.effectDirection="top-left";a.draggable=c;a.dragHandle=b;a.dragSet=c;a.modal=c;a.mask=b;a.maskColor=b;a.maxHeight=b;a.minWidth=30;a.minHeight=0;a.autoSize=c;a.resizable=c;a.contentAttachElement=b;a.contentAttachParent=b;a.contentBody=a.div;a.callOnClose=b;a.contentOverflow="auto";a.ieCorrect=true;a.isOpen=c;a.closeOnEsc=true;a.is508Popup=true;a.trapFocus=c;a.initKeyDownEventOnShow=c;a.appendPopupAfterParent=c;a.status=c;a.className=b;a.hasShadow=c;a.overflow="hidden";a.isStrictDocType=window.otUseStrict?window.otUseStrict:c;a.currentWidth=b;a.currentHeight=b;a.height=b}otPopupDiv.prototype.unload=function(){this.unloadPopupDiv()};otPopupDiv.prototype.unloadPopupDiv=function(){var a=null,b=this;if(b.div!=a)b.div.myPopup=a;b.outerdiv=a;b.iframe=a;b.div=a;b.attachElement=a;b.mask=a;b.contentAttachElement=a;b.contentAttachParent=a;b.contentBody=a};otPopupDiv.prototype.setKeyDownEvent=function(a){a=a||{};switch(a.keyCode){case Event.KEY_ESC:this.closeOnEsc&&this.hidePopup();break;case Event.KEY_TAB:var b=CNQR.getFocusableElements(this.div,true);if(a.target===b.last()&&!a.shiftKey){tryFocus(b.first());a.preventDefault()}else if(a.target===b.first()&&a.shiftKey){tryFocus(b.last());a.preventDefault()}}};otPopupDiv.prototype.create=function(c,b){var a=this;a.identifier=c;a.status=a.createDivs(b);a.myIndex=PopupDiv_List.length;if(PopupDiv_List.push)PopupDiv_List.push(a);else PopupDiv_List[PopupDiv_List.length]=a;addEvent(window,"resize",a.reattach);if(a.is508Popup||a.trapFocus){a.boundKeyDownEvent=a.setKeyDownEvent.bind(a);!a.initKeyDownEventOnShow&&$(a.div).observe("keydown",a.boundKeyDownEvent)}};otPopupDiv.prototype.createDivs=function(e){var k="dialog",h="role",o="aria-labelledby",n="otPopupDialogContents",j="aria-describedby",m="tabindex",l=" css3-shadow",g="3px",i="absolute",f="0px",a=this;if(!document.createElement)return false;if(!a.outerDiv&&document.createElement)try{var b;b=document.createElement("div");b.setAttribute("id","outer"+a.identifier);b.style.border=f;b.style.position=i;b.style.zIndex=a.zIndex;b.className="otpopupdiv";if(a.appendPopupAfterParent){e=$(e);e.insert({after:b})}else{if(typeof e=="string")e=document.getElementById(e);if(e==null)e=document.body;e.appendChild(b)}a.outerDiv=b;a.outerDiv.style.visibility="hidden";if(Prototype.Browser.IE6||Prototype.Browser.IE7)try{var c=document.createElement("iframe");c.setAttribute("title","if"+a.identifier);c.setAttribute("id","if"+a.identifier);c.setAttribute("src","/common/empty.asp");c.style.border=f;c.style.width=f;c.style.height=f;c.style.marginTop=f;c.style.marginLeft=f;c.style.marginBottom=g;c.style.marginRight=g;c.style.position=i;a.iframe=a.outerDiv.appendChild(c)}catch(p){var d='<iframe id="if'+a.identifier+'" style="';d+="border:0px;";d+="width:0px;";d+="height:0px;";d+="margin-top:0px;";d+="margin-left:0px;";d+="margin-bottom:3px;";d+="margin-right:3px;";d+="position:absolute;";d+='" src="/common/empty.asp"></iframe>';a.outerDiv.innerHTML+=d;a.iframe=document.getElementById("if"+a.identifier)}if(a.outerDiv&&a.hasShadow)a.outerDiv.className+=l;b=document.createElement("div");b.setAttribute("id",a.identifier);b.className=a.className!=null&&a.className!=""?a.className:"";a.outerDiv.setAttribute(m,"-1");switch(a.className){case"popupdialog":a.outerDiv.setAttribute(j,n);a.outerDiv.setAttribute(o,"popupdialogtitle");a.outerDiv.setAttribute(h,k);break;case"popuphelp":if(a.hasShadow)b.className+=l;a.outerDiv.setAttribute(j,"helpmessage");a.outerDiv.setAttribute(o,"popuphelptitle");a.outerDiv.setAttribute(h,k);break;case"popuptourtip":a.outerDiv.setAttribute(j,n);a.outerDiv.setAttribute(h,k);break;case"bcal":b.className+=" unselectable";break;case"popupmenu":b.setAttribute(h,"menu");b.setAttribute(m,"-1");default:b.style.border="1px";b.style.borderStyle="solid";b.style.borderColor="black";b.style.backgroundColor="white";b.style.fontFamily="Tahoma, sans-serif";b.style.fontSize="8pt";b.style.fontStyle="normal";b.style.fontWeight="normal"}b.style.position=i;b.style.marginTop=f;b.style.marginLeft=f;b.style.marginBottom=g;b.style.marginRight=g;b.style.cursor="default";b.style.overflow=a.overflow==null||a.overflow==""||a.doMacSbFix()==true?"hidden":a.overflow;a.div=a.outerDiv.appendChild(b);b.myPopup=a}catch(q){a.message=q.message;return false}return true};otPopupDiv.prototype.isVisible=function(){return this.outerDiv.style.visibility=="visible"};otPopupDiv.prototype.setPos=function(b,c){var a=this;a.outerDiv.style.left=a.parseSize(b)+a.xOffset+"px";a.outerDiv.style.top=a.parseSize(c)+a.yOffset+"px"};otPopupDiv.prototype.parseSize=function(b){var a=this,c=0;if(a.rexp==null)a.rexp=/^(\d+)(px)?$/i;if(b!=null&&a.rexp.test(b))c=parseFloat(b.toString().replace(a.rexp,"$1"));return c};otPopupDiv.prototype.setWidth=function(b){var a=this,c=0;b=a.parseSize(b);b=b<a.minWidth?a.minWidth:b;a.currentWidth=b;if(!document.all||a.isStrictDocType)c=a.parseSize(a.div.style.borderLeftWidth)+a.parseSize(a.div.style.borderRightWidth)+a.parseSize(a.div.style.paddingLeft)+a.parseSize(a.div.style.paddingRight);a.outerDiv.style.width=b+"px";if(a.iframe!=null)a.iframe.style.width=(b-c>=0?b-c:0)+"px";a.div.style.width=(b-c>=0?b-c:0)+"px"};function popupDialog_onshow(b){var a="otPopupDialogdiv";if(b.title||b.showClose)$(a)&&$(a).style.display!="none"&&tryFocus($(a))}function popupDialog_onSetContents(){}otPopupDiv.prototype.setHeight=function(b,d){var g="px",a=this,f=0,i=a.statusBar?a.statusBar.offsetHeight:0;b=a.parseSize(b);b=b<a.minHeight?a.minHeight:b;d=d?a.parseSize(d):d;var c=a.maxHeight;if(d&&b!=d){c=c&&c<b?c:b;b=b>d?b:d}else c=c==null?b:c;if(window.frameElement&&window.frameElement.nodeName.toUpperCase()==="IFRAME"&&otPopupDialog)c=otPopupDialog.getWindowDimensions().height;b=b<a.minHeight?a.minHeight:b;if(c&&b+i>=c){b=c;if(a.contentBody&&a.contentBody.offsetHeight){a.contentBody.style.height="";var k=a.contentBody.offsetHeight,j=a.parseSize(a.div.offsetHeight)-a.parseSize(k);j+=i;var e=c-j;if(!(document.all&&!a.isStrictDocType)){var h=2;if(a.contentBody.getStyle){h=parseInt(a.contentBody.getStyle("padding-top")||a.contentBody.getStyle("paddingTop"),10);h+=parseInt(a.contentBody.getStyle("padding-bottom")||a.contentBody.getStyle("paddingBottom"),10)}e-=h;if(e<0)e=0;a.ieCorrect&&e>=25&&(navigator.userAgent.indexOf("Trident/5")>-1||navigator.userAgent.indexOf("Trident/4")>-1)}a.contentBody.style.height=e+g;a.contentBody.style.overflow=a.contentOverflow?a.contentOverflow:"auto"}}if(!document.all||a.isStrictDocType)f=a.parseSize(a.div.style.borderTopWidth)+a.parseSize(a.div.style.borderBottomWidth)+a.parseSize(a.div.style.paddingTop)+a.parseSize(a.div.style.paddingBottom);a.outerDiv.style.height=b+g;if(a.iframe!=null)a.iframe.style.height=(b-f>=0?b-f:0)+g;a.currentHeight=b-f>=0?b-f:0;a.div.style.height=a.currentHeight+g};otPopupDiv.prototype.setRect=function(d,e,c,b){var a=null;e!=a&&d!=a&&this.setPos(d,e);c!=a&&this.setWidth(c);b!=a&&this.setHeight(b)};otPopupDiv.prototype.doMacSbFix=function(){return!document.all&&(this.overflow=="scroll"||this.overflow=="auto")&&navigator.platform.toLowerCase().indexOf("mac")>=0&&navigator.userAgent.toLowerCase().indexOf("safari")<0?true:false};otPopupDiv.prototype.show=function(){var e="none",d="visible",a=this,c=a;CNQR.focusOnPopUp(c,c.outerDiv);if(a.doMacSbFix())a.div.style.overflow=a.overflow;a.reattach();a.showMask();if(window.Draggable&&a.draggable&&!a.dragSet){var h=$(a.dragHandle);new Draggable(a.outerDiv,{handle:h,ignoreClickElement:"otPopupDialogContents"})}if(window.Effect&&a.showEffect){var b=a,f=a.effectDuration;switch(a.showEffect){case"grow":new Effect.Grow(b.outerDiv,{direction:b.effectDirection,duration:b.effectDuration||.1,beforeStart:function(){b.beforeOnShow(b);b.outerDiv.style.visibility=d;b.outerDiv.style.display=e},afterFinish:function(){b.onshow(b);CNQR.focusOnPopUp(c,c.outerDiv)}});break;case"slide":case"blind":var g=a.showEffect=="slide"?"SlideDown":"BlindDown";b.outerDiv.style.visibility=d;b.outerDiv.style.display=e;new Effect[g](b.outerDiv,{duration:f||1,beforeStart:function(){b.beforeOnShow(b)},afterFinish:function(){b.onshow(b);CNQR.focusOnPopUp(c,c.outerDiv)}});break;default:b.outerDiv.style.visibility=d;b.outerDiv.style.display=e;new Effect.Appear(b.outerDiv,{duration:f||1,beforeStart:function(){b.beforeOnShow(b)},afterFinish:function(){b.onshow(b);CNQR.focusOnPopUp(c,c.outerDiv)}})}}else{a.outerDiv.style.visibility=d;if(a.outerDiv.id.indexOf("outerfltDate")!=-1)a.outerDiv.style.display="";a.beforeOnShow(a);a.onshow(a);CNQR.focusOnPopUp(c,c.outerDiv)}if(a.calValidStart)CNQR.gCalendarActive=true};otPopupDiv.prototype.hide=function(){var c="hidden",a=this;CNQR.ConcurAccessible&&setTimeout(function(){CNQR.showToScreenReaders($$("body")[0],this.outerDiv)}.bind(a),100);if(a.doMacSbFix())a.div.style.overflow=c;if(window.Effect&&a.showEffect){var d=a.showEffect=="grow"?"Shrink":Effect.PAIRS[a.showEffect][1],b=a;new Effect[d](b.outerDiv,{direction:b.effectDirection,duration:b.effectDuration||.7,beforeStart:function(){},afterFinish:function(){b.outerDiv.style.visibility=c;b.outerDiv.style.display="";b.hideMask();b.beforeOnHide(b);b.onhide(b)}})}else{a.outerDiv.style.visibility=c;if(a.outerDiv.id.indexOf("outerfltDate")!=-1)a.outerDiv.style.display="none";a.hideMask();a.beforeOnHide(a);a.onhide(a)}};otPopupDiv.prototype.onshow=function(){popupDialog_onshow(this)};otPopupDiv.prototype.beforeOnShow=function(){};otPopupDiv.prototype.beforeOnHide=function(){};otPopupDiv.prototype.onhide=function(){};otPopupDiv.prototype.setHTML=function(a){this.div.innerHTML=a;this.resizeDiv()};otPopupDiv.prototype.resizeDiv=function(){var a=this;a.div.style.height="";if(a.contentBody)a.contentBody.style.height="";if(a.autoSize){a.div.style.width="";var d=a.div.style.position;a.div.style.position="absolute";a.setWidth(a.div.offsetWidth);a.div.style.position=d}else a.setWidth(a.width||a.currentWidth);var b=a.statusBar?a.statusBar.offsetHeight:0,c=a.height||a.div.offsetHeight+b;a.setHeight(c,a.div.offsetHeight)};otPopupDiv.prototype.testcrap=function(){var c="otPopupDialogStatus";OTDebugWrite("BAR: "+$(c)+", "+this.statusBar+", "+this.contentBody);if($(c))$(c).style.display="none";for(var b=this.div.getElementsByTagName("*"),a=0;a<b.length;a++){var d=b[a];d.id=="otPopupDialogContents"&&OTDebugWrite(d.id+" - "+d.tagName+" - "+b[a].style.width+" : "+Element.getStyle(b[a],"width"))}};otPopupDiv.prototype.resetHeight=function(){var a=this;a.div.style.height="";if(a.contentBody)a.contentBody.style.height="";var b=a.statusBar?a.statusBar.offsetHeight:0,c=a.height||a.div.offsetHeight+b;a.setHeight(c,a.div.offsetHeight)};otPopupDiv.prototype.forwardEvent=function(){};otPopupDiv.prototype.positionBelow=function(b,d){var a=this;if(typeof b=="string")b=document.getElementById(b);if(d!=null)d=a.parseSize(d);a.attachType="below";a.attachElement=b;a.attachSize=d;var f=a.parseSize(b.offsetWidth),i=a.parseSize(b.offsetHeight),e=a.parseSize(b.offsetLeft-b.scrollLeft),h=a.parseSize(b.offsetTop-b.scrollTop),c=b.offsetParent,m;while(c!=null&&(c!=document.body&&c!=document.documentElement)){e+=a.parseSize(c.offsetLeft)-a.parseSize(c.scrollLeft);h+=a.parseSize(c.offsetTop)-a.parseSize(c.scrollTop);c=c.offsetParent}var l=a.getPageOffset(),g=a.getWindowSize(),k=a.parseSize(a.outerDiv.offsetWidth),j=a.parseSize(a.outerDiv.offsetHeight);if(e+f>g[0])e-=e+f-g[0];a.setPos(e,h+i);if(d!=null)f=d;a.setWidth(f)};otPopupDiv.prototype.positionBelowLeft=function(b,d){var a=this;if(typeof b=="string")b=document.getElementById(b);if(d!=null)d=a.parseSize(d);a.attachType="belowleft";a.attachElement=b;a.attachSize=d;var f=a.parseSize(b.offsetWidth),j=a.parseSize(b.offsetHeight),e=a.parseSize(b.offsetLeft-b.scrollLeft),h=a.parseSize(b.offsetTop-b.scrollTop),c=b.offsetParent,m;while(c!=null&&(c!=document.body&&c!=document.documentElement)){e+=a.parseSize(c.offsetLeft)-a.parseSize(c.scrollLeft);h+=a.parseSize(c.offsetTop)-a.parseSize(c.scrollTop);c=c.offsetParent}var l=a.getPageOffset(),g=a.getWindowSize(),k=a.parseSize(a.outerDiv.offsetWidth),i=a.parseSize(a.outerDiv.offsetHeight);if(e+f>g[0])e-=e+f-g[0];if(h+i+8>g[1]){a.positionAbove(b,d);return}a.setPos(e-parseInt(a.outerDiv.offsetWidth,10)+parseInt(b.offsetWidth,10),h+j);if(d!=null)f=d;a.setWidth(f)};otPopupDiv.prototype.positionTop=function(c,d){var a=this;if(typeof c=="string")c=document.getElementById(c);if(d!=null)d=a.parseSize(d);a.attachType="top";a.attachElement=c;a.attachSize=d;var g=a.parseSize(c.offsetWidth),e=a.parseSize(c.offsetLeft),f=a.parseSize(c.offsetTop),b=c.offsetParent;while(b!=null&&(b!=document.body&&b!=document.documentElement)){e+=a.parseSize(b.offsetLeft)-a.parseSize(b.scrollLeft);f+=a.parseSize(b.offsetTop)-a.parseSize(b.scrollTop);b=b.offsetParent}a.setPos(e,f);if(d!=null)g=d;a.setWidth(g)};otPopupDiv.prototype.positionAbove=function(b,d){var a=this;if(typeof b=="string")b=document.getElementById(b);if(d!=null)d=a.parseSize(d);a.attachType="above";a.attachElement=b;a.attachSize=d;var g=a.parseSize(b.offsetWidth),e=a.parseSize(b.offsetLeft),f=a.parseSize(b.offsetTop),c=b.offsetParent;while(c!=null&&(c!=document.body&&c!=document.documentElement)){e+=a.parseSize(c.offsetLeft)-a.parseSize(c.scrollLeft);f+=a.parseSize(c.offsetTop)-a.parseSize(c.scrollTop);c=c.offsetParent}var h=a.yOffset?a.yOffset*2:b.offsetHeight;a.setPos(e,f-a.div.offsetHeight-h);if(d!=null)g=d;a.setWidth(g)};otPopupDiv.prototype.positionAboveLeft=function(b,d){var a=this;if(typeof b=="string")b=document.getElementById(b);if(d!=null)d=a.parseSize(d);a.attachType="aboveleft";a.attachElement=b;a.attachSize=d;var f=a.parseSize(b.offsetWidth),e=a.parseSize(b.offsetLeft),h=a.parseSize(b.offsetTop),c=b.offsetParent;while(c!=null&&(c!=document.body&&c!=document.documentElement)){e+=a.parseSize(c.offsetLeft)-a.parseSize(c.scrollLeft);h+=a.parseSize(c.offsetTop)-a.parseSize(c.scrollTop);c=c.offsetParent}var g=a.getWindowSize();if(e+f>g[0])e-=e+f-g[0];var i=a.yOffset?a.yOffset*2:0;a.setPos(e-parseInt(a.outerDiv.offsetWidth,10)+parseInt(b.offsetWidth,10),h-a.div.offsetHeight-i);if(d!=null)f=d;a.setWidth(f)};otPopupDiv.prototype.positionCenter=function(b){var a=this;if(b!=null)b=a.parseSize(b);if(!b)b=a.outerDiv.offsetWidth;if(!b)b=300;a.attachType="center";a.attachSize=b;var e=document.body.clientWidth,d=document.body.clientHeight,c=a.parseSize(a.outerDiv.offsetHeight);if(!c)c=a.parseSize(a.outerDiv.style.height);var f=parseInt((e-b)/2,10),g=parseInt((d-c)/2-40,10);a.setWidth(b);a.setPos(f,g)};otPopupDiv.prototype.positionWindowCenter=function(b){var a=this;if(b!=null)b=a.parseSize(b);if(!b)b=a.outerDiv.offsetWidth;if(!b)b=300;a.attachType="windowcenter";a.attachSize=b;var d=a.getWindowSize(),e=a.getPageOffset(),c=a.parseSize(a.outerDiv.offsetHeight);if(!c)c=a.parseSize(a.outerDiv.style.height);var f=parseInt(e[0]+(d[0]-b)/2,10),g=parseInt(e[1]+(d[1]-c)/2-40,10);a.setWidth(b);a.setPos(f,g)};otPopupDiv.prototype.positionWindowTopCenter=function(a){var b=this;if(a!=null)a=b.parseSize(a);if(!a)a=b.outerDiv.offsetWidth;if(!a)a=300;b.attachType="windowtopcenter";b.attachSize=a;var c=b.getWindowSize(),d=b.getPageOffset(),e=parseInt(d[0]+(c[0]-a)/2,10),f=0;b.setWidth(a);b.setPos(e,f)};otPopupDiv.prototype.positionRight=function(b,d){var a=this;if(typeof b=="string")b=document.getElementById(b);if(d!=null)d=a.parseSize(d);a.attachType="right";a.attachElement=b;a.attachSize=d;var i=a.parseSize(b.offsetWidth),f=a.parseSize(b.offsetHeight),g=a.parseSize(b.offsetLeft),h=a.parseSize(b.offsetTop),c=b.offsetParent,e=0;while(c!=null&&(c!=document.body&&c!=document.documentElement)){e=Prototype.Browser.IE7?0:a.parseSize(c.scrollTop);g+=a.parseSize(c.offsetLeft)-a.parseSize(c.scrollLeft);h+=a.parseSize(c.offsetTop)-e;c=c.offsetParent}a.setPos(g+i,h);if(d!=null)f=d;a.setHeight(f)};otPopupDiv.prototype.showPopup=function(k,l,b){var d=null,a=this,h,e,f,c,j,i,g;k!=d&&a.setHTML(k);a.isOpen=true;c=a.outerDiv.offsetWidth?a.outerDiv.offsetWidth:a.attachSize;switch(l.toLowerCase()){case"positionright":b!=d&&a.positionRight(b,a.outerDiv.offsetHeight);break;case"positionbelow":case"positionbelowright":b!=d&&a.positionBelow(b,c);break;case"positionbelowleft":b!=d&&a.positionBelowLeft(b,c);break;case"positiontop":b!=d&&a.positionTop(b,c);break;case"positionabove":b!=d&&a.positionAbove(b,c);break;case"positionaboveleft":b!=d&&a.positionAboveLeft(b,c);break;case"positioncenter":a.positionCenter(c);break;case"windowcenter":a.positionWindowCenter(c);break;case"windowtopcenter":a.positionWindowTopCenter(c);break;case"coordinate":b!=d&&b.length&&b.length==2&&a.setPos(b[0],b[1]);break;case"event":if(b!=d){h=b;if(window.event)h=window.event;e=h.clientX;f=h.clientY;c=a.parseSize(a.outerDiv.offsetWidth);j=a.parseSize(a.outerDiv.offsetHeight);g=a.getWindowSize();i=a.getPageOffset();if(e+c>g[0])e-=e+c-g[0];if(f+j>g[1])f-=f+j-g[1];e+=i[0]+10;f+=i[1];a.setPos(e,f)}}a.show()};otPopupDiv.prototype.hidePopup=function(){var a=this;if(a.noHide)a.noHide=false;else{a.isOpen=false;a.hide();a.callOnClose&&a.callOnClose();if(CNQR.gCalendarActive==true)CNQR.gCalendarActive=false;a.clickedElement&&a.is508Popup&&tryFocus(a.clickedElement)}};otPopupDiv.prototype.togglePopup=function(a,b,c){if(this.isOpen)this.hidePopup();else this.showPopup(a,b,c)};otPopupDiv.prototype.getPageOffset=function(){var a=0,b=0;if(window.pageXOffset&&window.pageYOffset){a=window.pageXOffset;b=window.pageYOffset}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollLeft;b=document.body.scrollTop}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollLeft;b=document.documentElement.scrollTop}return[a,b]};otPopupDiv.prototype.getWindowSize=function(){var a=0,b=0;if(window.innerWidth&&window.innerHeight){a=window.innerWidth;b=window.innerHeight}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){a=document.documentElement.clientWidth;b=document.documentElement.clientHeight}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){a=document.body.clientWidth;b=document.body.clientHeight}return[a,b]};otPopupDiv.prototype.getWindowDimensions=function(){var a=this.getWindowSize();return{width:a[0],height:a[1]}};otPopupDiv.prototype.reattach=function(){var a=this;if(a.attachElement!=null)try{if(a.attachType=="below"||a.attachType=="belowright")a.positionBelow(a.attachElement,a.attachSize);else if(a.attachType=="belowleft")a.positionBelowLeft(a.attachElement,a.attachSize);else if(a.attachType=="right")a.positionRight(a.attachElement,a.attachSize);else if(a.attachType=="top")a.positionTop(a.attachElement,a.attachSize);else if(a.attachType=="above")a.positionAbove(a.attachElement,a.attachSize);else if(a.attachType=="aboveleft")a.positionAboveLeft(a.attachElement,a.attachSize);else if(a.attachType=="center")a.positionCenter(a.attachSize);else if(a.attachType=="windowcenter")a.positionWindowCenter(a.attachSize);else a.attachType=="windowtopcenter"&&a.positionWindowTopCenter(a.attachSize)}catch(b){}};otPopupDiv.prototype.hideMask=function(){var b=this;if(b.modal&&b.mask){b.mask.tabIndex=-1;b.mask.style.display="none";for(var a=document.body.className.split(" "),c=0;c<a.length;c++)if(a[c]=="masked")delete a[c];document.body.className=a.join(" ")}};otPopupDiv.prototype.showMask=function(){var a=this;if(a.modal){a.buildMask();document.body.className+=" masked";a.resizeMask();a.mask.style.display="block";a.mask.tabIndex=0;a.mask.events={}}};otPopupDiv.prototype.resizeMask=function(){if(this.mask){var a=[document.body.scrollHeight,document.body.clientHeight].sort(function(a,b){return a-b})[1],b=[document.body.clientWidth,document.body.scrollWidth].sort(function(a,b){return a-b})[1];this.mask.style.height=a+"px";this.mask.style.width=b+"px"}};otPopupDiv.prototype.buildMask=function(){var a=this;if(!a.mask){a.mask=document.createElement("DIV");a.mask.id=a.id+"_mask";a.mask.className="mask";a.mask.innerHTML="&nbsp;";a.mask.style.zIndex=a.zIndex?a.zIndex-1:998;var b=function(a){stopEvent(a)};addEvent(a.mask,"click",b.bindAsEventListener(a));addEvent(window,"resize",a.resizeMask.bindAsEventListener(a));document.body.appendChild(a.mask)}if(a.maskColor!=""){a.mask.style.backgroundColor=a.maskColor;a.mask.style.opacity=1;a.mask.style.filter="alpha(opacity=100)"}else if(window.opera)a.mask.style.backgroundColor="transparent"};function PopupDiv_Reattach(){for(var a=0;a<PopupDiv_List.length;a++)PopupDiv_List[a].reattach()}function PopupDiv_ListenForReattach(c){var a=0,b=false;if(window.event){a=window.event.keyCode;b=window.event.ctrlKey}else if(c){a=c.which;b=c.ctrlKey}b&&(a==61||a==109)&&PopupDiv_Reattach()}function PopupDiv_unload(){for(var a=0;a<PopupDiv_List.length;a++)if(PopupDiv_List[a]!=null){PopupDiv_List[a].unload();PopupDiv_List[a]=null}}window.addEventListener&&window.addEventListener("keyup",PopupDiv_ListenForReattach,false);if(window.addEventListener)window.addEventListener("resize",PopupDiv_Reattach,false);else if(window.attachEvent)window.attachEvent("onresize",PopupDiv_Reattach);else if(typeof window.onresize=="function"){var PopupDiv_existingOnResize=window.onresize;window.onresize=function(){PopupDiv_existingOnResize();PopupDiv_Reattach()}}else window.onresize=PopupDiv_Reattach;if(window.addEventListener)window.addEventListener("unload",PopupDiv_unload,false);else if(window.attachEvent)window.attachEvent("onunload",PopupDiv_unload);else if(typeof window.onunload=="function"){var PopupDiv_existingOnUnload=window.onunload;window.onunload=function(){PopupDiv_existingOnUnload();PopupDiv_unload()}}else window.onunload=PopupDiv_unload;function PopupList(){var b=null,a=this;a.selectedIndex=-1;a.items=b;a.divs=b;a.maxRows=10;a.actualRows=0;a.itemClassName=b;a.selectedItemClassName=b;a.tagName="DIV"}PopupList.prototype=new otPopupDiv;PopupList.prototype.constructor=PopupList;PopupList.prototype.unload=function(){this.unloadPopupList();this.unloadPopupDiv()};PopupList.prototype.unloadPopupList=function(){var b=null,a=this;if(a.divs!=b)for(var c=0;c<a.divs.length;c++)a.divs[c]=b;a.divs=b;a.items=b};PopupList.prototype.getLength=function(){return this.divs==null?0:this.actualRows};function PopupList_mouseover(c){if(window.event)c=window.event;var a=c.target;if(a==null)a=c.srcElement;var b=a.parentNode.myPopup;while(b==null&&a.parentNode!=null){a=a.parentNode;b=a.parentNode.myPopup}var d=parseInt(a.getAttribute("id").substring(b.identifier.length),10);b.hilight(d)}function PopupList_mouseout(c){if(window.event)c=window.event;var a=c.target;if(a==null)a=c.srcElement;var b=a.parentNode.myPopup;while(b==null&&a.parentNode!=null){a=a.parentNode;b=a.parentNode.myPopup}b.hilight(-1)}function PopupList_click(c){if(window.event)c=window.event;var a=c.target;if(a==null)a=c.srcElement;var b=a.parentNode.myPopup;while(b==null&&a.parentNode!=null){a=a.parentNode;b=a.parentNode.myPopup}var d=parseInt(a.getAttribute("id").substring(b.identifier.length),10);b.select(d);b.onchoose(d)}PopupList.prototype.setItems=function(g){var j="hidden",i="auto",h="scroll",a=this;if(a.divs==null)a.divs=[];if(g==null||g.length==0)a.clear();else{a.items=g;var c=g.length;if(a.overflow!=h&&a.overflow!=i&&c>a.maxRows)c=a.maxRows;for(var d=a.divs.length;d<c;d++){var b=document.createElement(a.tagName);b.setAttribute("id",a.identifier+d.toString());b.setAttribute("tabindex","-1");if(a.itemClassName!=null&&a.itemClassName!="")b.className=a.className;else{b.style.backgroundColor="white";b.style.fontFamily="Tahoma, sans-serif";b.style.fontSize="8pt";b.style.fontStyle="normal";b.style.fontWeight="normal";b.style.overflow=j;b.style.whiteSpace="nowrap";b.style.paddingTop="1px";b.style.paddingBottom="1px"}b.setAttribute("mypoplist",a.identifier);b.setAttribute("position",d);b.setAttribute("role","listitem");b.style.position="relative";b.style.overflow=j;b.onmouseover=PopupList_mouseover;b.onmouseout=PopupList_mouseout;b.onfocus=PopupList_mouseover;b.onblur=PopupList_mouseout;b.onclick=PopupList_click;b.unselectable="on";b.className+=" unselectable";if(a.tagName=="A"){b.style.display="block";b.setAttribute("href","#");b.setAttribute("role","menuitem");b.style.textDecoration="none"}a.divs[d]=a.div.appendChild(b)}for(var k=a.divs.length-1;k>=c;k--)a.divs[k].style.display="none";if(a.overflow==h||a.overflow==i)if(a.divs.length>a.maxRows&&(!a.doMacSbFix()||a.isVisible()))a.div.style.overflow=a.overflow;else a.div.style.overflow=j;a.actualRows=c;for(var e=0;e<c;e++){a.divs[e].style.visibility="";a.divs[e].style.display="block";a.ondrawitem(e)}a.select(-1);var m=0,f=a.maxRows;if(f>a.divs.length)f=a.divs.length;if(a.overflow!=h&&a.overflow!=i)f=c;for(var l=0;l<f;l++)m+=a.parseSize(a.divs[l].offsetHeight);a.setHeight(m+2)}};PopupList.prototype.select=function(b){var a=this;if(a.divs!=null){if(b>=0&&b<a.actualRows)a.selectedIndex=b;else a.selectedIndex=-1;a.hilight(a.selectedIndex);if(b>=0&&b<a.actualRows)a.divs[a.selectedIndex].scrollIntoView&&(a.overflow=="scroll"||a.overflow=="auto")&&a.divs[a.selectedIndex].scrollIntoView(false);a.onchange()}};PopupList.prototype.hilight=function(b){if(this.divs!=null)for(var a=0;a<this.actualRows;a++)this.oncoloritem(a,b==a)};PopupList.prototype.clear=function(){var a=this;if(a.divs==null)a.divs=[];a.selectedIndex=-1;a.items=null;a.actualRows=0;for(var b=a.divs.length-1;b>=0;b--)a.divs[b].style.display="none";a.setHeight(0)};PopupList.prototype.onchange=function(){};PopupList.prototype.onchoose=function(){};PopupList.prototype.ondrawitem=function(a){this.divs[a].innerHTML="&nbsp;"+this.items[a]};PopupList.prototype.oncoloritem=function(c,e){var d="0px 0px 0px 0px",a=this,b;if(e)if(a.selectedItemClassName!=null&&a.selectedItemClassName!="")a.divs[c].className=a.selectedItemClassName;else{b=a.divs[c].style;b.border="1px solid #A7D7EB";b.padding="3px 1px";b.margin="0px 2px";b.backgroundColor="#E6F1FA"}else if(a.itemClassName!=null&&a.itemClassName!="")a.divs[c].className=a.itemClassName;else{b=a.divs[c].style;b.borderWidth=d;b.padding="4px 4px";b.margin=d;b.backgroundColor="white"}};PopupList.prototype.forwardEvent=function(e){var a=this,d,c=e;if(window.event){c=window.event;d=c.keyCode}else d=c.which;if(a.divs!=null&&a.outerDiv.style.visibility=="visible"&&c.type=="keyup"&&a.actualRows>0)if(!c.ctrlKey&&!c.altKey&&!c.metaKey&&!c.shiftKey){var b;switch(d){case 38:a.selectedIndex>0&&a.select(a.selectedIndex-1);break;case 40:a.selectedIndex+1<a.actualRows&&a.select(a.selectedIndex+1);break;case 9:a.onchoose();break;case 13:a.onchoose();break;case 33:b=a.selectedIndex-(a.maxRows-2);if(b<0)b=0;a.selectedIndex!=b&&a.select(b);break;case 34:b=a.selectedIndex+(a.maxRows-2);if(b>=a.actualRows)b=a.actualRows-1;a.selectedIndex!=b&&a.select(b)}}};function PopupMenu(){var a=this;a.menuList=null;a.eventKeyPress=a.menukeypress.bindAsEventListener(a);a.topMenuClassName=null;a.isRightClickMenu=false}PopupMenu.prototype=new PopupList;PopupMenu.prototype.constructor=PopupMenu;PopupMenu.prototype.closeOnEsc=false;PopupMenu.prototype.is508Popup=false;PopupMenu.prototype.unload=function(){this.unloadPopupMenu();this.unloadPopupList();this.unloadPopupDiv()};PopupMenu.prototype.unloadPopupMenu=function(){this.div.hideTimer=null;this.menuList=null;this.eventKeyPress=null};PopupMenu.prototype.ondrawitem=function(b){var a=this;a.divs[b].innerHTML=a.items[b][0];var c=a.items[b][1],i,e,f=a,d,g,h;if(c.toLowerCase().indexOf("javascript:")==0){i=/;$/.test(c);e=i?c+" void(0);":c+";void(0);"}else e=c;a.divs[b].setAttribute("href",e);if(a.items[b][2]&&a.items[b][2].split){d=a.items[b][2].split("=");if(d.length>1){g=d[0];h=d[1];a.divs[b].setAttribute(g,h)}}a.divs[b].observe("blur",function(a){a.preventDefault();setTimeout(function(){var a="role",b=document.activeElement,e=b&&b.readAttribute(a)?b.readAttribute(a).toLowerCase():null,c=b?b.up():null,d=c&&c.readAttribute(a)?c.readAttribute(a).toLowerCase():null;if(!b||e==="menuitem"||d==="menu")return false;f.div&&f.div.onmouseout&&f.div.onmouseout()},200)})};PopupMenu.prototype.onchoose=function(event){var a=this;a.div.hideTimer=setTimeout(function(){this.div.myPopup&&this.div.myPopup.hidePopup()}.bind(a),100);if(event){var ev=event?event:window.event,keyCode=ev.which?ev.which:ev.keyCode?ev.keyCode:0;if(keyCode==13){var func=a.items[a.selectedIndex][1],data,href;if(func.toLowerCase().indexOf("javascript:")==0){data=/;$/.test(func);href=data?func+" void(0);":func+";void(0);";eval(href)}else document.location=func}}};function PopupMenu_divmouseover(){var b=null,a=this;if(a.hideTimer!=b){clearTimeout(a.hideTimer);a.hideTimer=b}if(!a.myPopup.isRightClickMenu&&a.myPopup.attachElement!=b)if(a.myPopup.topMenuClassName!=b&&a.myPopup.topMenuClassName!="")a.myPopup.attachElement.className=a.myPopup.topMenuClassName;else a.myPopup.attachElement.style.backgroundColor="lightsteelblue"}function PopupMenu_divmouseout(){var a=this;a.hideTimer=setTimeout(function(){this.myPopup&&this.myPopup.hidePopup()}.bind(a),100);if(!a.myPopup.isRightClickMenu&&a.myPopup.attachElement!=null)if(a.myPopup.topMenuClassName!=null&&a.myPopup.topMenuClassName!="")a.myPopup.attachElement.className="";else a.myPopup.attachElement.style.backgroundColor=""}PopupMenu.prototype.addMenu=function(b){var a=this;if(a.menuList==null)a.menuList=[];a.menuList[a.menuList.length]=b};PopupMenu.prototype.clearMenu=function(){this.menuList=null};PopupMenu.prototype.hideMenu=function(){var a=this;removeEvent(document,"keydown",a.eventKeyPress);a.div.hideTimer=setTimeout(a.reallyHideMenu.bind(a),100)};PopupMenu.prototype.reallyHideMenu=function(){var a=this,b=$(a.div.getAttribute("id")),d=document.activeElement,c=d.getAttribute("mypoplist");if(b&&b.myPopup)if(!c||c&&c.toLowerCase()!="menupopup"||b.myPopup.forceHide){b.myPopup.hidePopup();a.div&&a.div.onmouseout&&a.div.onmouseout()}};PopupMenu.prototype.showMenu=function(j,c,h,d,f){var b=null,a=this;if(a.div.hideTimer!=b){clearTimeout(a.div.hideTimer);a.div.hideTimer=b}a.tagName="A";addEvent(document,"keydown",a.eventKeyPress);if(c>=0&&c<a.menuList.length){a.div.onmouseover=PopupMenu_divmouseover;a.div.onmouseout=PopupMenu_divmouseout;a.div.onfocus=PopupMenu_divmouseover;if(a.isRightClickMenu)a.div.onblur=PopupMenu_divmouseout;if(f!=b||c!=a.curMenu){a.curMenu=c;h!=b&&a.setWidth(h);if(f!=b){for(var g=[],k="|"+f.join("|")+"|",e=0;e<a.menuList[c].length;e++)if(k.indexOf("|"+e.toString()+"|")<0)g[g.length]=a.menuList[c][e];a.setItems(g)}else a.setItems(a.menuList[c])}if(d==b||d=="")d="positionbelow";a.div.onmouseout();if(!a.cancelOpenMenu){a.showPopup(b,d,j);a.div.onmouseover();if(a.focusFirstItem&&a.divs&&a.divs[0]&&a.divs[0].focus){var i=a.divs[0];setTimeout(function(){tryFocus(i)},100)}}}else{a.div.hideTimer=setTimeout(a.reallyHideMenu.bind(a),100);return}};PopupMenu.prototype.cancelHideMenu=function(){var a=this;if(a.div.hideTimer!=null){clearTimeout(a.div.hideTimer);a.div.hideTimer=null}a.forceHide=false};PopupMenu.prototype.menukeypress=function(b){var g=this,a=g.myPopup?g.myPopup:g;if(a.isVisible){b=b?b:window.event;var f=a.div,c=a.selectedIndex,d=$(b.target),m=b.which?b.which:b.keyCode,l=function(){var a=d.readAttribute("role");return a?a.toLowerCase():""}(),k=function(){var a=d.up(),b=a&&a.up()?a.up().readAttribute("role"):"";return b?b.toLowerCase():""}(),e=function(){var b="[id=mainmenu][role=menubar] .",c=a.topMenuClassName;return l==="menuitem"&&k==="menubar"?d.up():$$(b+c+"").length?$$(b+c+"")[0].up():""}(),i=true,h=function(e,a){var b=e.siblings().filter(function(a){return a.visible()});if(i)a=a===b.length?0:a;else a=a===0?b.length-1:a-1;var d=b[a],c;if(d){c=d.down();c&&tryFocus(c)}};switch(m){case Event.KEY_TAB:a.hideMenu();break;case Event.KEY_LEFT:b.preventDefault&&b.preventDefault();var j=e.previousSiblings().filter(function(a){return a.visible()}).length;i=false;h(e,j);break;case Event.KEY_RIGHT:b.preventDefault&&b.preventDefault();var j=e.previousSiblings().filter(function(a){return a.visible()}).length;h(e,j);break;case Event.KEY_ESC:b.preventDefault&&b.preventDefault();if(!f||!a.isVisible())return;a.cancelOpenMenu=true;a.hideMenu();a.selectedIndex=-1;tryFocus(e.down());break;case Event.KEY_UP:b.preventDefault&&b.preventDefault();if(!f||!a.items)return;if(0<=c-1){tryFocus(a.divs[c-1]);a.select(c-1)}else if(a.divs&&a.divs.length>0){tryFocus(a.divs[a.items.length-1]);a.select(a.items.length-1)}break;case Event.KEY_DOWN:g.cancelOpenMenu=false;b.preventDefault&&b.preventDefault();if(!f||!a.items)return;if(f.myPopup.isOpen&&a.divs&&a.divs.length>0){c=c==-1?c+1:c;if(a.items.length>c+1){tryFocus(a.divs[c+1]);a.select(c+1)}else{a.select(0);tryFocus(a.divs[0])}}else if(d.onmouseover)d.onmouseover(b)}}};var otHelp=null;function otHidePopupHelp(){if(window.otHelp){otHelp._timeout&&clearTimeout(otHelp._timeout);otHelp.hidePopup()}}function otCreatePopupHelp(){otHelp=new otPopupDiv;otHelp.zIndex=1001;otHelp.options={showClose:true,closeOnEsc:true,width:"180px",className:"popuphelp",hasShadow:true,title:OTGetUserMessage("SmallJs","OuttaskQuickHelp"),position:"positionbelow",xOffset:0,yOffset:10,showEffect:"grow",effectDuration:.1,draggable:false,autoSize:false};otHelp.showHelp=function(g,f,e){var d="othelpdiv",a=this;e=e||{};var c;for(c in a.options)if(a.options.hasOwnProperty(c))a[c]=e[c]==null?a.options[c]:e[c];var b='<table width="100%" role="presentation">';if(a.title||a.showClose){b+='<tr><td class="popuphelptitle" id="popuphelptitle">';b+="<h3>"+a.title+"</h3>";b+="</td>";if(a.showClose)b+='<td align="right"><a href="javascript:void(0);" role="button" id="popuphelpclose" class="popuphelpclose" onclick="otHidePopupHelp();">'+OTGetUserMessage("Common","Close")+"</a></td>";b+="</tr>"}b+='<tr><td colspan="2"><div id="helpmessage">'+g+"</div></td></tr></table>";!$(d)&&otHelp.create(d);otHelp.setWidth(a.width);otHelp.showPopup(b,a.position,f)}}function otShowPopupHelp(c,b,a){otHelp==null&&otCreatePopupHelp();a=a||{};otHelp.clickedElement=document.activeElement;otHelp.showHelp(c,b,a)}var otPopupDialog=null;function otHidePopupDialog(){if(window.otPopupDialog){otPopupDialog.hidePopup();if(document.frmMain&&document.frmMain.disabled==true)document.frmMain.disabled=false}}function otCreatePopupDialog(){var d="otPopupDialogContents",e="processing_icon",f="popupdialogtitlebar",b=null,a=false,c=true;otPopupDialog=new otPopupDiv;otPopupDialog.options={showClose:c,closeOnEsc:c,closeDisabled:a,width:"480px",height:b,minHeight:45,maxHeight:otPopupDialog.getWindowDimensions().height-30,className:"popupdialog",hasShadow:c,title:OTGetUserMessage("SmallJs","OuttaskPopupDialog"),position:"windowcenter",xOffset:0,yOffset:10,showEffect:"",effectDuration:b,showWaitImage:a,draggable:c,dragHandle:f,destroyOnClose:a,modal:a,maskColor:"",autoSize:a,resizable:a,onButtonClick:b,contentAttachElement:b,buttons:[],icon:b,callOnClose:b,contentOverflow:"auto",ieCorrect:c,zIndex:999};otPopupDialog.showDialog=function(s,u,k){var m="mousemove",i="</div>",l="otPopupDialogdiv",g=this;k=k||{};s=s||"";var r=k.containerNode;if(r){if($(l))if(g.outerDiv.parentNode&&g.outerDiv.parentNode!=r){g.outerDiv.parentNode.removeChild(g.outerDiv);r.appendChild(g.outerDiv);g.destroyOnClose=c}delete k.containerNode}var p;for(p in g.options)if(g.options.hasOwnProperty(p))g[p]=k[p]==b?g.options[p]:k[p];var v=window.Draggable&&g.draggable&&g.dragHandle==f?" drag":"",h="";if(g.title||g.showClose){h+='<div id="popupdialogtitlebar" class="popupdialogtitlebar'+v+'">';h+='<div class="popupdialogtitle heading4" id="popupdialogtitle">';h+="<h3>"+g.title+"</h3>";h+=i;if(g.showClose)if(g.closeDisabled)h+='<div class="popupdialogclosedisabled"><div>&nbsp;</div></div>';else{h+='<div class="popupdialogclose">';h+='\t   <a onclick="otHidePopupDialog();" role="button" href="javascript:void(0);">';if(CNQR.ConcurAccessible)h+="\t<span>"+OTGetUserMessage("Common","Close")+"</span>";else{h+='\t<i class="icon-close"></i>';h+='\t<span class="screen-reader-only">'+OTGetUserMessage("Common","Close")+"</span>"}h+="\t   </a>";h+=i}else h+='<div class="popupdialogclose">&nbsp;</div>';h+=i}if(g.showWaitImage)g.icon=e;if(g.icon){h+='<div id="otPopupDialogContents" class="otPopupDialogContents '+g.icon+'" style="position:relative;">';h+=s;h+=i}else{h+='<div id="otPopupDialogContents" class="otPopupDialogContents" style="position:relative;">';h+=s;h+=i}if(g.buttons.length)h+='<div class="otPopupButtons" id="otPopupButtons">&nbsp;</div>';if(g.resizable)h+='<div id="otPopupDialogStatus" class="otPopupDialogStatus"><div class="popupdialogresize"><div id="popupdialogresizer">&nbsp;</div></div></div>';!$(l)&&otPopupDialog.create(l,r);otPopupDialog.setWidth(g.width);otPopupDialog.setHTML(h);g.contentBody=$(d);g.statusBar=$("otPopupDialogStatus");g.resetHeight();var t="";if(g.buttons.length)for(var o=g,q=0;q<g.buttons.length;q++){var j=g.buttons[q],n=document.createElement("input");n.type="button";n.id=j.id||"popupdialogBtn_"+q;n.className=q===0?"btn pull-right ":"btn btn-link cnqr-muted pull-right ";j.text=j.text||(j.messageid?OTGetUserMessage("common",j.messageid):j.value);n.value=j.text;$("otPopupButtons").appendChild(n);addEvent(n,"click",function(){o.hideDialog=c;if(o.onButtonClick)o.onButtonClick(this,o);o.hideDialog===c&&o.hidePopup()}.bindAsEventListener(j))}if(g.contentAttachElement){g.contentAttachElement=$(g.contentAttachElement);g.contentAttachParent=g.contentAttachElement.parentNode;t=g.contentAttachElement.style.display;g.contentAttachElement.style.display="block";g.contentBody.appendChild(g.contentAttachElement);g.destroyOnClose=c;g.resetHeight()}if(g.resizable&&window.Event){g._initDrag=function(d){var b=this;b.pointer=[Event.pointerX(d),Event.pointerY(d)];b.autoSize=a;b.doResize=c;b._startDragHeight=b.currentHeight;b._startDragWidth=b.currentWidth;b.oldBodyCursor=document.body.style.cursor;document.body.style.cursor="se-resize";addEvent(document,"mouseup",b.eventMouseUp,a);addEvent(document,m,b.eventMouseMove,a)};g._updateDrag=function(b){var a=this,c=[Event.pointerX(b),Event.pointerY(b)],d=c[0]-a.pointer[0],e=c[1]-a.pointer[1];if(a.doResize){a.height=a._startDragHeight+e;a.width=a._startDragWidth+d;a.resizeDiv()}stopEvent(b)};g._endDrag=function(c){removeEvent(document,"mouseup",this.eventMouseUp,a);removeEvent(document,m,this.eventMouseMove,a);stopEvent(c);document.body.style.cursor=this.oldBodyCursor;document.body.ondrag=b;document.body.onselectstart=b};g.eventMouseDown=g._initDrag.bindAsEventListener(g);g.eventMouseMove=g._updateDrag.bindAsEventListener(g);g.eventMouseUp=g._endDrag.bindAsEventListener(g);g.resizer=$("popupdialogresizer");g.resizer.onselectstart=function(){return a};addEvent(g.resizer,"mousedown",g.eventMouseDown)}if(g.destroyOnClose)g.beforeOnHide=function(){var a=this;if(a.contentAttachElement&&a.contentAttachParent){a.contentAttachElement.style.display=t;a.contentAttachParent.appendChild(a.contentAttachElement)}a.unload();a.outerDiv.parentNode&&a.outerDiv.parentNode.removeChild(a.outerDiv);window.otPopupDialog=b};g.resetHeight();otPopupDialog.showPopup(b,g.position,u);otPopupDialog.onshow=function(){popupDialog_onshow(this)}};otPopupDialog.setContents=function(a){$(d).innerHTML=a;$(d).style.display="";this.resetHeight();popupDialog_onSetContents(this)};otPopupDialog.hideWaitImage=function(c){var a=$(d);if(a!=b)a.className="no_icon";if(c&&this.contentBody)this.contentBody.style.display=""};otPopupDialog.displayWaitImage=function(c){var a=$(d);if(c&&this.contentBody)this.contentBody.style.display="none";if(a!=b)a.className=e;this.resetHeight()}}function otShowPopupDialog(c,a,b){otPopupDialog&&otPopupDialog.contentAttachElement&&otPopupDialog.destroyOnClose&&otPopupDialog.beforeOnHide(otPopupDialog);otPopupDialog==null&&otCreatePopupDialog();otPopupDialog.clickedElement=document.activeElement;return otPopupDialog.showDialog(c,a,b)}function otShowPopupDialogWait(c,a,b){if(otPopupDialog!=null)window.setTimeout(function(){otShowPopupDialog(c,a,b)},3e3);else{otCreatePopupDialog();otPopupDialog.showDialog(c,a,b)}}function otSetPopupDialogContents(a){if(window.otPopupDialog){otPopupDialog.hideWaitImage();otPopupDialog.setContents(a)}}function otResizePopupDialog(){window.otPopupDialog&&otPopupDialog.resetHeight()}function otPopupDialogWaiting(b,a){if(window.otPopupDialog)if(b)otPopupDialog.displayWaitImage(a);else otPopupDialog.hideWaitImage(a)}function otLoadPopupDialogHtml(a){otPopupDialog==null&&otCreatePopupDialog();a=$(a);var b="_c_"+a.id;if(otPopupDialog[b]==null){otPopupDialog[b]=a.innerHTML;a.innerHTML=""}return otPopupDialog[b]}var otActionMenu=null;function setupActionMenu(){otActionMenu=new PopupMenu;otActionMenu.itemClassName="popupmenuitem";otActionMenu.selectedItemClassName="popupmenuitemsel";otActionMenu.topMenuClassName="popupvisible";otActionMenu.maxRows=25;otActionMenu.create("actionMenuPopup");otActionMenu.setWidth("150px");otActionMenu.topMenuClassName=null;otActionMenu.isRightClickMenu=true;otActionMenu.focusFirstItem=true;typeof pageSpecificActionMenuSetup!="undefined"&&pageSpecificActionMenuSetup()}function destroyActionMenu(){otActionMenu=null}function showActionMenu(c,d,b,a){if(otActionMenu==null){setupActionMenu();addEvent(window,"unload",destroyActionMenu,false)}otActionMenu.rowID=b;otActionMenu.showMenu(c,d,null,null,a)}CNQR.AjaxDialog={Request:function(c,a){var b={method:"get",onException:CNQR.AjaxDialog.Show,onSuccess:CNQR.AjaxDialog.Show};a=Object.extend(b,a||{});new Ajax.Request(c,a);addScript("/jscache/prototype1_6/dragdrop_20151001_min.js?cachekilla=F")},Show:function(d,a){var b=d.responseText;if(b==null)return;var c={title:"&nbsp;",attachElement:document.body,resizable:true,modal:true,destroyOnClose:true,minHeight:100};a=Object.extend(c,a||{});otShowPopupDialog(b,a.attachElement,a);b.evalScripts()},showE:function(b,a){alert(a)},AjaxifyForm:function(b,a,c){b=$(b);var d=b.up("form"),e={method:"post",asynchronous:true,evalScripts:true};c=Object.extend(e,c||{});a=a||{};d.onsubmit=function(){var b=c;b.parameters=Form.serialize(this);var e;if(a.updateDiv){var f=Element.getHeight(a.updateDiv);$(a.updateDiv).innerHTML='<div style="height='+f+'px;"><div class="processing_icon">Loading</div></div>';e=b.onComplete||Prototype.emptyFunction;b.onComplete=function(b,c){otHidePopupDialog();window.Effect&&window.setTimeout(function(){new Effect.Highlight(a.updateDiv)},500);e(b,c)}.bind(this);new Ajax.Updater(a.updateDiv,d.action,b)}else{e=b.onComplete||Prototype.emptyFunction;b.onComplete=function(a,b){otHidePopupDialog();e(a,b)}.bind(this);new Ajax.Request(d.action,b)}return false}}};CNQR.gCalendarActive=false;!CNQR.MessageBox&&(function(b){var e="warning",a=null,c="common",d=false,l="up_arrow_icon",k="question_icon",j="info_icon",i="warning_icon",h="error_icon",f="OK";function g(b,a){document.fire("customEvent:open.messagebox",{name:b,data:function(c){var b=(new Element("div")).update(c),a=b.textContent;return a?a.substring(0,30):""}(a)})}b.MessageBox={OKCancel:[{value:f,messageid:f},{value:0,messageid:"Cancel"}],YesNo:[{value:"yes",messageid:"yes"},{value:0,messageid:"no"}],OK:[{value:f,messageid:f}],Search:[{value:"Search",messageid:"Search"}],ErrorIcon:h,WarningIcon:i,InfoIcon:j,QuestionIcon:k,ProcessingIcon:"processing_icon",UpArrowIcon:l,NoIcon:"no_icon",confirm:function(f,e){var h={modal:1,minHeight:125,attachElement:document.body,title:" ",icon:b.MessageBox.QuestionIcon,buttons:b.MessageBox.YesNo,showClose:d};e=Object.extend(h,e||{});if(b.UseNUIWidgetLegacyPlugin){var i={children:f,type:"confirm",noTextLookup:{category:c,id:e.buttons[1].messageid},onNoClick:e.callOnClose,onYesClick:e.onButtonClick,title:e.title,closeButton:e.showClose,yesTextLookup:{category:c,id:e.buttons[0].messageid}};nui.widgets.plugin.messagebox.getByTarget(i,a)}else{otShowPopupDialog(f+"<br/><br/>",e.attachElement,e);g("Confirm",f)}},show:function(d,a){var c={modal:1,attachElement:document.body,icon:b.MessageBox.NoIcon,title:" "};a=Object.extend(c,a||{});otShowPopupDialog(d,a.attachElement,a)},alert:function(n,f){var o={modal:1,minHeight:125,attachElement:document.body,title:" ",icon:b.MessageBox.WarningIcon,buttons:b.MessageBox.OK,showClose:d};f=Object.extend(o,f||{});if(b.UseNUIWidgetLegacyPlugin){var m=e;if(f.icon)switch(f.icon){case h:m="error";break;case l:m="success";break;case j:m="info";break;case k:m="confirm";break;case i:m=e;break;default:m=e}var p={children:n,type:m,onNoClick:a,onYesClick:a,title:f.title,closeButton:f.showClose,yesTextLookup:{category:c,id:f.buttons[0].messageid}};nui.widgets.plugin.messagebox.getByTarget(p,a)}else{otShowPopupDialog(n,f.attachElement,f);g("Alert",n)}},prompt:function(i,j,l,h){var k={modal:1,minHeight:50,attachElement:document.body,title:" ",showClose:d,autoSize:true,icon:b.MessageBox.NoIcon,buttons:b.MessageBox.OKCancel,onButtonClick:function(b,e){var c=$F("CQPromptInput");if(b)if(e.value==f&&c!=a&&c!="")b(c);else b(d)}.bind(this,l)};if(!j)j="";h=Object.extend(k,h||{});i=i+'<input type="text" id="CQPromptInput" name="CQPromptInput" value="'+j+'">';if(b.UseNUIWidgetLegacyPlugin){var m={children:i,type:e,noTextLookup:{category:c,id:h.buttons[1].messageid},onNoClick:a,onYesClick:h.onButtonClick,isChildrenHTMLString:true,title:h.title,closeButton:h.showClose,yesTextLookup:{category:c,id:h.buttons[0].messageid}};nui.widgets.plugin.messagebox.getByTarget(m,a)}else otShowPopupDialog(i,h.attachElement,h);g("Prompt",i)},processing:function(c,a){var d={modal:1,minHeight:125,attachElement:document.body,title:" ",icon:b.MessageBox.ProcessingIcon};a=Object.extend(d,a||{});otShowPopupDialog(c,a.attachElement,a);g("Processing",c)}}})(CNQR);var CQAlert=CNQR.MessageBox.alert,CQConfirm=CNQR.MessageBox.confirm,CQPrompt=CNQR.MessageBox.prompt;CNQR.Dialog={endResize:"",elementArray:[],findElement:function(c){for(var b=CNQR.Dialog.elementArray,a=0,d=b.length;a<d;a++)if(c==b[a].element.parentElement)return b[a].element;return[]},create:function(a){var b=true;if(!a)return{errorString:"No options",error:b,exists:false};if(!a.content)return{errorString:"No content",error:b};if(!a.parentElement)return{errorString:"No parent element defined",error:b};if(a.toggle){a.toggle=a.toggle.toLowerCase();if(a.toggle=="popover")return this.popOver(a)}return{errorString:"data-toggle="+a.toggle+" is not implemented",error:b}},popOver:function(a){a.prefix=[a.prefix?a.prefix:"cnqr-",a.toggle].join("");a.elementExistsClass=a.elementExistsClass||a.prefix+"-created";a.overrideClass=a.overrideClass||"";if(a.parentElement.hasClassName(a.elementExistsClass))return{errorString:a.toggle+" exists",error:false,exists:true};a.overrideClass=a.overrideClass+(a.type?" cnqr-popover-"+a.type.toLowerCase():"");return new this.set(a)},"set":function(d){var j="cnqr-ext-viewport",g=" .",e="custom:focusonfirstelement",f="visible",c=true,a=false,b="",h="top",i="bottom";return{options:{smartPositionReplacement:{left:"right",right:"left",top:i,bottom:h,bottomleft:h,bottomright:h,topleft:i,topright:i},placement:d.placement?d.placement.toLowerCase():h,elementClass:d.prefix,contentClass:d.prefix+"-content",titleClass:d.prefix+"-title",titleBarClass:d.prefix+"-titlebar",titleBarCloseClass:d.prefix+"-titlebar-close",idPrefix:d.prefix+"-id",title:d.title?d.title:b,arrowClass:"arrow",closeButtonClass:"closebutton",overrideClass:d.overrideClass||b,elementExistsClass:d.elementExistsClass||d.prefix+"-created",showCloseButton:d.showCloseButton&&d.showCloseButton.toLowerCase()=="false"?a:c,closeText:d.closeText?d.closeText:b,titleIsAccessibleOnly:d.titleIsAccessibleOnly&&d.titleIsAccessibleOnly.toLowerCase()=="true"?c:a,showArrow:d.showArrow&&d.showArrow.toLowerCase()=="false"?a:c,addDescribedby:d.addDescribedby||c,width:d.width||b,height:d.height||b,doNotFlip:d.doNotFlip&&d.doNotFlip.toLowerCase()=="true"?c:a,modal:d.modal||a,showEffect:d.showEffect||b,zIndex:d.zIndex||b},content:d.content?d.content:b,currentPlacement:b,arrowPlacement:b,element:null,arrowElement:null,parentElement:d.parentElement,id:d.id?d.id:b,isShown:a,error:a,exists:a,positionData:{},document:document,addUnit:function(c,a){return[c,a?a:"px"].join(b)},addUnitToObj:function(b){var a={};for(o in b)a[o]=this.addUnit(b[o]);return a},getPageHeight:function(){var a=this;return!a.document.body||!a.document.documentElement?0:Math.max(a.document.body.scrollHeight,a.document.documentElement.scrollHeight,a.document.body.offsetHeight,a.document.documentElement.offsetHeight,a.document.body.clientHeight,a.document.documentElement.clientHeight)},getPageWidth:function(){var a=this;return!a.document.body||!a.document.documentElement?0:Math.max(a.document.body.scrollWidth,a.document.documentElement.scrollWidth,a.document.body.offsetWidth,a.document.documentElement.offsetWidth,a.document.body.clientWidth,a.document.documentElement.clientWidth)},getElementId:function(){return this.id},setElementId:function(a){this.id=a},getUniqueId:function(){return[this.options.idPrefix,"-",Math.random().toString(36).substr(2)].join(b)},getPlacement:function(){return this.currentPlacement?this.currentPlacement:this.options.placement},setCurrentPlacement:function(a){this.currentPlacement=a},toggle:function(){if(this.isShown){this.close();return}this.open()},open:function(){var a=this;if(!a.element)return;a.isShown=c;a.options.modal&&otShowPopupMask();if(a.options.showEffect){a.element.style.visibility=f;a.element.style.display="none";var b=a;tryFocus(b.parentElement);new Effect.Appear(a.element,{duration:.5,beforeStart:function(){},afterFinish:function(){b.aftershow()}})}else{a.element.show();a.element.style.visibility=f;a.aftershow()}},aftershow:function(){this.element.fire(e)},close:function(c){var b=this;if(!b.element)return;b.isShown=a;b.element.hide();b.options.modal&&!c&&otHidePopupMask();b.element.style.visibility="hidden";tryFocus(b.parentElement)},getHtml:function(){var e="</div>",d='<div class="',a=this;if(!a.content)return b;var g=a.options.showCloseButton?['<a role="button" class="',a.options.closeButtonClass," pull-right cnqr-cursor-pointer ",a.options.titleBarCloseClass,'" href="#">','<span class="cnqr-icon icon-close">',a.options.closeText,"</span>","</a>"].join(b):b,i=a.options.title?[d,a.options.titleBarClass,a.options.titleIsAccessibleOnly?" cnqr-helper-hidden-accessible":b,'">','<span aria-live="assertive" class="',a.options.titleClass,'">',a.options.title,"</span>",g,e].join(b):b,h=a.options.showArrow?[d,a.options.arrowClass," ",a.getArrowPlacement(),'"></div>'].join(b):b,f=a.getElementPosition(a.parentElement),c=[];c.push("visibility: hidden;");c.push("top:"+a.addUnit(f.top,"px;"));c.push("left:"+a.addUnit(f.left/2,"px;"));if(a.options.width){c.push("max-width: none");c.push("width:"+a.addUnit(a.options.width,"px"))}if(a.options.height){c.push("max-height: none");c.push("height:"+a.addUnit(a.options.height,"px"))}a.options.zIndex&&c.push("z-index:"+a.options.zIndex);return['<div tabindex="-1" id="',a.getElementId(),'" role="tooltip" class="cnqr-widget-content ',a.options.elementClass," ",a.options.overrideClass,'" style="'+c.join(";")+'"',">",h,i,d,a.options.contentClass,'">',a.content,e,e].join(b)},setHtml:function(){var a=this;if(a.exists)return;var h=a.getElementId(),d,e;!h&&a.setElementId(a.getUniqueId());$(a.document.body).insert(a.getHtml());a.exists=c;a.element=$(a.getElementId());a.parentElement.addClassName(a.options.elementExistsClass);if(a.content.indexOf("#")==0&&a.content.length>1){d=$(a.content.substring(1));e=$$(["#",a.element.id,g,a.options.contentClass].join(b))[0];if(d&&e){e.update(d);d.style.display="block";d.style.visibility=f;d.removeClassName("hidden");d.removeClassName("cnqr-hide")}}a.options.addDescribedby&&a.parentElement.writeAttribute("aria-describedby",a.element.id);if(a.options.showArrow)a.arrowElement=$$(["#",a.element.id,g,a.options.arrowClass].join(b))[0];a.setEvents();a.elementDimensions=a.element.getDimensions()},setEvents:function(){var i="custom:focusonlastelement",h="custom:focusonclosebutton",k=this,d=k,n=$$(["#",d.element.id,g,d.options.contentClass].join(b))[0],j=[],m=CNQR.getFocusableElements(n,c);if(k.options.showCloseButton){j=$$(["#",k.element.id,g,k.options.closeButtonClass].join(b));j.length&&j[0].observe("click",function(a){a.preventDefault();d.close()})}k.element.observe(e,function(){var a=m.first();tryFocus(d.element);if(a){tryFocus(a);return}if(j.length){d.element.fire(h);return}});k.element.observe(i,function(){var a=m.last();if(a){tryFocus(a);return}j.length&&d.element.fire(h)});k.element.observe(h,function(){j.length&&tryFocus(j[0])});k.element.observe("keydown",function(b){b.keyCode===Event.KEY_ESC&&d.close();if(b.keyCode!==Event.KEY_TAB)return;if(b.target===m.last()&&!b.shiftKey||b.target===m.first()&&b.shiftKey){b.preventDefault();if(j.length)d.element.fire(h);else d.element.fire(b.shiftKey?i:e);return a}else if(b.target===j[0]&&!b.shiftKey){b.preventDefault();d.element.fire(e);return a}else if(b.target===j[0]&&b.shiftKey){b.preventDefault();d.element.fire(i);return a}else if(b.target===d.element){b.preventDefault();d.element.fire(b.shiftKey?i:e);return a}});function p(b){var a=f,e=b.getStyle("overflow")||a,d=b.getStyle("overflow-y")||a,c=b.getStyle("overflow-x")||a;return e!=a||d!=a||c!=a}var l=k.parentElement,o=d.close.bind(d);while(l&&l.tagName!="BODY"){p(l)&&l.observe("scroll",o);l=l.parentElement}},updateArrowPlacement:function(a){this.arrowPlacement=a},getArrowPlacement:function(){var a=this;!a.arrowPlacement&&a.updateArrowPlacement(a.options.smartPositionReplacement[a.getPlacement()]);return a.arrowPlacement},updateArrowElement:function(b){var a=this;if(!a.element)return;var c={};if(a.arrowElement){a.arrowElement.className=[a.options.arrowClass,a.getArrowPlacement()].join(" ");if(b.top&&b.top<=a.positionData.element.height)c.top=b.top;if(b.left&&b.left<=a.positionData.element.width)c.left=b.left;a.arrowElement.removeAttribute("style");a.arrowElement.setStyle(a.addUnitToObj(c))}},getElementPosition:function(d){var c=d.cumulativeOffset(),a=d.cumulativeScrollOffset(),b=document.body.cumulativeScrollOffset();return{top:c.top-(a.top-b.top),left:c.left-(a.left-b.left)}},resetFlip:function(){var a=this;if(a.isFlipped()){a.setCurrentPlacement(b);if(a.options.showArrow){a.updateArrowPlacement(a.options.smartPositionReplacement[a.getPlacement()]);a.updateArrowElement({})}a.element.setStyle(a.addUnitToObj(a.getElementPosition(a.parentElement)))}},isFlipped:function(){return this.getPlacement()!=this.options.placement?c:a},scrollToParent:function(){var b=this;if(!b.parentElement)return;if(document.body.hasClassName(j)){var d=b.parentElement.getOffsetParent(),f=b.parentElement.positionedOffset();if(d.style.overflowY!="auto")for(var e=b.parentElement.ancestors(),c=0;c<e.size();c++)if(e[c].style.overflowY=="auto"){d=e[c];break}var a=f[1],g=document.body.clientHeight;if(a>300&&g>300)a=a-250;d.scrollTop=a}},getPosition:function(){var a=this;if(!a.parentElement||!a.element)return;a.resetFlip();var b=a.getElementPosition(a.parentElement),d=a.parentElement.getDimensions(),c=a.element.getDimensions();if(document.body.hasClassName(j)){a.scrollToParent();b=a.parentElement.viewportOffset()}a.positionData={parent:{left:b.left,top:b.top,width:d.width,height:d.height},element:{width:a.options.doNotFlip?c.width:a.elementDimensions.width,height:a.options.doNotFlip?c.height:a.elementDimensions.height},arrow:{top:0,left:0,adjust:0}};return a.getElementLocation(a.getElementStyle[a.getPlacement()](a.positionData),a.positionData)},checkElementPosition:function(e,l){var b=a,d=a,n=e.top+l.element.height,m=e.left+l.element.width,k=e.top>=0,f=n<=this.getPageHeight(),g=m<=this.getPageWidth(),j=e.left>=0;switch(this.getPlacement()){case"left":b=j&&k&&f?c:a;d=j?a:c;break;case"right":b=g&&k&&f?c:a;d=g?a:c;break;case h:b=k&&j&&g?c:a;d=k?a:c;break;case i:b=f&&j&&g?c:a;d=f?a:c;break;default:b=c}return{exitFunction:b,flip:d}},getElementLocation:function(b,e){var d=this,f=a,g=d.checkElementPosition(b,e),i=g.flip,h;if(g.exitFunction)return{elementLocation:b,flip:a,updateArrow:a};if(i){h=b;b=d.getElementStyle[d.options.smartPositionReplacement[d.getPlacement()]](e)}if(b.top<0){f=c;b.top=0}else if(b.top+e.element.height>d.getPageHeight()){d.positionData.arrow.top=b.top;b.top=d.getPageHeight()-e.element.height;d.positionData.arrow.adjust=d.positionData.arrow.top-b.top;f=c}if(b.left<0){b.left=0;f=c}else if(b.left+e.element.width>d.getPageWidth()){d.positionData.arrow.left=b.left;b.left=d.getPageWidth()-e.element.width;d.positionData.arrow.adjust=d.positionData.arrow.left-b.left;f=c}g=d.checkElementPosition(b,e);return!g.exitFunction?{elementLocation:h,flip:a,updateArrow:a}:{elementLocation:b,flip:i,updateArrow:f}},getElementStyle:{left:function(a){return{top:a.parent.top+a.parent.height/2-a.element.height/2,left:a.parent.left-a.element.width,marginTop:0,marginRight:0,marginBottom:0,marginLeft:-15}},right:function(a){return{top:a.parent.top+a.parent.height/2-a.element.height/2,left:a.parent.left+a.parent.width,marginTop:0,marginRight:0,marginBottom:0,marginLeft:15}},top:function(a){return{top:a.parent.top-a.element.height,left:a.parent.left+a.parent.width/2-a.element.width/2,marginTop:-15,marginRight:0,marginBottom:0,marginLeft:0}},bottom:function(a){return{top:a.parent.top+a.parent.height,left:a.parent.left+a.parent.width/2-a.element.width/2,marginTop:15,marginRight:0,marginBottom:0,marginLeft:0}},bottomleft:function(a){return{top:a.parent.top+a.parent.height,left:a.parent.left+a.parent.width-a.element.width+16,marginTop:15,marginRight:0,marginBottom:0,marginLeft:0}},bottomright:function(a){return{top:a.parent.top+a.parent.height,left:a.parent.left-16,marginTop:15,marginRight:0,marginBottom:0,marginLeft:0}},topleft:function(a){return{top:a.parent.top-a.element.height,left:a.parent.left+a.parent.width-a.element.width+16,marginTop:-15,marginRight:0,marginBottom:0,marginLeft:0}},topright:function(a){return{top:a.parent.top-a.element.height,left:a.parent.left-16,marginTop:-15,marginRight:0,marginBottom:0,marginLeft:0}},topcenter:function(a){return{top:a.parent.top,left:a.parent.left+a.parent.width/2-a.element.width/2,marginTop:-15,marginRight:0,marginBottom:0,marginLeft:0}}},getArrowStyle:{left:function(a){return{top:a.parent.top-a.arrow.top+a.parent.height/2+a.arrow.adjust}},right:function(a){return{top:a.parent.top-a.arrow.top+a.parent.height/2+a.arrow.adjust}},top:function(a){return{left:a.parent.left-a.arrow.left+a.parent.width/2+a.arrow.adjust}},bottom:function(a){return{left:a.parent.left-a.arrow.left+a.parent.width/2+a.arrow.adjust}}},checkArrowLocation:function(e){var a=this,b={},c=a.positionData.parent,d=a.positionData.element;switch(a.getPlacement()){case"bottomleft":case"topleft":b={left:d.width-c.width/2-16};break;case"bottomright":case"topright":b={left:c.width/2+16};break;default:if(e)b=a.getArrowStyle[a.options.smartPositionReplacement[a.getPlacement()]](a.positionData)}return b},setElement:function(){var a=this,b={},c={};if(a.element){b=a.getPosition();a.element.setStyle(a.addUnitToObj(b.elementLocation));if(b.flip){a.options.showArrow&&a.updateArrowPlacement(a.getPlacement());a.setCurrentPlacement(a.options.smartPositionReplacement[a.getPlacement()])}if(a.options.showArrow){c=a.checkArrowLocation(b.updateArrow);a.updateArrowElement(c)}}}}}};var otPopupMask=null;function otShowPopupMask(){if(!otPopupMask){otPopupMask=new otPopupDiv;otPopupMask.modal=true;otPopupMask.maskColor=""}otPopupMask.showMask()}function otHidePopupMask(){otPopupMask&&otPopupMask.hideMask()}CNQR.Tour={currentTip:null,tipArray:[],findTip:function(c,d){for(var b=CNQR.Tour.tipArray,a=0,e=b.length;a<e;a++)if(c==b[a].data.tourId&&d==b[a].data.tipId)return b[a];return null},showTip:function(a){var b=a.delay||0;if(a.tourId&&a.tipId){var c=CNQR.Tour.findTip(a.tourId,a.tipId);if(c)setTimeout(function(){c.open()}.bind(this),b);else if(a.html){var d=new CNQR.TourTipPopover(a);CNQR.Tour.tipArray.push(d);setTimeout(function(){d.open()}.bind(this),b)}else if(a.url){var e={onSuccess:function(d){var a=d.responseJSON;if(a&&a.Status=="SUCCESS"&&a.data&&a.data.html){var c=a.data;setTimeout(function(){CNQR.Tour.showTip(c)}.bind(this),b)}},onFailure:function(){}};new Ajax.Request(a.url,e)}}},showTipsOnClick:function(c){var a=$(c.target),b=typeof a.data==="function"?a.data():{};b&&b.url&&new Ajax.Request(b.url,{method:"POST",parameters:{Value:a.checked}})},createTourStartSlideTab:function(b){var g="windowtopcenter",e="click",i=".cnqr-tourstart-btn",f=true,h="tourstart-"+b.tourId,r=['<div class="cnqr-tourstart-content" id="',h,'">','<div class="cnqr-tourtip">',b.html,"</div>",'<a href="#" role="button" class="cnqr-tourstart-btn" data-tour-id="',b.tourId,'" data-tip-id="',b.tipId,'" data-url="',b.url,'" >',b.buttonText,'<i class="icon-arrow-2-s"></i></a>',"</div>"].join("");function c(a){return $(h).getElementsBySelector(a)[0]}function m(){var a="cnqr-expanded";o.each(function(b){if(b)if(b.hasClassName(a))b.removeClassName(a);else b.addClassName(a)})}function l(){var b=j.getDimensions().width,a=d.getDimensions().width,c=s.getDimensions().width,e=document.body.getDimensions().width;j.style.left=c/2-b/2+"px";d.style.left=e/2-a/2+"px"}var a=new otPopupDiv;a.hasShadow=f;a.modal=f;a.initKeyDownEventOnShow=f;a.className="popuptourtip";a.showEffect="slide";a.maskColor="";a.effectDuration=.8;a.create("tourTipPopup");a.setWidth("760px");a.setHeight("205px");a.setHTML(r);a.onhide=function(){m();$(a.div).stopObserving("keydown",a.boundKeyDownEvent)};a.beforeOnShow=function(){a.outerDiv.style.zIndex=1e3};a.onshow=function(){m();$(a.div).observe("keydown",a.boundKeyDownEvent)};var t=$(h),j=c(i),n=c("[data-toggle=tourShowTipsCheck]"),k=c("[data-toggle=tourTip]"),p=c(".tourtip-close"),j=c(i),s=c(".cnqr-tourtip"),d=j.clone(f),q=h+"-btn";d.id=q;d.style.position="absolute";$("cnqr-premenu-container").appendChild(d);l();addEvent(window,"resize",l);var o=$$(i);o.each(function(b){b.observe(e,function(b){b.preventDefault();a.togglePopup(null,g)})});p&&p.observe(e,function(b){b.preventDefault();a.hidePopup()});if(k){k.setAttribute("data-delay",parseInt(a.effectDuration*1e3));k.observe(e,function(){a.hidePopup()})}n&&n.observe(e,function(a){CNQR.Tour.showTipsOnClick(a)});b.autoShow.toLowerCase()=="true"&&a.showPopup(null,g)}};CNQR.TourTipPopover=function(a){var b=this;b.anchorToElement=a.anchorTo?$(a.anchorTo):null;a.popupPlacement=a.popupPlacement.toLowerCase().replace("below","bottom").replace("above","top");var f=a.popupPlacement=="topcenter"?"false":"true";b.data=a;b.popOver=CNQR.Dialog.create({parentElement:b.anchorToElement,toggle:"popover",placement:a.popupPlacement,content:a.html,showCloseButton:f,showArrow:"true",type:"tourtip",elementExistsClass:"cnqr-tourtip-created",modal:true,showEffect:"appear",zIndex:1e3});b.popOver.setHtml();var e=b.popOver.getElementId(),d=$$(["#",e," .tourtip-close"].join(""))[0];if(d){var g=b;d.observe("click",function(a){a.preventDefault();g.close()})}var c=$$(["#",e," [data-toggle=tourShowTipsCheck]"].join(""))[0];c&&c.observe("click",function(a){CNQR.Tour.showTipsOnClick(a)})};CNQR.TourTipPopover.prototype.open=function(b){var a=this;CNQR.Tour.currentTip&&CNQR.Tour.currentTip.close(true);CNQR.Tour.currentTip=a;if(a.stupidIeTimer!=null){clearTimeout(a.stupidIeTimer);a.stupidIeTimer=null}else if(!b&&document.body.hasClassName("oldIE")&&document.body.hasClassName("cnqr-ext-viewport")){var c=a;a.popOver.scrollToParent();a.stupidIeTimer=window.setTimeout(function(){c.open(true)},500);return}a.popOver.setElement();a.popOver.open()};CNQR.TourTipPopover.prototype.close=function(a){CNQR.Tour.currentTip=null;this.popOver.close(a)};CNQR.TourTipPopover.prototype.resetPosition=function(){this.popOver.setElement()};CNQR.focusOnPopUp=function(c,a){if(CNQR&&CNQR.getFocusableElements&&c.is508Popup){var b=CNQR.getFocusableElements(a,true);if(b.length)tryFocus(b.first());else tryFocus(a);CNQR.ConcurAccessible&&setTimeout(function(){CNQR.hideFromScreenReaders($$("body")[0],a)}.bind(c),100)}};
